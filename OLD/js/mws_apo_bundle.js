var yp=typeof globalThis<"u"?globalThis:typeof window<"u"||typeof window<"u"?window:typeof self<"u"?self:{};function io(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Gn={exports:{}},ws=function(t,n){return function(){for(var s=new Array(arguments.length),o=0;o<s.length;o++)s[o]=arguments[o];return t.apply(n,s)}},oo=ws,Ve=Object.prototype.toString;function Hn(e){return Ve.call(e)==="[object Array]"}function hn(e){return typeof e>"u"}function ao(e){return e!==null&&!hn(e)&&e.constructor!==null&&!hn(e.constructor)&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}function lo(e){return Ve.call(e)==="[object ArrayBuffer]"}function co(e){return typeof FormData<"u"&&e instanceof FormData}function uo(e){var t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&e.buffer instanceof ArrayBuffer,t}function po(e){return typeof e=="string"}function fo(e){return typeof e=="number"}function Ps(e){return e!==null&&typeof e=="object"}function Ot(e){if(Ve.call(e)!=="[object Object]")return!1;var t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}function mo(e){return Ve.call(e)==="[object Date]"}function _o(e){return Ve.call(e)==="[object File]"}function Eo(e){return Ve.call(e)==="[object Blob]"}function Ns(e){return Ve.call(e)==="[object Function]"}function ho(e){return Ps(e)&&Ns(e.pipe)}function To(e){return typeof URLSearchParams<"u"&&e instanceof URLSearchParams}function go(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function Io(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function xn(e,t){if(!(e===null||typeof e>"u"))if(typeof e!="object"&&(e=[e]),Hn(e))for(var n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.call(null,e[s],s,e)}function Tn(){var e={};function t(s,o){Ot(e[o])&&Ot(s)?e[o]=Tn(e[o],s):Ot(s)?e[o]=Tn({},s):Hn(s)?e[o]=s.slice():e[o]=s}for(var n=0,r=arguments.length;n<r;n++)xn(arguments[n],t);return e}function vo(e,t,n){return xn(t,function(s,o){n&&typeof s=="function"?e[o]=oo(s,n):e[o]=s}),e}function Oo(e){return e.charCodeAt(0)===65279&&(e=e.slice(1)),e}var ue={isArray:Hn,isArrayBuffer:lo,isBuffer:ao,isFormData:co,isArrayBufferView:uo,isString:po,isNumber:fo,isObject:Ps,isPlainObject:Ot,isUndefined:hn,isDate:mo,isFile:_o,isBlob:Eo,isFunction:Ns,isStream:ho,isURLSearchParams:To,isStandardBrowserEnv:Io,forEach:xn,merge:Tn,extend:vo,trim:go,stripBOM:Oo},ke=ue;function ur(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var Ms=function(t,n,r){if(!n)return t;var s;if(r)s=r(n);else if(ke.isURLSearchParams(n))s=n.toString();else{var o=[];ke.forEach(n,function(l,c){l===null||typeof l>"u"||(ke.isArray(l)?c=c+"[]":l=[l],ke.forEach(l,function(d){ke.isDate(d)?d=d.toISOString():ke.isObject(d)&&(d=JSON.stringify(d)),o.push(ur(c)+"="+ur(d))}))}),s=o.join("&")}if(s){var i=t.indexOf("#");i!==-1&&(t=t.slice(0,i)),t+=(t.indexOf("?")===-1?"?":"&")+s}return t},yo=ue;function qt(){this.handlers=[]}qt.prototype.use=function(t,n,r){return this.handlers.push({fulfilled:t,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1};qt.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)};qt.prototype.forEach=function(t){yo.forEach(this.handlers,function(r){r!==null&&t(r)})};var Ro=qt,So=ue,Ao=function(t,n){So.forEach(t,function(s,o){o!==n&&o.toUpperCase()===n.toUpperCase()&&(t[n]=s,delete t[o])})},Us=function(t,n,r,s,o){return t.config=n,r&&(t.code=r),t.request=s,t.response=o,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},t},jt,dr;function qs(){if(dr)return jt;dr=1;var e=Us;return jt=function(n,r,s,o,i){var a=new Error(n);return e(a,r,s,o,i)},jt}var Xt,pr;function Do(){if(pr)return Xt;pr=1;var e=qs();return Xt=function(n,r,s){var o=s.config.validateStatus;!s.status||!o||o(s.status)?n(s):r(e("Request failed with status code "+s.status,s.config,null,s.request,s))},Xt}var zt,fr;function Lo(){if(fr)return zt;fr=1;var e=ue;return zt=e.isStandardBrowserEnv()?function(){return{write:function(r,s,o,i,a,l){var c=[];c.push(r+"="+encodeURIComponent(s)),e.isNumber(o)&&c.push("expires="+new Date(o).toGMTString()),e.isString(i)&&c.push("path="+i),e.isString(a)&&c.push("domain="+a),l===!0&&c.push("secure"),document.cookie=c.join("; ")},read:function(r){var s=document.cookie.match(new RegExp("(^|;\\s*)("+r+")=([^;]*)"));return s?decodeURIComponent(s[3]):null},remove:function(r){this.write(r,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),zt}var Kt,mr;function bo(){return mr||(mr=1,Kt=function(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)}),Kt}var Qt,_r;function Co(){return _r||(_r=1,Qt=function(t,n){return n?t.replace(/\/+$/,"")+"/"+n.replace(/^\/+/,""):t}),Qt}var Jt,Er;function wo(){if(Er)return Jt;Er=1;var e=bo(),t=Co();return Jt=function(r,s){return r&&!e(s)?t(r,s):s},Jt}var Zt,hr;function Po(){if(hr)return Zt;hr=1;var e=ue,t=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return Zt=function(r){var s={},o,i,a;return r&&e.forEach(r.split(`
`),function(c){if(a=c.indexOf(":"),o=e.trim(c.substr(0,a)).toLowerCase(),i=e.trim(c.substr(a+1)),o){if(s[o]&&t.indexOf(o)>=0)return;o==="set-cookie"?s[o]=(s[o]?s[o]:[]).concat([i]):s[o]=s[o]?s[o]+", "+i:i}}),s},Zt}var en,Tr;function No(){if(Tr)return en;Tr=1;var e=ue;return en=e.isStandardBrowserEnv()?function(){var n=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a"),s;function o(i){var a=i;return n&&(r.setAttribute("href",a),a=r.href),r.setAttribute("href",a),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:r.pathname.charAt(0)==="/"?r.pathname:"/"+r.pathname}}return s=o(window.location.href),function(a){var l=e.isString(a)?o(a):a;return l.protocol===s.protocol&&l.host===s.host}}():function(){return function(){return!0}}(),en}var tn,gr;function Ir(){if(gr)return tn;gr=1;var e=ue,t=Do(),n=Lo(),r=Ms,s=wo(),o=Po(),i=No(),a=qs();return tn=function(c){return new Promise(function(d,f){var m=c.data,p=c.headers,_=c.responseType;e.isFormData(m)&&delete p["Content-Type"];var E=new XMLHttpRequest;if(c.auth){var g=c.auth.username||"",I=c.auth.password?unescape(encodeURIComponent(c.auth.password)):"";p.Authorization="Basic "+btoa(g+":"+I)}var T=s(c.baseURL,c.url);E.open(c.method.toUpperCase(),r(T,c.params,c.paramsSerializer),!0),E.timeout=c.timeout;function O(){if(E){var L="getAllResponseHeaders"in E?o(E.getAllResponseHeaders()):null,M=!_||_==="text"||_==="json"?E.responseText:E.response,y={data:M,status:E.status,statusText:E.statusText,headers:L,config:c,request:E};t(d,f,y),E=null}}if("onloadend"in E?E.onloadend=O:E.onreadystatechange=function(){!E||E.readyState!==4||E.status===0&&!(E.responseURL&&E.responseURL.indexOf("file:")===0)||setTimeout(O)},E.onabort=function(){E&&(f(a("Request aborted",c,"ECONNABORTED",E)),E=null)},E.onerror=function(){f(a("Network Error",c,null,E)),E=null},E.ontimeout=function(){var M="timeout of "+c.timeout+"ms exceeded";c.timeoutErrorMessage&&(M=c.timeoutErrorMessage),f(a(M,c,c.transitional&&c.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",E)),E=null},e.isStandardBrowserEnv()){var v=(c.withCredentials||i(T))&&c.xsrfCookieName?n.read(c.xsrfCookieName):void 0;v&&(p[c.xsrfHeaderName]=v)}"setRequestHeader"in E&&e.forEach(p,function(M,y){typeof m>"u"&&y.toLowerCase()==="content-type"?delete p[y]:E.setRequestHeader(y,M)}),e.isUndefined(c.withCredentials)||(E.withCredentials=!!c.withCredentials),_&&_!=="json"&&(E.responseType=c.responseType),typeof c.onDownloadProgress=="function"&&E.addEventListener("progress",c.onDownloadProgress),typeof c.onUploadProgress=="function"&&E.upload&&E.upload.addEventListener("progress",c.onUploadProgress),c.cancelToken&&c.cancelToken.promise.then(function(M){E&&(E.abort(),f(M),E=null)}),m||(m=null),E.send(m)})},tn}var Z=ue,vr=Ao,Mo=Us,Uo={"Content-Type":"application/x-www-form-urlencoded"};function Or(e,t){!Z.isUndefined(e)&&Z.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}function qo(){var e;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(e=Ir()),e}function Bo(e,t,n){if(Z.isString(e))try{return(t||JSON.parse)(e),Z.trim(e)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(e)}var Bt={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:qo(),transformRequest:[function(t,n){return vr(n,"Accept"),vr(n,"Content-Type"),Z.isFormData(t)||Z.isArrayBuffer(t)||Z.isBuffer(t)||Z.isStream(t)||Z.isFile(t)||Z.isBlob(t)?t:Z.isArrayBufferView(t)?t.buffer:Z.isURLSearchParams(t)?(Or(n,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):Z.isObject(t)||n&&n["Content-Type"]==="application/json"?(Or(n,"application/json"),Bo(t)):t}],transformResponse:[function(t){var n=this.transitional,r=n&&n.silentJSONParsing,s=n&&n.forcedJSONParsing,o=!r&&this.responseType==="json";if(o||s&&Z.isString(t)&&t.length)try{return JSON.parse(t)}catch(i){if(o)throw i.name==="SyntaxError"?Mo(i,this,"E_JSON_PARSE"):i}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(t){return t>=200&&t<300}};Bt.headers={common:{Accept:"application/json, text/plain, */*"}};Z.forEach(["delete","get","head"],function(t){Bt.headers[t]={}});Z.forEach(["post","put","patch"],function(t){Bt.headers[t]=Z.merge(Uo)});var kn=Bt,$o=ue,Vo=kn,Go=function(t,n,r){var s=this||Vo;return $o.forEach(r,function(i){t=i.call(s,t,n)}),t},nn,yr;function Bs(){return yr||(yr=1,nn=function(t){return!!(t&&t.__CANCEL__)}),nn}var Rr=ue,rn=Go,Ho=Bs(),xo=kn;function sn(e){e.cancelToken&&e.cancelToken.throwIfRequested()}var ko=function(t){sn(t),t.headers=t.headers||{},t.data=rn.call(t,t.data,t.headers,t.transformRequest),t.headers=Rr.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),Rr.forEach(["delete","get","head","post","put","patch","common"],function(s){delete t.headers[s]});var n=t.adapter||xo.adapter;return n(t).then(function(s){return sn(t),s.data=rn.call(t,s.data,s.headers,t.transformResponse),s},function(s){return Ho(s)||(sn(t),s&&s.response&&(s.response.data=rn.call(t,s.response.data,s.response.headers,t.transformResponse))),Promise.reject(s)})},te=ue,$s=function(t,n){n=n||{};var r={},s=["url","method","data"],o=["headers","auth","proxy","params"],i=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],a=["validateStatus"];function l(f,m){return te.isPlainObject(f)&&te.isPlainObject(m)?te.merge(f,m):te.isPlainObject(m)?te.merge({},m):te.isArray(m)?m.slice():m}function c(f){te.isUndefined(n[f])?te.isUndefined(t[f])||(r[f]=l(void 0,t[f])):r[f]=l(t[f],n[f])}te.forEach(s,function(m){te.isUndefined(n[m])||(r[m]=l(void 0,n[m]))}),te.forEach(o,c),te.forEach(i,function(m){te.isUndefined(n[m])?te.isUndefined(t[m])||(r[m]=l(void 0,t[m])):r[m]=l(void 0,n[m])}),te.forEach(a,function(m){m in n?r[m]=l(t[m],n[m]):m in t&&(r[m]=l(void 0,t[m]))});var u=s.concat(o).concat(i).concat(a),d=Object.keys(t).concat(Object.keys(n)).filter(function(m){return u.indexOf(m)===-1});return te.forEach(d,c),r};const Fo="axios",Wo="0.21.4",Yo="Promise based HTTP client for the browser and node.js",jo="index.js",Xo={test:"grunt test",start:"node ./sandbox/server.js",build:"NODE_ENV=production grunt build",preversion:"npm test",version:"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json",postversion:"git push && git push --tags",examples:"node ./examples/server.js",coveralls:"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js",fix:"eslint --fix lib/**/*.js"},zo={type:"git",url:"https://github.com/axios/axios.git"},Ko=["xhr","http","ajax","promise","node"],Qo="Matt Zabriskie",Jo="MIT",Zo={url:"https://github.com/axios/axios/issues"},ea="https://axios-http.com",ta={coveralls:"^3.0.0","es6-promise":"^4.2.4",grunt:"^1.3.0","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^23.0.0","grunt-karma":"^4.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^4.0.2","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1",karma:"^6.3.2","karma-chrome-launcher":"^3.1.0","karma-firefox-launcher":"^2.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^4.3.6","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","load-grunt-tasks":"^3.5.2",minimist:"^1.2.0",mocha:"^8.2.1",sinon:"^4.5.0","terser-webpack-plugin":"^4.2.3",typescript:"^4.0.5","url-search-params":"^0.10.0",webpack:"^4.44.2","webpack-dev-server":"^3.11.0"},na={"./lib/adapters/http.js":"./lib/adapters/xhr.js"},ra="dist/axios.min.js",sa="dist/axios.min.js",ia="./index.d.ts",oa={"follow-redirects":"^1.14.0"},aa=[{path:"./dist/axios.min.js",threshold:"5kB"}],la={name:Fo,version:Wo,description:Yo,main:jo,scripts:Xo,repository:zo,keywords:Ko,author:Qo,license:Jo,bugs:Zo,homepage:ea,devDependencies:ta,browser:na,jsdelivr:ra,unpkg:sa,typings:ia,dependencies:oa,bundlesize:aa};var Vs=la,Fn={};["object","boolean","number","function","string","symbol"].forEach(function(e,t){Fn[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});var Sr={},ca=Vs.version.split(".");function Gs(e,t){for(var n=t?t.split("."):ca,r=e.split("."),s=0;s<3;s++){if(n[s]>r[s])return!0;if(n[s]<r[s])return!1}return!1}Fn.transitional=function(t,n,r){var s=n&&Gs(n);function o(i,a){return"[Axios v"+Vs.version+"] Transitional option '"+i+"'"+a+(r?". "+r:"")}return function(i,a,l){if(t===!1)throw new Error(o(a," has been removed in "+n));return s&&!Sr[a]&&(Sr[a]=!0,console.warn(o(a," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(i,a,l):!0}};function ua(e,t,n){if(typeof e!="object")throw new TypeError("options must be an object");for(var r=Object.keys(e),s=r.length;s-- >0;){var o=r[s],i=t[o];if(i){var a=e[o],l=a===void 0||i(a,o,e);if(l!==!0)throw new TypeError("option "+o+" must be "+l);continue}if(n!==!0)throw Error("Unknown option "+o)}}var da={isOlderVersion:Gs,assertOptions:ua,validators:Fn},Hs=ue,pa=Ms,Ar=Ro,Dr=ko,$t=$s,xs=da,Fe=xs.validators;function dt(e){this.defaults=e,this.interceptors={request:new Ar,response:new Ar}}dt.prototype.request=function(t){typeof t=="string"?(t=arguments[1]||{},t.url=arguments[0]):t=t||{},t=$t(this.defaults,t),t.method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var n=t.transitional;n!==void 0&&xs.assertOptions(n,{silentJSONParsing:Fe.transitional(Fe.boolean,"1.0.0"),forcedJSONParsing:Fe.transitional(Fe.boolean,"1.0.0"),clarifyTimeoutError:Fe.transitional(Fe.boolean,"1.0.0")},!1);var r=[],s=!0;this.interceptors.request.forEach(function(f){typeof f.runWhen=="function"&&f.runWhen(t)===!1||(s=s&&f.synchronous,r.unshift(f.fulfilled,f.rejected))});var o=[];this.interceptors.response.forEach(function(f){o.push(f.fulfilled,f.rejected)});var i;if(!s){var a=[Dr,void 0];for(Array.prototype.unshift.apply(a,r),a=a.concat(o),i=Promise.resolve(t);a.length;)i=i.then(a.shift(),a.shift());return i}for(var l=t;r.length;){var c=r.shift(),u=r.shift();try{l=c(l)}catch(d){u(d);break}}try{i=Dr(l)}catch(d){return Promise.reject(d)}for(;o.length;)i=i.then(o.shift(),o.shift());return i};dt.prototype.getUri=function(t){return t=$t(this.defaults,t),pa(t.url,t.params,t.paramsSerializer).replace(/^\?/,"")};Hs.forEach(["delete","get","head","options"],function(t){dt.prototype[t]=function(n,r){return this.request($t(r||{},{method:t,url:n,data:(r||{}).data}))}});Hs.forEach(["post","put","patch"],function(t){dt.prototype[t]=function(n,r,s){return this.request($t(s||{},{method:t,url:n,data:r}))}});var fa=dt,on,Lr;function ks(){if(Lr)return on;Lr=1;function e(t){this.message=t}return e.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},e.prototype.__CANCEL__=!0,on=e,on}var an,br;function ma(){if(br)return an;br=1;var e=ks();function t(n){if(typeof n!="function")throw new TypeError("executor must be a function.");var r;this.promise=new Promise(function(i){r=i});var s=this;n(function(i){s.reason||(s.reason=new e(i),r(s.reason))})}return t.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},t.source=function(){var r,s=new t(function(i){r=i});return{token:s,cancel:r}},an=t,an}var ln,Cr;function _a(){return Cr||(Cr=1,ln=function(t){return function(r){return t.apply(null,r)}}),ln}var cn,wr;function Ea(){return wr||(wr=1,cn=function(t){return typeof t=="object"&&t.isAxiosError===!0}),cn}var Pr=ue,ha=ws,yt=fa,Ta=$s,ga=kn;function Fs(e){var t=new yt(e),n=ha(yt.prototype.request,t);return Pr.extend(n,yt.prototype,t),Pr.extend(n,t),n}var ge=Fs(ga);ge.Axios=yt;ge.create=function(t){return Fs(Ta(ge.defaults,t))};ge.Cancel=ks();ge.CancelToken=ma();ge.isCancel=Bs();ge.all=function(t){return Promise.all(t)};ge.spread=_a();ge.isAxiosError=Ea();Gn.exports=ge;Gn.exports.default=ge;var Ia=Gn.exports,va=Ia;const Te=io(va);window.global=window;var lt=(e=>(e.INLINE="inline",e.MODAL="modal",e))(lt||{}),P=(e=>(e.INIT="data-mw-apo-init",e.VARIANT_ID="data-mw-apo-variant-id",e.PROCESS="data-mw-apo-process",e.CONFIGURE_LINK="data-mw-apo-configure-link",e.CART_ID="data-mw-apo-cart-id",e.PROP_HIDDEN="data-mw-apo-hidden-prop",e.S_CONTAINER="data-mw-apo-s-container",e.S_ADD_TO_CART="data-mw-apo-s-add-to-cart",e.S_PRICE="data-mw-apo-s-price",e.S_COMPARE_PRICE="data-mw-apo-s-compare-price",e.S_GALLERY_CONTAINER="data-mw-apo-s-gallery-container",e.S_GALLERY_IMAGE="data-mw-apo-s-gallery-image",e.S_QUANTITY="data-mw-apo-s-quantity",e.S_VARIANTS="data-mw-apo-s-variants",e.S_FORM="data-mw-apo-s-form",e.H_VALIDATION_DISABLED="data-mw-apo-validation-disabled",e.TOOLTIP="data-mw-tooltip",e.TOOLTIP_PLACEMENT="data-mw-tooltip-placement",e.DESCRIPTION_TOOLTIP="data-mw-option-value-description-tooltip",e.DESCRIPTION_TEXT="data-mw-option-value-description-text",e.QTY_VALUE_ID="data-qty-for-value",e.VALUE_ID="data-value-id",e.EVENT_SKIP="data-mw-apo-event-skip",e.LIGHTBOX="data-mw-lightbox",e.TEXT_LENGTH="data-mw-text-max-length",e.ACCUMULATED_TITLE="data-mw-option-accumulated-title",e.PRODUCT_INFO="data-mw-product",e))(P||{}),D=(e=>(e.HAS_OPTIONS="mw-apo-has-options",e.ORIGIN_ADD_TO_CART="mw-apo-add-to-cart-hide",e.ORIGIN_BUY_IT_NOW="mw-apo-buy-it-now-hide",e.ORIGIN_STICKY_ADD_TO_CART="mw-apo-sticky-add-to-cart-hide",e.CLONED_ADD_TO_CART="mw-apo-add-to-cart-cloned",e.CLONED_BUY_IT_NOW="mw-apo-buy-it-now-cloned",e.CLONED_STICKY_ADD_TO_CART="mw-apo-sticky-add-to-cart-cloned",e.CUSTOM_ADD_TO_CART="mw-apo-add-to-cart-custom",e.IN_PROGRESS="mw-apo-in-progress",e.VISUALLY_HIDDEN="mw-visually-hidden",e.HIDDEN="mw-hidden",e.OPTION_CONTAINER="mw-option__container",e.OPTION_VALUE_BLOCK="mw-option__value",e.OPTION_HELPTEXT="mw-option__helptext",e.OPTION_VALUE_SELECTED="mw-option__value--selected",e.OPTION_MEDIA="mw-option__media",e.VALUE_QTY_BLOCK="mw-option__value-qty",e.VALUE_QTY_BLOCK_DISABLED="mw-option__value-qty--disabled",e.CONFIGURE_LINK="mw-apo-configure-link",e.PREVENT_DEFAULT="mw-apo-prevent-default",e.NOT_AVAILABLE="mw-option__value--not_available",e.HIDDEN_MAX_VALUE="mw-hidden-max-value",e.EXPAND_BUTTON="mw-apo-expand-button",e.SWIPER="mw-swiper",e))(D||{}),q=(e=>(e.OWN_VARIANT_TITLE="#MWS Options",e.OWN_PROP_CART="_mws_cart",e.OWN_PROP_QTY="_mws_qty",e.OWN_PROP_PRODUCTS="_mws_products",e.OWN_PROP_REQUIRED="_mws_required",e.OWN_PROP_OPTION="_mws_option",e.CART_TOKEN_COOKIE_NAME="_mws_apo_cart_token",e.PRODUCT_META_PLACEHOLDER="__product_meta__",e))(q||{}),oe=(e=>(e.INIT_ADD_TO_CART="mwApo::attachEvents::initAddToCart",e.INIT_BUY_IT_NOW="mwApo::attachEvents::initBuyItNow",e.INIT_STICKY_ADD_TO_CART="mwApo::attachEvents::stickyAddToCart",e.APPLY_ATTRIBUTE_STATE_HTML="mwApo::applyAttributeStateToHtml",e.INLINE_ON_CHANGE_VARIANT="mwApo::INIT_INLINE_ON_CHANGE_VARIANT",e.ON_CHANGE_OPTION="mwApo::ON_CHANGE_OPTION",e))(oe||{});const mt="https://apo-admin.mageworx.com/front",ve={apiUrl:mt,variantOptionsUri:`${mt}/product/:shopDomain/:cacheHash/:productId/:variantId.js`,cartOptionsUri:`${mt}/product/:shopDomain/cart/:cartId`,cartQtyOptionsUri:`${mt}/product/:shopDomain/cart/:cartId/qty/:qty`};function Oa(e,t){if(t===null)return e;if(t==="master")return Nr(e);const n=e.match(/\.(jpg|jpeg|gif|png|bmp|bitmap|tiff|tif)(\?v=\d+)?$/i);if(n){const r=e.split(n[0]),s=n[0];return Nr(`${r[0]}_${t}${s}`)}else return null}function Nr(e){return e.replace(/http(s)?:/,"")}const G=(...e)=>{(document.cookie.indexOf("mw-develop")>-1||ve.apiUrl.indexOf(".mws.test")>-1)&&console.log("%c%s%c%s","color: #7d5ac0;","MW APO:","color: #313749;font-size:14px;",JSON.stringify(e))},Mr=()=>{const e=document.querySelector(".mw-text--style-negative[data-helptext-type='required']:not(.mw-hidden)"),t=e?.getBoundingClientRect(),n=e?.closest(".mw-option")?.offsetHeight;return t?t.top+window.scrollY-n:0},Ur=(e,t=1e3)=>{const n=(c,u,d,f)=>(c/=f/2,c<1?d/2*c*c+u:(c--,-d/2*(c*(c-2)-1)+u)),r=document.scrollingElement||document.documentElement,s=r.scrollTop,o=e-s,i=20;let a=0;const l=()=>{a+=i;const c=n(a,s,o,t);r.scrollTop=c,a<t&&setTimeout(l,i)};l()},Ws=e=>{const t=document.createElement("div");return t.innerHTML=e,t},_t=(e,t)=>{const n=document.createElement("input");return n.setAttribute("type","hidden"),n.setAttribute(P.PROP_HIDDEN,""),n.setAttribute("name",e),n.setAttribute("value",t),n},qr=(e,t,n,r)=>{const s=new Date;s.setTime(s.getTime()+n*24*60*60*1e3);let o={expires:s.toUTCString()};o=r?{...o,...{SameSite:"None",Secure:!0}}:o,Ys(e,t,o)},Ys=(e,t,n)=>{n={path:"/",...n},n.expires instanceof Date&&(n.expires=n.expires.toUTCString());let r=encodeURIComponent(e)+"="+encodeURIComponent(t);for(let s in n){r+="; "+s;let o=n[s];o!==!0&&(r+="="+o)}document.cookie=r},Ce=e=>{const t=`; ${document.cookie}`.split(`; ${e}=`);let n;return t.length==2&&(n=t.pop()?.split(";").shift()),n!==void 0?decodeURIComponent(n):n},ya=e=>{Ys(e,"",{"max-age":"-1"})},Ra=(e,t,n,r,s)=>{e=e.replace(/\s?-\sdefault\stitle\s?/i,"");const o=!!t,i=o?`<div class="mw-grid__item--4">
    <div class="mw-product-info__image">
      <img src="${Oa(t,"400x400")??t}" alt="${e}" />
    </div>
  </div>`:"",a=r&&Number(r)>Number(n)?`&nbsp;<s class="mw-product-info__compare-price"><small>${r}</small></s>`:"";return`
  <div class="mw-product-info">
    <div class="mw-grid">
      ${i}
      <div class="mw-grid__item${o?"--8":""}">
        <div class="mw-stack mw-stack--vertical">
          <div class="mw-stack__item">
            <h2 class="mw-product-info__title">${e}</h2>
          </div>
          <div class="mw-stack__item">
            <h3 class="mw-product-info__price">
              <span>${n}</span>
              ${a}
            </h3>
          </div>
          <div class="mw-stack__item">
            ${q.PRODUCT_META_PLACEHOLDER}
          </div>
          <div class="mw-stack__item">
            <div class="mw-product-info__quantity">
              <div class="mw-stack mw-stack--alignment-center">
                <div class="mw-stack__item">
                  Qty:
                </div>
                <div class="mw-stack__item">
                  <input ${P.EVENT_SKIP}="" type="number" value="${s}" min="1" pattern="[0-9]*" />
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>`},Sa=e=>({text:["text/*","application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.openxmlformats-officedocument.wordprocessingml.template","application/vnd.ms-word.document.macroEnabled.12","application/vnd.ms-word.template.macroEnabled.12","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.openxmlformats-officedocument.spreadsheetml.template","application/vnd.ms-excel.sheet.macroEnabled.12","application/vnd.ms-excel.template.macroEnabled.12","application/vnd.ms-excel.addin.macroEnabled.12","application/vnd.ms-excel.sheet.binary.macroEnabled.12","application/vnd.ms-powerpoint","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/vnd.openxmlformats-officedocument.presentationml.template","application/vnd.openxmlformats-officedocument.presentationml.slideshow","application/vnd.ms-powerpoint.addin.macroEnabled.12","application/vnd.ms-powerpoint.presentation.macroEnabled.12","application/vnd.ms-powerpoint.template.macroEnabled.12","application/vnd.ms-powerpoint.slideshow.macroEnabled.12","application/vnd.ms-access","application/vnd.apple.pages","application/vnd.apple.numbers","application/xml","application/zip"],audio:["audio/*","video/*"],image:["image/*"]})[e],Wn=e=>{const t=n=>{if(n.keyCode===13)return n.preventDefault(),n.stopPropagation(),!1};e.addEventListener("keydown",t,!0),e.addEventListener("keyup",t,!0)},js=e=>new Promise(t=>setTimeout(t,e)),Xs=(e,{[e]:t,...n})=>n,Ue=(e=!1)=>{const t=document.createElement("div");t.setAttribute("class","mw-overlay"),t.setAttribute("id","mws_apo_loader"),t.innerHTML=`
  <svg class="mw-overlay__spinner" height="100" width="100" viewBox="0 0 100 100">
    <circle class="mw-overlay__spinner-circle mw-overlay__spinner-circle-background" cx="50" cy="50" r="45"></circle>
    <circle class="mw-overlay__spinner-circle mw-overlay__spinner-circle--animated" cx="50" cy="50" r="45"></circle>
  </svg>`;let n=document.querySelector("#mws_apo_loader");if(e&&n){n.remove();return}!n&&!e&&document.querySelector("body")?.appendChild(t)},bt=window.mwApoInit.selectors||{};function ce(e,t){let n=null;if(bt[e]===void 0)return n;const r=t||document;for(const s of bt[e]){const o=r.querySelector(s);if(o!==null){n=o;break}}return n}function ct(e,t){let n=[];if(bt[e]===void 0)return n;const r=t||document;for(const s of bt[e]){const o=r.querySelectorAll(s);if(o.length){n=[...o];break}}return n}function Aa(){const e=`
    <button type="button" class="${D.CUSTOM_ADD_TO_CART}" aria-busy="false">
      <span class="mw-text">Add to cart</span>
      <span class="mw-apo-spinner">
        <svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
          <path d="M7.229 1.173a9.25 9.25 0 1011.655 11.412 1.25 1.25 0 10-2.4-.698 6.75 6.75 0 11-8.506-8.329 1.25 1.25 0 10-.75-2.385z"></path>
        </svg>
      </span>
    </button>
  `,t=document.createElement("div");return t.innerHTML=e.trim(),t.firstChild}function zs(){const e=`
    <div class="mw-apo-price-custom">
      <div class="mw-text">Total:</div>
    </div>
  `,t=document.createElement("div"),n=document.createElement("div");n.classList.add("mw-text","mw-text--style-strong"),t.innerHTML=e.trim();const r=t.firstChild;return r.append(n),{priceContainer:r,priceElement:n}}function Br(){return/(android|bb\d+|meego).+mobile|armv7l|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(navigator.userAgent)}function Ye(e,t){t.parentNode?.insertBefore(e,t),e.appendChild(t)}var we=(e=>(e.FIXED="fixed",e.PERCENT="percent",e))(we||{}),gn=(e=>(e.IMAGE="image",e.TEXT="text",e.AUDIO="audio",e.OTHER="other",e))(gn||{}),In=(e=>(e.ABSOLUTE="absolute",e.RELATIVE="relative",e))(In||{}),h=(e=>(e.TEXT="text",e.TEXTAREA="textarea",e.NUMBER="number",e.DATE="date",e.FILE="file",e.CHECKBOX="checkbox",e.RADIO="radio",e.SELECT="select",e.MULTISELECT="multiselect",e.SWATCH="swatch",e.MULTISWATCH="multiswatch",e.BUTTON="button",e.MULTIBUTTON="multibutton",e.SWATCHINPILL="swatchinpill",e.MULTISWATCHINPILL="multiswatchinpill",e.SWATCHCARD="swatchcard",e.MULTISWATCHCARD="multiswatchcard",e.SWATCHINDROPDOWN="swatchindropdown",e.RANGESLIDER="rangeslider",e.STEPCOUNTER="stepcounter",e))(h||{}),Ct=(e=>(e.PRODUCT="gid://shopify/Product/",e.PRODUCT_VARIANT="gid://shopify/ProductVariant/",e))(Ct||{}),Ks=(e=>(e.OPTION="option",e.VARIANT="variant",e))(Ks||{}),Qs=(e=>(e.ALL="all",e.ANY="any",e))(Qs||{}),vn=(e=>(e.EQ="eq",e.NEQ="!eq",e))(vn||{}),ze=(e=>(e.SET="set",e.INCREASE="increase",e.DECREASE="decrease",e))(ze||{});const $r="${{amount}}";function _e(e,t=$r,n){typeof e=="string"&&(e=e.replace(".",""));let r="";const s=/\{\{\s*(\w+)\s*\}\}/,o=t||$r;function i(a,l=2,c=",",u="."){if(isNaN(a)||a==null)return 0;if(a=(a/100).toFixed(l),n&&n.enabled&&n.rate){let p=a*n.rate;n.currency==="EUR"&&p%1?p=Math.trunc(p)+.95:p=n.currency==="USD"?Math.ceil(p*20)/20:Math.ceil(p),a=p.toFixed(l)}const d=a.split("."),f=d[0].replace(/(\d)(?=(\d\d\d)+(?!\d))/g,`$1${c}`),m=d[1]?u+d[1]:"";return f+m}switch(o.match(s)[1]){case"amount":r=i(e,2);break;case"amount_no_decimals":r=i(e,0);break;case"amount_with_comma_separator":r=i(e,2,".",",");break;case"amount_no_decimals_with_comma_separator":r=i(e,0,".",",");break;case"amount_with_apostrophe_separator":r=i(e,2,"'",".");break;case"amount_no_decimals_with_space_separator":r=i(e,0," ","");break;case"amount_with_space_separator":r=i(e,2," ",",");break;case"amount_with_period_and_space_separator":r=i(e,2," ",".");break}return o.replace(s,r)}function Js(e){let t={enabled:!1,currency:"",rate:""};return!e.settings.beta_features.multi_currency||e.settings.beta_features.multi_currency==="no"||!window.Shopify||!window.Shopify.currency||e.shop_currency===window.Shopify.currency.active||!window.Shopify.currency.rate||(t.enabled=!0,t.currency=window.Shopify.currency.active,t.rate=window.Shopify.currency.rate),t}function Zs(e){const t=Object.keys(e.values).some(r=>e.values[r].value.pricing.enabled&&e.values[r].value.pricing.price!==0),n=Object.keys(e.rules).some(r=>e.rules[r].rule.price);return!!(t||n)}const Da="modulepreload",La=function(e,t){return new URL(e,t).href},Vr={},Ze=function(t,n,r){if(!n||n.length===0)return t();const s=document.getElementsByTagName("link");return Promise.all(n.map(o=>{if(o=La(o,r),o in Vr)return;Vr[o]=!0;const i=o.endsWith(".css"),a=i?'[rel="stylesheet"]':"";if(!!r)for(let u=s.length-1;u>=0;u--){const d=s[u];if(d.href===o&&(!i||d.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${a}`))return;const c=document.createElement("link");if(c.rel=i?"stylesheet":Da,i||(c.as="script",c.crossOrigin=""),c.href=o,document.head.appendChild(c),i)return new Promise((u,d)=>{c.addEventListener("load",u),c.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${o}`)))})})).then(()=>t()).catch(o=>{const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=o,window.dispatchEvent(i),!i.defaultPrevented)throw o})};function We(e,t){const n=e.replace(/(?:\r\n|\r|\n)/g,"<br />").trim(),r=/^<img/g.test(t),s=t?`<div class="mw-tooltip__media mw-tooltip__media--${r?"image":"color"}">
    ${t}
  </div>`:"",o=n?`<div class="mw-tooltip__content">
      ${n}
    </div>`:"";return`
    <div class="mw-tooltip">
      ${s}
      ${o}
    </div>`}function nt(e){return e.replace(/(?:\r\n|\r|\n)/g,"").length}function Gr(e){return Object.prototype.hasOwnProperty.call(e,"color")}function Hr(e){return Object.prototype.hasOwnProperty.call(e,"first_color")}class ei{async init(t,n,r={onLoad:()=>{}},s){if(!t.length)return;const o=(await Ze(()=>import("./tippy-8e6cb647.js"),["./tippy-8e6cb647.js","./tippy-87df2742.css"],import.meta.url)).default;o.setDefaultProps({theme:"light-border",interactive:!0,appendTo:document.body,allowHTML:!0});const i=o(t,{onCreate(a){a.popper.classList.add("mw-tippy")},onShow(a){let l=a.reference.getAttribute(P.TOOLTIP_PLACEMENT);if((l===null||!ba.includes(l))&&(l="top"),a.setProps({placement:l}),s){a.setContent(We(s,""));return}const c=a.reference,u=c.closest(".mw-option__value--not_available");if(!c.classList.contains("mw-option__value--not_available")&&u&&u)return a.disable(),a.destroy(),!1;const d=a.reference.getAttribute(P.TOOLTIP);if(d.indexOf("v_")===0){let f=n.values[d].value,m="",p="";const g=document.querySelector(`.mw-option__value[data-value-id="${d}"]`)?.closest(".mw-option")?.querySelector(".mw-text[data-mw-option-value-description-text]");if(Oe.includes(f.input_type)&&!Br()&&(f=f,f.description.trim()&&(m=f.description.trim()),[h.SWATCH,h.MULTISWATCH,h.SWATCHCARD,h.SWATCHINPILL,h.MULTISWATCHINPILL,h.MULTISWATCHCARD,h.SWATCHINDROPDOWN].includes(f.input_type)&&f.images.length>0)){const I=f.images.filter(T=>T.hover).reverse()[0];I&&(Gr(I)?p=`<div style="background-color: ${I.color};"></div>`:Hr(I)?p=`<div style="background: linear-gradient(45deg, ${I.first_color} 50%, ${I.second_color} 50%)"></div>`:p=`<img src="${I.url}?width=400&height=400" alt="${I.alt}" title="${I.title}" />`)}if(g&&p!==""){a.setContent(We("",p));return}if((m!==""||p!=="")&&!g){a.setContent(We(m,p));return}else return!1}if(d.indexOf("media_")===0){const f=parseInt(d.replace("media_","")),m=a.reference.getAttribute(P.VALUE_ID);if(!m||!n.values[m])return;let p=n.values[m].value,_="";if(Oe.includes(p.input_type)&&!Br()&&(p=p,p.images[f]&&p.images[f].hover)){const E=p.images[f];Gr(E)?_=`<div style="background-color: ${E.color};">&nbsp;</div>`:Hr(E)?_=`<div style="background: linear-gradient(45deg, ${E.first_color} 50%, ${E.second_color} 50%)"></div>`:_=`<img src="${E.url}?width=400&height=400" alt="${E.alt}" title="${E.title}" />`}if(_!==""){a.setContent(We("",_));return}else return!1}if(d.indexOf("o_")===0){const f=n.options[d];if(f.description.trim()){a.setContent(We(f.description,""));return}else return!1}if(d.indexOf("v_")!==0||d.indexOf("o_")!==0||d.indexOf("media_")!==0){a.setContent(We(d,""));return}}});r.onLoad(i)}}const ba=["auto","auto-start","auto-end","top","bottom","right","left","top-start","top-end","bottom-start","bottom-end","right-start","right-end","left-start","left-end"],Ca=[h.CHECKBOX,h.MULTISWATCH,h.MULTIBUTTON,h.MULTISELECT,h.MULTISWATCHINPILL,h.MULTISWATCHCARD],ti=[h.SWATCHINDROPDOWN,h.SWATCH,h.BUTTON,h.SELECT,h.RADIO,h.SWATCHINPILL,h.SWATCHCARD],Oe=[...Ca,...ti],Yn=Oe.filter(e=>e!==h.MULTISELECT),jn=[q.OWN_PROP_CART,q.OWN_PROP_QTY,q.OWN_PROP_PRODUCTS,q.OWN_PROP_REQUIRED,q.OWN_PROP_OPTION];function wa(e,t){const n=Object.values(e.loadedState.values).filter(r=>r.enabled&&Oe.includes(e.loadedState.options[r.option_id].input_type));if(n.length){const r={};for(const s of n)r[s.value.id]=!0;On(e,t,r,!0)}}function xr(e){return e?.some(n=>document.body.contains(n)===!1)}function Pa(e,t){const n=(c,u)=>{if(c.override!==null)return c.override;let d=0;const f=()=>{for(const E of c.add_rules){const I=e.loadedState.rules[E].rule[u];if(Math.abs(I.value)===0)continue;const T=I.value*e.loadedState.qty;I.mode===ze.INCREASE&&(d+=T),I.mode===ze.DECREASE&&(d-=T)}},m=()=>{for(const E of c.add_values){const g=e.loadedState.values[E],I=e.loadedState.options[g.option_id];let T=g.value.pricing[u];if(Math.abs(T)!==0){if(g.value.pricing.price_type===we.PERCENT){const O=c.override!==null?c.override:c.base;T=Number((O*T/100).toFixed(2))}if((Yn.includes(I.input_type)||[h.RANGESLIDER,h.STEPCOUNTER].includes(I.input_type))&&I.qty_input){const O=parseInt(g.qty_input)||1;T=T*O}[h.TEXT,h.TEXTAREA].includes(g.value.input_type)&&g.value.price_per_character&&(g.value.exclude_spaces?T=T*g.user_input.replace(/\s/g,"").length:T=T*g.user_input.trim().length),g.value.pricing.is_onetime||(T*=e.loadedState.qty),d+=T}}},p=(E,g,I,T)=>{const O=g.value.input_type,v=e.initConfig.settings.currency_html_format==="with_currency"?e.initConfig.shop_money_with_currency_format:e.initConfig.shop_money_format;switch(O){case h.RADIO:case h.CHECKBOX:case h.MULTIBUTTON:case h.BUTTON:case h.SWATCHCARD:case h.MULTISWATCHCARD:case h.SWATCHINPILL:case h.MULTISWATCHINPILL:const L=document.querySelector(`.mw-option__value[data-value-id="${T}"]`),M=I==="price"?L?.querySelector(".mw-option__price"):L?.querySelector(".mw-option__compare-price");M&&(M.innerHTML=`(${E<0?"-":"+"}${_e(Math.abs(E)*100,v,e.multiCurrency)})`);break;case h.TEXT:case h.TEXTAREA:case h.NUMBER:case h.DATE:case h.FILE:case h.RANGESLIDER:case h.STEPCOUNTER:const y=document.querySelector(`.mw-label[for="${T}"]`),A=I==="price"?y?.querySelector(".mw-option__price"):y?.querySelector(".mw-option__compare-price");A&&(A.innerHTML=`(${E<0?"-":"+"}${_e(Math.abs(E)*100,v,e.multiCurrency)})`);break;case h.SELECT:case h.SWATCHINDROPDOWN:{const U=g.value.title,w=g.value.input_type===h.SELECT,N=g.option_id,B=e.initConfig.settings.beta_features.use_custom_select==="yes",b=document.querySelector(`.selectCustom[custom-id="select_${N}"] .selectCustom-trigger div`),H=`${E<0?"-":"+"}${_e(Math.abs(E)*100,v,e.multiCurrency)}`;if(w){const R=B?`.selectCustom-option[data-value=${T}] div`:`.mw-option__value[value="${T}"]`,C=document.querySelector(R);if(!C)break;const V=document.querySelector(`.selectCustom-option[data-value=${T}] div`),$=C.querySelector(".mw-option__price"),k=C.querySelector(".mw-option__compare-price");if(I==="price"&&($?$.innerHTML=`(${H})`:C.innerHTML=`${U} (${H})`),I==="compare_at_price"&&g.value.pricing.compare_at_price>0){const W=e.initConfig.settings.translations.i18n_select_compare_at_title.replace("[compare_at_price]",`(${H})`);k?k.innerHTML=W:C.innerHTML+=` ${W}`}B&&V&&V.parentElement?.classList.contains("mw-selected")&&b&&(b.innerHTML=V.innerHTML)}else{const R=document.querySelector(`.selectCustom-option[data-value=${T}] div`);if(!R||!b)break;const C=R.querySelector(".mw-text");if(!C)break;const V=C.firstChild,$=C.querySelector(".mw-option__compare-price");if(I==="price"&&V&&(V.textContent=`${U} (${H})`),I==="compare_at_price"&&$&&g.value.pricing.compare_at_price>0){const k=e.initConfig.settings.translations.i18n_select_compare_at_title.replace("[compare_at_price]",`(${H})`);$.innerHTML=k}R.parentElement?.classList.contains("mw-selected")&&(b.innerHTML=R.innerHTML)}break}}},_=()=>{const E=e.loadedState.values,g=e.loadedState.options;for(const T in E){const O=e.loadedState.values[T];let v=O.value.pricing[u];if(Math.abs(v)!==0&&O.value.pricing.price_type===we.PERCENT&&O.value.pricing.enabled){const L=c.override!==null?c.override:c.base;v=Number((L*v/100).toFixed(2)),p(v,O,u,T)}}const I=[];for(const T in g){const O=g[T].input_type,v=g[T].id;[h.SWATCHCARD,h.MULTISWATCHCARD,h.SWATCHINPILL,h.MULTISWATCHINPILL,h.SWATCH,h.MULTISWATCH].includes(O)&&I.push(v)}ni(e,e.loadedState,I)};return f(),m(),_(),d+c.base*e.loadedState.qty};let r=n(e.loadedState.attributes.price,"price"),s=n(e.loadedState.attributes.compare_at_price,"compare_at_price");r>s&&e.loadedState.attributes.compare_at_price.base>0&&(s=r),r=t("applyAttributeStateToHtml::price",{price:r,base:e.loadedState.attributes.price.base}).price,s=t("applyAttributeStateToHtml::comparePrice",{comparePrice:s,base:e.loadedState.attributes.compare_at_price.base}).comparePrice,r=r<0?0:r,s=s<0?0:s;const o=e.initConfig.settings.currency_html_format==="with_currency"?e.initConfig.shop_money_with_currency_format:e.initConfig.shop_money_format;let i=e.htmlElements.price;(!i||xr(i))&&(i=yn("price",e.initConfig.settings.selectors.price));const a=Zs(e.loadedState);if(!i.length&&e.htmlElements.add_to_cart?.length&&a){const{priceContainer:c,priceElement:u}=zs();e.htmlElements.price=[u],e.htmlElements.add_to_cart[0].insertAdjacentElement("beforebegin",c)}for(const c of i)c.innerHTML=_e(r*100,o,e.multiCurrency);let l=e.htmlElements.compare_price;if((!l||xr(l))&&(l=yn("compare_price",e.initConfig.settings.selectors.compare_price)),l)for(const c of l)c.innerHTML=_e(s*100,o,e.multiCurrency)}function Rt(e,t){const n=(s,o)=>{const i=e.values[s];Oe.includes(i.value.input_type)||(i.user_input.trim().length>0&&o.add_values.includes(i.value.id)===!1&&o.add_values.push(i.value.id),(!i.enabled||i.user_input.trim().length===0)&&o.add_values.includes(i.value.id)&&o.add_values.splice(o.add_values.indexOf(i.value.id),1)),Oe.includes(i.value.input_type)&&(!i.enabled&&o.add_values.includes(i.value.id)&&o.add_values.splice(o.add_values.indexOf(i.value.id),1),i.enabled&&o.add_values.includes(i.value.id)===!1&&o.add_values.push(i.value.id))},r=e.attributes;for(const s of t){const o=e.values[s];if(!o){G(`Value id: ${o} not found.`);continue}o.value.pricing.enabled&&(n(s,r.price),n(s,r.compare_at_price))}}function Na(e,t){for(const n of t){const r=e.values[n];!r.enabled&&r.before_hide&&(r.before_hide=!1)}}function Ma(e,t){t=[...new Set(t)];const n=t.filter(r=>[h.SELECT,h.SWATCHINDROPDOWN].includes(e.options[r].input_type));if(n.length)for(const r of n){const s=e.options[r].input_type,o=e.options[r].values.find(a=>e.values[a].enabled),i=e.html.querySelector(`#${r}`);i&&(s!=="swatchindropdown"&&[...i.querySelectorAll(`[${P.DESCRIPTION_TOOLTIP}]`)].map(a=>a.parentElement?.classList.add(D.HIDDEN)),o&&i.querySelector(`[${P.TOOLTIP}="${o}"]`)?.parentElement?.classList.remove(D.HIDDEN))}}function Ua(e,t){t=[...new Set(t)];const n=t.filter(r=>[h.SWATCHINDROPDOWN,h.BUTTON,h.MULTIBUTTON,h.SWATCH,h.MULTISWATCH,h.SELECT,h.SWATCHINPILL,h.MULTISWATCHINPILL,h.SWATCHCARD,h.MULTISWATCHCARD].includes(e.options[r].input_type));if(n.length)for(const r of n){const s=e.html.querySelector(`#${r} [${P.DESCRIPTION_TEXT}]`);if(!s)continue;const o=s.parentElement,i=e.options[r].values.filter(l=>e.values[l].enabled);if(!i){o?.classList.add(D.HIDDEN);continue}const a=i.map(l=>e.values[l].value.description).filter(l=>l!=="");s.innerHTML=a.join("<br />"),o?.classList.remove(D.HIDDEN)}}function qa(e,t){t=[...new Set(t)];const n=t.filter(r=>{const s=e.options[r];return(s.input_type===h.SELECT||s.input_type===h.SWATCHINDROPDOWN)&&s.values.some(o=>e.values[o].value.images.length>0)});if(n.length)for(const r of n){const s=e.options[r],o=e.html.querySelector(`#select_${s.id}`).value,i=s.values.map(a=>({[a]:e.html.querySelector(`.${D.OPTION_MEDIA}[data-value-id=${a}]`)})).reduce((a,l)=>{const c=Object.keys(l)[0];return l[c]&&(l[c].parentElement?.classList.add(D.HIDDEN),a[c]=l[c]),a},{});i[o]&&i[o].parentElement?.classList.remove(D.HIDDEN)}}function On(e,t,n,r,s){const o=(i,a,l)=>{const c=new Set(["src","srcset","href","data-srcset","data-src","data-src-retina","data-cloudzoom","data-mfp-src"]),u=(d,f,m)=>{if(!d.hasAttribute(f))return;const p=`data-mws-old-${f}`;!d.hasAttribute(p)&&d.setAttribute(p,d.getAttribute(f)||""),(m||d.getAttribute(p))&&d.setAttribute(f,typeof m=="string"?m:d.getAttribute(p)||""),!m&&d.removeAttribute(p)};if(e.htmlElements.gallery_container)for(const d of e.htmlElements.gallery_container.querySelectorAll("img")){for(const f of c)u(d,f,i);typeof a=="string"&&u(d,"alt",a),typeof l=="string"&&u(d,"title",l)}if(e.htmlElements.gallery_image){for(const d of c)u(e.htmlElements.gallery_image,d,i);typeof a=="string"&&u(e.htmlElements.gallery_image,"alt",a),typeof l=="string"&&u(e.htmlElements.gallery_image,"title",l)}};if(e.initConfig.settings.selectors.gallery_container.trim()?e.htmlElements.gallery_container=document.querySelector(e.initConfig.settings.selectors.gallery_container):e.htmlElements.gallery_container=ce("gallery_container"),e.initConfig.settings.selectors.gallery_image.trim()?e.htmlElements.gallery_image=document.querySelector(e.initConfig.settings.selectors.gallery_image):e.htmlElements.gallery_image=ce("gallery_image"),!!(e.htmlElements.gallery_image||e.htmlElements.gallery_container)){if(s==="mouseenter")for(const i in n){if(!e.loadedState.values[i])continue;const a=e.loadedState.values[i].value;for(const l of a.images){const c=l;c.replace_on_hover&&o(c.url,c.alt,c.title)}}if(s==="mouseleave"&&(Object.keys(t.replacedImage).length>0?o(t.replacedImage.url):o(!1)),s==="click"){if(t.replacedImage.value_id&&e.loadedState.values[t.replacedImage.value_id].hidden.length>0&&(o(!1),t.replacedImage={}),!r)return;for(const i in n){if(!e.loadedState.values[i])continue;const a=e.loadedState.values[i].value;for(const l of a.images){const c=l;c.replace&&(n[i]&&(t.replacedImage.value_id=a.id,t.replacedImage.url=c.url,o(c.url,c.alt,c.title)),n[i]||(o(!1),t.replacedImage={}))}}}}}function ni(e,t,n){const r=e.initConfig.settings.currency_html_format==="with_currency"?e.initConfig.shop_money_with_currency_format:e.initConfig.shop_money_format;n=[...new Set(n)];const s=n.filter(i=>[h.SWATCH,h.MULTISWATCH,h.SWATCHINPILL,h.MULTISWATCHINPILL,h.SWATCHCARD,h.MULTISWATCHCARD].includes(t.options[i].input_type)&&!t.options[i].show_titles||[h.MULTIBUTTON,h.BUTTON].includes(t.options[i].input_type)||t.options[i].collapse_option),o=n.filter(i=>[h.STEPCOUNTER,h.RANGESLIDER].includes(t.options[i].input_type));if(!(!s.length&&!o.length)){for(const i of s){const a=t.html.querySelector(t.options[i].collapse_option?`[collapse-option-id="${i}"] [${P.ACCUMULATED_TITLE}]`:`#${i} [${P.ACCUMULATED_TITLE}]`);if(!a)continue;const l=t.options[i].values.filter(c=>t.values[c].enabled);a.innerHTML=l.reduce((c,u)=>{const d=t.values[u].value,f=t.values[u].value.pricing.price_type,m=t.values[u].value.input_type;if(c&&(c+=", "),c+=d.title,([h.SWATCH,h.MULTISWATCH,h.SWATCHINPILL,h.MULTISWATCHINPILL,h.SWATCHCARD,h.MULTISWATCHCARD].includes(m)||t.options[i].collapse_option)&&d.pricing.enabled){if(d.pricing.price!==0){const p=_e(Math.abs(d.pricing.price)*(f===we.FIXED?100:t.attributes.price.base),r,e.multiCurrency);c+=`&nbsp;<span class="mw-text mw-option__price">(${d.pricing.price<0?"-":"+"}${p})</span>`}if(d.pricing.compare_at_price!==0&&d.pricing.compare_at_price!=d.pricing.price){const p=_e(Math.abs(d.pricing.compare_at_price)*(f===we.FIXED?100:t.attributes.price.base),r,e.multiCurrency);c+=`&nbsp;<s class="mw-text mw-option__compare-price">(${d.pricing.compare_at_price<0?"-":"+"}${p})</s>`}}return c},"")}for(const i of o){const a=t.html.querySelector(t.options[i].collapse_option?`[collapse-option-id="${i}"] [${P.ACCUMULATED_TITLE}]`:`#${i} [${P.ACCUMULATED_TITLE}]`);if(!a)continue;const l=t.options[i].values,c=t.values[l[0]],u=Number(c.qty_input);if(u===0)a.classList.add(D.HIDDEN);else{const d=c.value.pricing.price_type;let f=c.qty_input;if(c.value.pricing.enabled&&c.value.pricing.price!==0){const m=_e(Math.abs(c.value.pricing.price*u)*(d===we.FIXED?100:t.attributes.price.base),r,e.multiCurrency);f+=`&nbsp;<span class="mw-text mw-option__price">(${c.value.pricing.price<0?"-":"+"}${m})</span>`}if(c.value.pricing.enabled&&c.value.pricing.compare_at_price!==0&&c.value.pricing.compare_at_price!=c.value.pricing.price){const m=_e(Math.abs(c.value.pricing.compare_at_price*u)*(d===we.FIXED?100:t.attributes.price.base),r,e.multiCurrency);f+=`&nbsp;<s class="mw-text mw-option__compare-price">(${c.value.pricing.compare_at_price<0?"-":"+"}${m})</s>`}a.classList.remove(D.HIDDEN),a.innerHTML=f}}}}function ri(e){let t="select > option, variant-selects fieldset > label, variant-radios fieldset > label";e.settings.selectors.own_variants.trim()&&(t+=`, ${e.settings.selectors.own_variants}`);const n=document.querySelectorAll(t),r=["VARIANT-SELECTS","VARIANT-RADIOS","SELECT"];for(const s of n)if(document.body.contains(s)&&s.innerHTML.indexOf(q.OWN_VARIANT_TITLE)>-1){const o=r.includes(s.parentNode?.nodeName||"")?s.parentNode:s.parentNode?.parentElement;if(r.includes(o.nodeName)){const i=o.querySelectorAll("option, label");let a=0;i.forEach(l=>l.innerHTML.indexOf(q.OWN_VARIANT_TITLE)>-1&&a++),i.length-a===1&&(o.getAttribute("id")!==null&&document.querySelector(`[for=${o.getAttribute("id")}]`)?.classList.add(D.VISUALLY_HIDDEN),o.classList.add(D.VISUALLY_HIDDEN))}document.body.contains(s)&&(s.getAttribute("for")!==null&&document.querySelector(`#${s.getAttribute("for")}`)?.remove(),s.parentNode?.removeChild(s))}}function Ba(e,t){for(const n in t){if(!e.values[n])continue;const r=e.values[n],s=e.options[r.option_id];if(Yn.includes(s.input_type)&&s.qty_input){let o=`#${r.option_id} .${D.OPTION_VALUE_BLOCK}[${P.VALUE_ID}__REPLACE_ID__]`;o=s.input_type===h.SELECT||s.input_type===h.SWATCHINDROPDOWN?o.replace("__REPLACE_ID__",""):o.replace("__REPLACE_ID__",`="${r.value.id}"`);const i=document.querySelector(o);r.enabled?(i?.querySelector(`.${D.VALUE_QTY_BLOCK}`)?.classList.remove(D.VALUE_QTY_BLOCK_DISABLED),i?.querySelector(`.${D.VALUE_QTY_BLOCK} input[${P.QTY_VALUE_ID}]`)?.removeAttribute("disabled")):(i?.querySelector(`.${D.VALUE_QTY_BLOCK}`)?.classList.add(D.VALUE_QTY_BLOCK_DISABLED),i?.querySelector(`.${D.VALUE_QTY_BLOCK} input[${P.QTY_VALUE_ID}]`)?.setAttribute("disabled","disabled"))}}}async function $a(e){return(await Promise.all(e.filter(n=>n).map(async n=>{const r=await fetch(`/variants/${n.replace(Ct.PRODUCT_VARIANT,"")}.js`);return r.status!==200?{id:n}:await r.json()}))).reduce((n,r)=>(!r||!r.id||(n[`${Ct.PRODUCT_VARIANT}${r.id}`]=r),n),{})}async function Va(e){const t=e.loadedState.options,n=e.loadedState.values;for(const r of Object.keys(t))t[r].hidden=t[r].values.filter(s=>n[s].hidden.length).length===t[r].values.length}function Ga(e,t){if(e.type!=="select-one")e.setAttribute("value",t);else{e=e;const n=e.querySelectorAll("option");for(const s of n)s.removeAttribute("selected");const r=e.querySelector(`option[value="${t}"]`);if(r)r.setAttribute("selected","selected");else{const s=document.createElement("option");s.setAttribute("selected","selected"),s.setAttribute("value",t),s.classList.add(D.VISUALLY_HIDDEN),e.appendChild(s)}}}function yn(e,t){let n=[];if(t&&t.trim())n=[...document.querySelectorAll(t.trim())];else{const r=ce(e);n=r?[r]:[]}return n}async function Ha(e,t){const n=e.loadedState.values,r=new ei,s=new Set(Object.values(n).filter(o=>o.value.link_variant).map(o=>o.value.link_variant?.variant_id.replace(Ct.PRODUCT_VARIANT,"")));if(s.size){const o=await $a(Array.from(s));for(const i in n){const a=n[i].value,l=a.input_type;if(a.link_variant&&o[a.link_variant.variant_id]&&!o[a.link_variant.variant_id].available){const u=e.htmlElements.options?.querySelector(`.mw-option__value[data-value-id=${a.id}]`);if(u?.classList.add("mw-option__value--not_available"),u?.querySelectorAll("input, texarea").forEach(d=>d.setAttribute("disabled","disabled")),(a.input_type==="select"||a.input_type==="swatchindropdown")&&e.htmlElements.options?.querySelectorAll(`option.mw-option__value[value=${a.id}], .selectCustom-option[data-value=${a.id}]`)?.forEach(f=>{f.classList.add("mw-option__value--not_available"),f.setAttribute("disabled","disabled")}),u&&r.init([u],e.loadedState,{onLoad:d=>t("attachEvents::initTooltip",d)},e.initConfig.settings.translations.i18n_not_available),n[i].enabled){const d=document.createEvent("HTMLEvents"),f=[h.SELECT,h.SWATCHINDROPDOWN].includes(l),m=["radio","checkbox"].includes(l),p=[h.MULTISWATCH,h.CHECKBOX,h.MULTIBUTTON,h.MULTISWATCHINPILL,h.MULTISWATCHCARD].includes(l),_=document.querySelector(`.${f?"mw-option__value":"mw-option__control"}[value=${a.id}]`);if(_)if(f){const E=_.parentNode;E.value="",d.initEvent("change",!1,!0),E.dispatchEvent(d)}else(m||p)&&_.removeAttribute("checked"),d.initEvent(p?"change":"click",!1,!0),_.dispatchEvent(d)}}}}}function St(e,t){const n=e?.htmlElements.form,r=document.querySelector(".mw-apo-stock-validation-error");if(r&&r.remove(),n&&t){const s=document.createElement("p");s.textContent=`Available stock for current variant: ${t}`,s.classList.add("mw-apo-stock-validation-error","mw-text","mw-text--style-warning"),n.appendChild(s)}}const be="app=mws_apo";async function et(e=!1,t=""){t===""?t=`?${be}`:t+=`&${be}`;const n=e?`/cart${t}`:`/cart.js${t}`;try{return await(await fetch(n)).json()}catch(r){G("getCart",r)}}async function xa(e){let t=0;const n=1500,r=window?.Shopify?.routes?.root||"/";let s={status:200};do{t++;try{s=await fetch(`${r}products/${e}`,{method:"HEAD"})}catch{}if(s.status===200||t>n)break;await js(200)}while(!0)}async function si(e,t){const r=async s=>{s=s||1;const o=await Te.post(`/cart/add.js?${be}`,e,t);return s>1500?o:o&&o.status===422&&o.responseJSON&&o.responseJSON.description?o.responseJSON.description.indexOf("is not available")>0?(await js(200),await r(s+1)):(alert(o.responseJSON.description),o):o};try{return await r(1)}catch(s){return G("addOwnCartItems",s),s}}async function Rn(e){const t=[];for(const r of e){const s={};for(const o in r.properties)typeof r.properties[o]=="string"?s[o]=r.properties[o].toString():s[o]=r.properties[o].join(", ");t.push({id:r.variant_id,quantity:r.qty,properties:s})}if(!t.length)return{status:200};const n={};return Ce(q.CART_TOKEN_COOKIE_NAME),await si({items:t},{headers:n})}async function Sn(e,t){if(!Number.isInteger(e)){G(`removeOwnCartItems cartId "${e}" is not valid.`);return}const n={};for(const r of t){r.properties=r.properties||{};const s=r.properties[q.OWN_PROP_CART];s&&s===e.toString()&&(n[r.key]=0)}Object.keys(n).length&&await Te.post(`/cart/update.js?${be}`,{updates:n})}function ii(e,t){const n=()=>{const s=ct("cart_properties");if(s.length){for(const o of s)if(o.textContent){for(const i of jn)o.textContent.includes(i)&&(o.innerHTML=o.innerHTML.replace(/.*/,""));o.textContent.includes(q.OWN_VARIANT_TITLE)&&(o.classList.add(D.VISUALLY_HIDDEN),o.innerHTML=o.innerHTML.replace(/\#MWS\sOptions\s+\d+/,""))}}},r=()=>{if(!e.items.filter(i=>i.properties&&i.properties[q.OWN_PROP_CART]).length)return;let o=[];if(t.settings.selectors.lines.trim()?o=[...document.querySelectorAll(t.settings.selectors.lines)]:o=ct("cart_row"),!o.length){G("hideElements::Cart lines not found.");return}for(const i in e.items){const a=e.items[i];a.properties=a.properties||{};const l=a.properties[q.OWN_PROP_CART];if(!l)continue;const c=o[i];if(!c){G(`hideElements::Not found line for ${q.OWN_PROP_CART}: ${l}`);continue}let u=null;t.settings.selectors.line_remove.trim()?u=c.querySelector(t.settings.selectors.line_remove):u=ce("cart_line_remove",c),u?a.properties[q.OWN_PROP_OPTION]&&u.classList.add(D.VISUALLY_HIDDEN):G("hideElements::Not found cart line remove");let d=null;t.settings.selectors.line_quantity.trim()?d=c.querySelector(t.settings.selectors.line_quantity):d=ce("cart_line_qty",c),d?a.properties[q.OWN_PROP_OPTION]&&d.classList.add(D.VISUALLY_HIDDEN):G("hideElements::Not found cart line qty")}};n(),r()}function oi(e){!e.cart.items.filter(n=>n.properties&&n.properties[q.OWN_PROP_CART]).length&&ya(q.CART_TOKEN_COOKIE_NAME),Xn(e.cart,e)}function ka(e,t){let n=null;for(const r of e.items)if(r.properties=r.properties||{},r.properties[q.OWN_PROP_CART]===t&&!r.properties[q.OWN_PROP_OPTION]){n=r;break}return n}function Fa(e,t){return e.items.filter(n=>n.properties&&n.properties[q.OWN_PROP_CART]===t&&n.properties[q.OWN_PROP_OPTION])}function Wa(e,t){let n=!0;return t===null&&(G(`validateParent::Not found parent variant; cart_id: ${e}`),n=!1),n}function Ya(e,t,n){let r=!0;if(t!==null&&t.properties&&t.properties[q.OWN_PROP_REQUIRED]){const s=t.properties[q.OWN_PROP_REQUIRED].split(";");for(const o of s){const[i,a]=o.split(",");if(n.filter(c=>c.properties&&c.properties[q.OWN_PROP_OPTION]===i&&c.properties[q.OWN_PROP_CART]===e).length<parseInt(a)){G(`checkCartItems::Required options validation; cart_id: ${e}; option_id: ${i}`),r=!1;break}}}return r}function ja(e,t){const n=o=>{const i={};if(o===null||(o.properties=o.properties||{},!o.properties[q.OWN_PROP_PRODUCTS]))return i;const a=o.properties[q.OWN_PROP_PRODUCTS].split("; ");for(const l of a){const[c,u,d]=l.split(",");i[`${c}_${u}`]=d}return i};let r=!0;const s=n(e);if(Object.keys(s).length){const o={};for(const i of t)i.properties=i.properties||{},o[`${i.properties[q.OWN_PROP_OPTION]}_${i.variant_id}`]=i.quantity.toString();for(const i in s)(!o[i]||o[i]!==s[i])&&(r=!1);r||G(`validateChildProducts products not equals; collectedProducts: ${JSON.stringify(s)}; collectedChilds: ${JSON.stringify(o)};`)}return r}function ai(e,t=!1){const n="mws_apo_zero_pricing_attempt",s=i=>i.items.filter(a=>a.properties&&a.properties[q.OWN_PROP_CART]&&a.product_id===null).length;let o=localStorage.getItem(n);if(o=o===null?"0":o,s(e)===0){localStorage.removeItem(n),parseInt(o)>0&&t&&window.location.reload();return}if(t&&Ue(),parseInt(o)>=100){G("Fixing zero pricing is failed."),localStorage.removeItem(n),t&&window.location.reload();return}else o=(parseInt(o)+1).toString(),localStorage.setItem(n,o);s(e)>0?setTimeout(async()=>{ai(await et(!1,`?mws_apo_t=${new Date().getTime().toString()}`),t)},400):localStorage.removeItem(n)}function Xa(){const e=[...document.querySelectorAll('[href*="/products/mws_apo_"]')],t=/mws_apo_\d+_/gm;for(const n of e){let r=n.href.replace(t,"");r=r.replace("mws_apo_",""),r=r.replace(/-\d{1}$/gm,""),r=r.replace(/-\d{1}\?/gm,"?"),n.href=r}}async function za(e){const t=[],n=new Set,r=new Set;let s=e.items;const o=e.items.filter(async i=>{const a=i.properties&&i.properties[q.OWN_PROP_CART];if(!a){i.product_type==="mws_apo_generated"&&r.add(i.key);return}const l=e.items.filter(f=>f.properties&&f.properties[q.OWN_PROP_CART]===a&&!f.properties[q.OWN_PROP_OPTION]),c=e.items.filter(f=>f.properties&&f.properties[q.OWN_PROP_CART]===a&&f.properties[q.OWN_PROP_OPTION]),u=l.reduce((f,m)=>f+m.quantity,0);let d=0;for(const f of l){const m=f.properties[q.OWN_PROP_QTY],p=m.split(";")[0],_=Number(m.split(";")[1]);if(f.properties&&p!==u.toString()){f.properties[q.OWN_PROP_QTY]=u.toString(),_&&(u>=_?f.properties[q.OWN_PROP_QTY]=`${_};${_}`:f.properties[q.OWN_PROP_QTY]+=`;${_}`);const E={id:f.key,properties:f.properties};l.length>1&&_?E.quantity=d<=_?f.quantity:0:E.quantity=_&&u>=_?_:f.quantity,t.push(Te.post(`/cart/change.js?${be}`,E)),n.add(f.key)}}return l.concat(c)});return t.length&&await Promise.all(t).then(async()=>{s=(await et())?.items}),{ownCartItems:o,updatedQtyProductProps:n,updatedCart:s,updatedQtyMwsProductWithoutProps:r}}async function Xn(e,t,n=!1){n&&(t.cart=await et()),ai(e,t.template_name==="cart"),Xa();const{ownCartItems:r,updatedQtyProductProps:s,updatedQtyMwsProductWithoutProps:o,updatedCart:i}=await za(e);if(!r.length){G("checkCartItems::Own items not found in cart."),Ue(!0);return}const a=Ce(q.CART_TOKEN_COOKIE_NAME),l={},c={},u=new Set,d=new Set,f=new Set;let m=!0;for(const _ of r){_.properties=_.properties||{};for(const E of jn)if(_.properties[E]){u.add(_.variant_id);break}if(u.has(_.variant_id)){if(Object.keys(t.lock_cart_ids).includes(_.properties[q.OWN_PROP_CART]))continue;if(a===void 0||!_.properties[q.OWN_PROP_CART]||!_.properties[q.OWN_PROP_QTY]){l[_.key]=0;continue}const E=_.properties[q.OWN_PROP_CART];if(d.has(E))continue;d.add(E);const g=ka(e,E),I=Fa(e,E),T=Wa(E,g),O=Ya(E,g,I),v=ja(g,I);let L=[O,v].every(B=>B===!0);if(T||(n?L=!1:(m=!1,setTimeout(async()=>{await Xn(e,t,!0)},2e3))),!L){f.add(E),g!==null&&(l[g.key]=0);for(const B of I)l[B.key]=0}const M=r.filter(B=>B.properties[q.OWN_PROP_CART]===_.properties[q.OWN_PROP_CART]&&!B.properties[q.OWN_PROP_OPTION]),y=r.filter(B=>B.properties[q.OWN_PROP_CART]===_.properties[q.OWN_PROP_CART]&&B.properties[q.OWN_PROP_OPTION]),A=M.reduce((B,b)=>B+b.quantity,0),U=_.properties[q.OWN_PROP_QTY],w=U.split(";")[0],N=Number(U.split(";")[1]);L&&!_.properties[q.OWN_PROP_OPTION]&&(Number(w)!==A||A>N||s.has(M[0].key)&&y.length)&&(c[E]=N&&A>N?N:A)}}for(const _ of o)l[_]=0;if(u.size&&ii(e,t),!Object.keys(l).length&&!Object.keys(c).length){m&&Ue(!0);return}if(Object.keys(c).length&&a)for(const _ in c){const E=ve.cartQtyOptionsUri.replace(":shopDomain",t.shop_domain).replace(":cartId",_).replace(":qty",c[_].toString());t.lock_cart_ids[_.toString()]="";const I=(await Promise.all([Sn(parseInt(_),i||e.items),Te.put(E,{},{headers:{"cart-token":a}})]))[1].data;if(I.children){const T=I.children;I.children=[],T.push({...I}),await Rn(T)}delete t.lock_cart_ids[_.toString()]}const p=[];if(a!==void 0)for(const _ of f){const E=ve.cartOptionsUri.replace(":shopDomain",t.shop_domain).replace(":cartId",_);p.push(Te.delete(E,{headers:{"cart-token":a}}))}p.push(Te.post(`/cart/update.js?${be}`,{updates:l})),await Promise.all(p).then(()=>{t.template_name==="cart"&&window.location.reload()}),Ue(!0)}function Ka(e){let t=0;const n=()=>{t&&clearTimeout(t),t=window.setTimeout(async()=>{const s=await et();let o;try{o=typeof s=="string"?JSON.parse(s):s}catch{G(`listenCartAjaxRequest:: Not valid response: ${s}`);return}typeof o?.item_count>"u"||Xn(o,e)},500)},r=XMLHttpRequest.prototype.open;if(XMLHttpRequest.prototype.open=function(){const[s,o]=arguments;s==="POST"&&!o.toString().includes(be)&&["/cart/change","/cart/update","/cart/add"].some(i=>o.toString().indexOf(i)>=0)&&(o.toString().indexOf("/cart/change")>=0&&e.template_name==="cart"&&Ue(),this.addEventListener("load",()=>{n()})),r.apply(this,arguments)},typeof window.fetch=="function"){const s=window.fetch;window.fetch=function(...o){const[i,a]=o,l=s.apply(window,o);return a?.method==="POST"&&!i.toString().includes(be)&&["/cart/change","/cart/update","/cart/add"].some(c=>i.toString().indexOf(c)>=0)&&(i.toString().indexOf("/cart/change")>=0&&e.template_name==="cart"&&Ue(),l.then(c=>{c.status===200?n():Ue(!0)})),l}}}function kr(e){e={...e};for(const t in e){!["items","item_count"].includes(t)&&delete e[t];for(const n of e.items){for(const r in n)!["properties"].includes(r)&&delete n[r];n.properties=n.properties||{}}}return e}function De(e,t){document.dispatchEvent(new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:t}))}class Qa{async init(t,n,r={dateFormat:"m/d/Y",disableMobile:!1,onCallback:()=>({}),onLoad:()=>{}}){if(!t.length)return;const s=(await Ze(()=>import("./flatpickr-d4d81a32.js"),["./flatpickr-d4d81a32.js","./flatpickr-73d8a560.css"],import.meta.url)).default;let o={dateFormat:r.dateFormat,disableMobile:r.disableMobile,onReady:function(a,l,c){if(!c.calendarContainer)return;const u=document.createElement("div"),d=c.calendarContainer;u.classList.add("mw-flatpickr"),Ye(u,d)}};const i=function(a){const l=new Date;return new Date(l.getFullYear(),l.getMonth(),l.getDate()+a,0,0,0,0)};o=r.onCallback("attachEvents::initCalendar::flatpickrConfigBase",o);for(const a of t){const l=n.html.querySelector(`#${a.id} .mw-option__value input.mw-option__control`);if(!l){G(`Date input not found for option id: ${a.id}`);continue}const c=n.values[a.values[0]],u=c.value;let d=Object.assign({},o);c.user_input.trim()&&(d.defaultDate=c.user_input),u.date_range.enabled&&u.date_range.type===In.ABSOLUTE&&(u.date_range.start&&u.date_range.start.trim()&&(d.minDate=new Date(Date.parse(u.date_range.start))),u.date_range.end&&u.date_range.end.trim()&&(d.maxDate=new Date(Date.parse(u.date_range.end)))),u.date_range.enabled&&u.date_range.type===In.RELATIVE&&(typeof u.date_range.min<"u"&&!Number.isNaN(parseInt(u.date_range.min.toString()))&&(d.minDate=i(u.date_range.min)),typeof u.date_range.max<"u"&&!Number.isNaN(parseInt(u.date_range.max.toString()))&&(d.maxDate=i(u.date_range.max))),d=r.onCallback(`attachEvents::initCalendar::flatpickrConfig::${n.variant_id}`,d);const f=s(l,d);r.onLoad(f)}}}class Ja{async init(t){if(!t.length)return;const n=(await Ze(()=>import("./simplelightbox-8949c7d8.js"),["./simplelightbox-8949c7d8.js","./simplelightbox-a150481f.css"],import.meta.url)).default;for(const r of t)r.addEventListener("click",s=>{new n(s.target,{sourceAttr:P.LIGHTBOX,nav:!1}).open()})}}class Za{async createModal(t,{loading:n,cancelAction:r,submitAction:s,onEvent:o}){const i=(await Ze(()=>import("./tingle-f8455e40.js"),["./tingle-f8455e40.js","./tingle-404fa50c.css"],import.meta.url)).default,a=document.createElement("div"),l=new i.modal({footer:!0,stickyFooter:!0,closeMethods:["overlay","button","escape"],closeLabel:"Close",onClose:()=>{const d=document.querySelector(".mw-tingle");d&&d.remove()},beforeClose:()=>!0});a.classList.add("mw-tingle"),Ye(a,l.modal),l.addFooterBtn(r.label,"btn button btn--secondary secondary btn--secondary-accent",()=>l.destroy()),l.addFooterBtn(s.label,"btn button btn--primary primary btn--primary-accent",d=>{const f=d.currentTarget;n||(n=!0,o("init::insertIntoModal::submitStart",t),f.classList.add(D.IN_PROGRESS),s.onAction().then(m=>{if(f.classList.remove(D.IN_PROGRESS),m?.status!==200){G(m.message);return}l.destroy(),o("init::insertIntoModal::clickEnd",t),t.initConfig.template_name==="cart"&&window.location.reload()}).catch(m=>{G("init::insertIntoModal::clickError",m)}).finally(()=>{n=!1,f.classList.remove(D.IN_PROGRESS)}))});const u=`mw_apo_${new Date().getTime().toString()}`;return t.loadedState.html.setAttribute("id",u),l.setContent(t.loadedState.html),l}async init(t,n){(await this.createModal(t,n)).open()}}class el{async init(t,n){if(!t.length)return;const r=(await Ze(()=>import("./swiper-4172b666.js"),["./swiper-4172b666.js","./swiper-aff8d9e0.css"],import.meta.url)).default,s=document.querySelector(".mw-apo-container");if(!s)return;const o=Fr(s);for(const i of t){const a=i.querySelector(".mw-option__container"),l=i.getAttribute("data-option-id");if(a&&l){let c=0,u=0;const d=n[l],f=[h.SWATCH,h.MULTISWATCH].includes(d.input_type),m=[h.SWATCHINPILL,h.MULTISWATCHINPILL].includes(d.input_type)||f&&d.swatches_position==="vertical",p=document.createElement("div");p.classList.add("mw-swiper",`mw-swiper-${d.input_type}`),p.setAttribute("id",l),p.innerHTML=`
        <div class="swiper-prev-button swiper-button">
        <svg width="7" height="12" viewBox="0 0 7 12" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path fill-rule="evenodd" clip-rule="evenodd" d="M5.97858 0.966734C6.30402 1.29217 6.30402 1.81981 5.97858 2.14525L2.12339 6.00043L5.97858 9.85562C6.30402 10.1811 6.30402 10.7087 5.97858 11.0341C5.65314 11.3596 5.1255 11.3596 4.80007 11.0341L0.355622 6.58969C0.0301852 6.26425 0.0301852 5.73662 0.355622 5.41118L4.80007 0.966734C5.1255 0.641297 5.65314 0.641297 5.97858 0.966734Z" fill="#303030"/>
        </svg>
        </div>
        <div class="swiper-next-button swiper-button">
        <svg width="7" height="12" viewBox="0 0 7 12" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path fill-rule="evenodd" clip-rule="evenodd" d="M0.466734 11.0338C0.141297 10.7083 0.141297 10.1807 0.466734 9.85524L4.32192 6.00005L0.466734 2.14487C0.141297 1.81943 0.141297 1.29179 0.466734 0.966355C0.792171 0.640917 1.31981 0.640917 1.64525 0.966355L6.08969 5.4108C6.41513 5.73624 6.41513 6.26387 6.08969 6.58931L1.64525 11.0338C1.31981 11.3592 0.792171 11.3592 0.466734 11.0338Z" fill="#303030"/>
        </div><div class="swiper">
        <div class="swiper-wrapper">
        </div>
      </div>`;const _=p.querySelector(".swiper-wrapper");a.querySelectorAll(".mw-option__value").forEach(v=>{const L=v.getAttribute("data-value-id"),M=document.createElement("div");if(c===0){const y=Fr(v);c+=y?Number(y):v.clientWidth}!v.classList.contains("mw-hidden")&&M.classList.add("swiper-slide"),v.classList.contains("mw-hidden")&&M.classList.add("slide-hidden"),L&&M.setAttribute("value-id",L),M?.append(v),_?.append(M)}),o&&c&&(u=Math.floor(o/(c+10))),a.appendChild(p);const g=`[data-option-id="${l}"] .swiper`,I=new r(g,{pagination:!1,slidesPerView:m?1:u&&u>0?u:2,slidesPerGroup:m?1:u&&u>0?u:2,slideToClickedSlide:!0,rewind:!0,autoHeight:!0}),T=document.querySelector(`[data-option-id="${l}"] .mw-swiper  .swiper-next-button`);T&&T.addEventListener("click",()=>{I.slideNext()});const O=document.querySelector(`[data-option-id="${l}"] .mw-swiper .swiper-prev-button`);O&&O.addEventListener("click",()=>{I.slidePrev()})}}}}function Fr(e){let n=window.getComputedStyle(e).width.replace("px","");return n?Number(n):e.clientWidth}/*!
 * FilePond 4.30.6
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit https://pqina.nl/filepond/ for details.
 */const tl=e=>e instanceof HTMLElement,nl=(e,t=[],n=[])=>{const r={...e},s=[],o=[],i=()=>({...r}),a=()=>{const p=[...s];return s.length=0,p},l=()=>{const p=[...o];o.length=0,p.forEach(({type:_,data:E})=>{c(_,E)})},c=(p,_,E)=>{if(E&&!document.hidden){o.push({type:p,data:_});return}m[p]&&m[p](_),s.push({type:p,data:_})},u=(p,..._)=>f[p]?f[p](..._):null,d={getState:i,processActionQueue:a,processDispatchQueue:l,dispatch:c,query:u};let f={};t.forEach(p=>{f={...p(r),...f}});let m={};return n.forEach(p=>{m={...p(c,u,r),...m}}),d},rl=(e,t,n)=>{if(typeof n=="function"){e[t]=n;return}Object.defineProperty(e,t,{...n})},Y=(e,t)=>{for(const n in e)e.hasOwnProperty(n)&&t(n,e[n])},Le=e=>{const t={};return Y(e,n=>{rl(t,n,e[n])}),t},z=(e,t,n=null)=>{if(n===null)return e.getAttribute(t)||e.hasAttribute(t);e.setAttribute(t,n)},sl="http://www.w3.org/2000/svg",il=["svg","path"],Wr=e=>il.includes(e),wt=(e,t,n={})=>{typeof t=="object"&&(n=t,t=null);const r=Wr(e)?document.createElementNS(sl,e):document.createElement(e);return t&&(Wr(e)?z(r,"class",t):r.className=t),Y(n,(s,o)=>{z(r,s,o)}),r},ol=e=>(t,n)=>{typeof n<"u"&&e.children[n]?e.insertBefore(t,e.children[n]):e.appendChild(t)},al=(e,t)=>(n,r)=>(typeof r<"u"?t.splice(r,0,n):t.push(n),n),ll=(e,t)=>n=>(t.splice(t.indexOf(n),1),n.element.parentNode&&e.removeChild(n.element),n),cl=(()=>typeof window<"u"&&typeof window.document<"u")(),li=()=>cl,ul=li()?wt("svg"):{},dl="children"in ul?e=>e.children.length:e=>e.childNodes.length,ci=(e,t,n,r)=>{const s=n[0]||e.left,o=n[1]||e.top,i=s+e.width,a=o+e.height*(r[1]||1),l={element:{...e},inner:{left:e.left,top:e.top,right:e.right,bottom:e.bottom},outer:{left:s,top:o,right:i,bottom:a}};return t.filter(c=>!c.isRectIgnored()).map(c=>c.rect).forEach(c=>{Yr(l.inner,{...c.inner}),Yr(l.outer,{...c.outer})}),jr(l.inner),l.outer.bottom+=l.element.marginBottom,l.outer.right+=l.element.marginRight,jr(l.outer),l},Yr=(e,t)=>{t.top+=e.top,t.right+=e.left,t.bottom+=e.top,t.left+=e.left,t.bottom>e.bottom&&(e.bottom=t.bottom),t.right>e.right&&(e.right=t.right)},jr=e=>{e.width=e.right-e.left,e.height=e.bottom-e.top},Pe=e=>typeof e=="number",pl=(e,t,n,r=.001)=>Math.abs(e-t)<r&&Math.abs(n)<r,fl=({stiffness:e=.5,damping:t=.75,mass:n=10}={})=>{let r=null,s=null,o=0,i=!1;const c=Le({interpolate:(u,d)=>{if(i)return;if(!(Pe(r)&&Pe(s))){i=!0,o=0;return}const f=-(s-r)*e;o+=f/n,s+=o,o*=t,pl(s,r,o)||d?(s=r,o=0,i=!0,c.onupdate(s),c.oncomplete(s)):c.onupdate(s)},target:{set:u=>{if(Pe(u)&&!Pe(s)&&(s=u),r===null&&(r=u,s=u),r=u,s===r||typeof r>"u"){i=!0,o=0,c.onupdate(s),c.oncomplete(s);return}i=!1},get:()=>r},resting:{get:()=>i},onupdate:u=>{},oncomplete:u=>{}});return c},ml=e=>e<.5?2*e*e:-1+(4-2*e)*e,_l=({duration:e=500,easing:t=ml,delay:n=0}={})=>{let r=null,s,o,i=!0,a=!1,l=null;const u=Le({interpolate:(d,f)=>{i||l===null||(r===null&&(r=d),!(d-r<n)&&(s=d-r-n,s>=e||f?(s=1,o=a?0:1,u.onupdate(o*l),u.oncomplete(o*l),i=!0):(o=s/e,u.onupdate((s>=0?t(a?1-o:o):0)*l))))},target:{get:()=>a?0:l,set:d=>{if(l===null){l=d,u.onupdate(d),u.oncomplete(d);return}d<l?(l=1,a=!0):(a=!1,l=d),i=!1,r=null}},resting:{get:()=>i},onupdate:d=>{},oncomplete:d=>{}});return u},Xr={spring:fl,tween:_l},El=(e,t,n)=>{const r=e[t]&&typeof e[t][n]=="object"?e[t][n]:e[t]||e,s=typeof r=="string"?r:r.type,o=typeof r=="object"?{...r}:{};return Xr[s]?Xr[s](o):null},zn=(e,t,n,r=!1)=>{t=Array.isArray(t)?t:[t],t.forEach(s=>{e.forEach(o=>{let i=o,a=()=>n[o],l=c=>n[o]=c;typeof o=="object"&&(i=o.key,a=o.getter||a,l=o.setter||l),!(s[i]&&!r)&&(s[i]={get:a,set:l})})})},hl=({mixinConfig:e,viewProps:t,viewInternalAPI:n,viewExternalAPI:r})=>{const s={...t},o=[];return Y(e,(i,a)=>{const l=El(a);if(!l)return;l.onupdate=u=>{t[i]=u},l.target=s[i],zn([{key:i,setter:u=>{l.target!==u&&(l.target=u)},getter:()=>t[i]}],[n,r],t,!0),o.push(l)}),{write:i=>{let a=document.hidden,l=!0;return o.forEach(c=>{c.resting||(l=!1),c.interpolate(i,a)}),l},destroy:()=>{}}},Tl=e=>(t,n)=>{e.addEventListener(t,n)},gl=e=>(t,n)=>{e.removeEventListener(t,n)},Il=({mixinConfig:e,viewProps:t,viewInternalAPI:n,viewExternalAPI:r,viewState:s,view:o})=>{const i=[],a=Tl(o.element),l=gl(o.element);return r.on=(c,u)=>{i.push({type:c,fn:u}),a(c,u)},r.off=(c,u)=>{i.splice(i.findIndex(d=>d.type===c&&d.fn===u),1),l(c,u)},{write:()=>!0,destroy:()=>{i.forEach(c=>{l(c.type,c.fn)})}}},vl=({mixinConfig:e,viewProps:t,viewExternalAPI:n})=>{zn(e,n,t)},ne=e=>e!=null,Ol={opacity:1,scaleX:1,scaleY:1,translateX:0,translateY:0,rotateX:0,rotateY:0,rotateZ:0,originX:0,originY:0},yl=({mixinConfig:e,viewProps:t,viewInternalAPI:n,viewExternalAPI:r,view:s})=>{const o={...t},i={};zn(e,[n,r],t);const a=()=>[t.translateX||0,t.translateY||0],l=()=>[t.scaleX||0,t.scaleY||0],c=()=>s.rect?ci(s.rect,s.childViews,a(),l()):null;return n.rect={get:c},r.rect={get:c},e.forEach(u=>{t[u]=typeof o[u]>"u"?Ol[u]:o[u]}),{write:()=>{if(Rl(i,t))return Sl(s.element,t),Object.assign(i,{...t}),!0},destroy:()=>{}}},Rl=(e,t)=>{if(Object.keys(e).length!==Object.keys(t).length)return!0;for(const n in t)if(t[n]!==e[n])return!0;return!1},Sl=(e,{opacity:t,perspective:n,translateX:r,translateY:s,scaleX:o,scaleY:i,rotateX:a,rotateY:l,rotateZ:c,originX:u,originY:d,width:f,height:m})=>{let p="",_="";(ne(u)||ne(d))&&(_+=`transform-origin: ${u||0}px ${d||0}px;`),ne(n)&&(p+=`perspective(${n}px) `),(ne(r)||ne(s))&&(p+=`translate3d(${r||0}px, ${s||0}px, 0) `),(ne(o)||ne(i))&&(p+=`scale3d(${ne(o)?o:1}, ${ne(i)?i:1}, 1) `),ne(c)&&(p+=`rotateZ(${c}rad) `),ne(a)&&(p+=`rotateX(${a}rad) `),ne(l)&&(p+=`rotateY(${l}rad) `),p.length&&(_+=`transform:${p};`),ne(t)&&(_+=`opacity:${t};`,t===0&&(_+="visibility:hidden;"),t<1&&(_+="pointer-events:none;")),ne(m)&&(_+=`height:${m}px;`),ne(f)&&(_+=`width:${f}px;`);const E=e.elementCurrentStyle||"";(_.length!==E.length||_!==E)&&(e.style.cssText=_,e.elementCurrentStyle=_)},Al={styles:yl,listeners:Il,animations:hl,apis:vl},zr=(e={},t={},n={})=>(t.layoutCalculated||(e.paddingTop=parseInt(n.paddingTop,10)||0,e.marginTop=parseInt(n.marginTop,10)||0,e.marginRight=parseInt(n.marginRight,10)||0,e.marginBottom=parseInt(n.marginBottom,10)||0,e.marginLeft=parseInt(n.marginLeft,10)||0,t.layoutCalculated=!0),e.left=t.offsetLeft||0,e.top=t.offsetTop||0,e.width=t.offsetWidth||0,e.height=t.offsetHeight||0,e.right=e.left+e.width,e.bottom=e.top+e.height,e.scrollTop=t.scrollTop,e.hidden=t.offsetParent===null,e),K=({tag:e="div",name:t=null,attributes:n={},read:r=()=>{},write:s=()=>{},create:o=()=>{},destroy:i=()=>{},filterFrameActionsForChild:a=(m,p)=>p,didCreateView:l=()=>{},didWriteView:c=()=>{},ignoreRect:u=!1,ignoreRectUpdate:d=!1,mixins:f=[]}={})=>(m,p={})=>{const _=wt(e,`filepond--${t}`,n),E=window.getComputedStyle(_,null),g=zr();let I=null,T=!1;const O=[],v=[],L={},M={},y=[s],A=[r],U=[i],w=()=>_,N=()=>O.concat(),B=()=>L,b=F=>(ee,Ie)=>ee(F,Ie),H=()=>I||(I=ci(g,O,[0,0],[1,1]),I),R=()=>E,C=()=>{I=null,O.forEach(Ie=>Ie._read()),!(d&&g.width&&g.height)&&zr(g,_,E);const ee={root:Se,props:p,rect:g};A.forEach(Ie=>Ie(ee))},V=(F,ee,Ie)=>{let xe=ee.length===0;return y.forEach(ie=>{ie({props:p,root:Se,actions:ee,timestamp:F,shouldOptimize:Ie})===!1&&(xe=!1)}),v.forEach(ie=>{ie.write(F)===!1&&(xe=!1)}),O.filter(ie=>!!ie.element.parentNode).forEach(ie=>{ie._write(F,a(ie,ee),Ie)||(xe=!1)}),O.forEach((ie,ft)=>{ie.element.parentNode||(Se.appendChild(ie.element,ft),ie._read(),ie._write(F,a(ie,ee),Ie),xe=!1)}),T=xe,c({props:p,root:Se,actions:ee,timestamp:F}),xe},$=()=>{v.forEach(F=>F.destroy()),U.forEach(F=>{F({root:Se,props:p})}),O.forEach(F=>F._destroy())},k={element:{get:w},style:{get:R},childViews:{get:N}},W={...k,rect:{get:H},ref:{get:B},is:F=>t===F,appendChild:ol(_),createChildView:b(m),linkView:F=>(O.push(F),F),unlinkView:F=>{O.splice(O.indexOf(F),1)},appendChildView:al(_,O),removeChildView:ll(_,O),registerWriter:F=>y.push(F),registerReader:F=>A.push(F),registerDestroyer:F=>U.push(F),invalidateLayout:()=>_.layoutCalculated=!1,dispatch:m.dispatch,query:m.query},Yt={element:{get:w},childViews:{get:N},rect:{get:H},resting:{get:()=>T},isRectIgnored:()=>u,_read:C,_write:V,_destroy:$},ro={...k,rect:{get:()=>g}};Object.keys(f).sort((F,ee)=>F==="styles"?1:ee==="styles"?-1:0).forEach(F=>{const ee=Al[F]({mixinConfig:f[F],viewProps:p,viewState:M,viewInternalAPI:W,viewExternalAPI:Yt,view:Le(ro)});ee&&v.push(ee)});const Se=Le(W);o({root:Se,props:p});const so=dl(_);return O.forEach((F,ee)=>{Se.appendChild(F.element,so+ee)}),l(Se),Le(Yt)},Dl=(e,t,n=60)=>{const r="__framePainter";if(window[r]){window[r].readers.push(e),window[r].writers.push(t);return}window[r]={readers:[e],writers:[t]};const s=window[r],o=1e3/n;let i=null,a=null,l=null,c=null;const u=()=>{document.hidden?(l=()=>window.setTimeout(()=>d(performance.now()),o),c=()=>window.clearTimeout(a)):(l=()=>window.requestAnimationFrame(d),c=()=>window.cancelAnimationFrame(a))};document.addEventListener("visibilitychange",()=>{c&&c(),u(),d(performance.now())});const d=f=>{a=l(d),i||(i=f);const m=f-i;m<=o||(i=f-m%o,s.readers.forEach(p=>p()),s.writers.forEach(p=>p(f)))};return u(),d(performance.now()),{pause:()=>{c(a)}}},se=(e,t)=>({root:n,props:r,actions:s=[],timestamp:o,shouldOptimize:i})=>{s.filter(a=>e[a.type]).forEach(a=>e[a.type]({root:n,props:r,action:a.data,timestamp:o,shouldOptimize:i})),t&&t({root:n,props:r,actions:s,timestamp:o,shouldOptimize:i})},Kr=(e,t)=>t.parentNode.insertBefore(e,t),Qr=(e,t)=>t.parentNode.insertBefore(e,t.nextSibling),Vt=e=>Array.isArray(e),ye=e=>e==null,Ll=e=>e.trim(),Gt=e=>""+e,bl=(e,t=",")=>ye(e)?[]:Vt(e)?e:Gt(e).split(t).map(Ll).filter(n=>n.length),ui=e=>typeof e=="boolean",di=e=>ui(e)?e:e==="true",re=e=>typeof e=="string",pi=e=>Pe(e)?e:re(e)?Gt(e).replace(/[a-z]+/gi,""):0,At=e=>parseInt(pi(e),10),Jr=e=>parseFloat(pi(e)),tt=e=>Pe(e)&&isFinite(e)&&Math.floor(e)===e,Zr=(e,t=1e3)=>{if(tt(e))return e;let n=Gt(e).trim();return/MB$/i.test(n)?(n=n.replace(/MB$i/,"").trim(),At(n)*t*t):/KB/i.test(n)?(n=n.replace(/KB$i/,"").trim(),At(n)*t):At(n)},Ne=e=>typeof e=="function",Cl=e=>{let t=self,n=e.split("."),r=null;for(;r=n.shift();)if(t=t[r],!t)return null;return t},es={process:"POST",patch:"PATCH",revert:"DELETE",fetch:"GET",restore:"GET",load:"GET"},wl=e=>{const t={};return t.url=re(e)?e:e.url||"",t.timeout=e.timeout?parseInt(e.timeout,10):0,t.headers=e.headers?e.headers:{},Y(es,n=>{t[n]=Pl(n,e[n],es[n],t.timeout,t.headers)}),t.process=e.process||re(e)||e.url?t.process:null,t.remove=e.remove||null,delete t.headers,t},Pl=(e,t,n,r,s)=>{if(t===null)return null;if(typeof t=="function")return t;const o={url:n==="GET"||n==="PATCH"?`?${e}=`:"",method:n,headers:s,withCredentials:!1,timeout:r,onload:null,ondata:null,onerror:null};if(re(t))return o.url=t,o;if(Object.assign(o,t),re(o.headers)){const i=o.headers.split(/:(.+)/);o.headers={header:i[0],value:i[1]}}return o.withCredentials=di(o.withCredentials),o},Nl=e=>wl(e),Ml=e=>e===null,J=e=>typeof e=="object"&&e!==null,Ul=e=>J(e)&&re(e.url)&&J(e.process)&&J(e.revert)&&J(e.restore)&&J(e.fetch),An=e=>Vt(e)?"array":Ml(e)?"null":tt(e)?"int":/^[0-9]+ ?(?:GB|MB|KB)$/gi.test(e)?"bytes":Ul(e)?"api":typeof e,ql=e=>e.replace(/{\s*'/g,'{"').replace(/'\s*}/g,'"}').replace(/'\s*:/g,'":').replace(/:\s*'/g,':"').replace(/,\s*'/g,',"').replace(/'\s*,/g,'",'),Bl={array:bl,boolean:di,int:e=>An(e)==="bytes"?Zr(e):At(e),number:Jr,float:Jr,bytes:Zr,string:e=>Ne(e)?e:Gt(e),function:e=>Cl(e),serverapi:Nl,object:e=>{try{return JSON.parse(ql(e))}catch{return null}}},$l=(e,t)=>Bl[t](e),fi=(e,t,n)=>{if(e===t)return e;let r=An(e);if(r!==n){const s=$l(e,n);if(r=An(s),s===null)throw`Trying to assign value with incorrect type to "${option}", allowed type: "${n}"`;e=s}return e},Vl=(e,t)=>{let n=e;return{enumerable:!0,get:()=>n,set:r=>{n=fi(r,e,t)}}},Gl=e=>{const t={};return Y(e,n=>{const r=e[n];t[n]=Vl(r[0],r[1])}),Le(t)},Hl=e=>({items:[],listUpdateTimeout:null,itemUpdateTimeout:null,processingQueue:[],options:Gl(e)}),Ht=(e,t="-")=>e.split(/(?=[A-Z])/).map(n=>n.toLowerCase()).join(t),xl=(e,t)=>{const n={};return Y(t,r=>{n[r]={get:()=>e.getState().options[r],set:s=>{e.dispatch(`SET_${Ht(r,"_").toUpperCase()}`,{value:s})}}}),n},kl=e=>(t,n,r)=>{const s={};return Y(e,o=>{const i=Ht(o,"_").toUpperCase();s[`SET_${i}`]=a=>{try{r.options[o]=a.value}catch{}t(`DID_SET_${i}`,{value:r.options[o]})}}),s},Fl=e=>t=>{const n={};return Y(e,r=>{n[`GET_${Ht(r,"_").toUpperCase()}`]=s=>t.options[r]}),n},fe={API:1,DROP:2,BROWSE:3,PASTE:4,NONE:5},Kn=()=>Math.random().toString(36).substring(2,11),Qn=(e,t)=>e.splice(t,1),Wl=(e,t)=>{t?e():document.hidden?Promise.resolve(1).then(e):setTimeout(e,0)},xt=()=>{const e=[],t=(r,s)=>{Qn(e,e.findIndex(o=>o.event===r&&(o.cb===s||!s)))},n=(r,s,o)=>{e.filter(i=>i.event===r).map(i=>i.cb).forEach(i=>Wl(()=>i(...s),o))};return{fireSync:(r,...s)=>{n(r,s,!0)},fire:(r,...s)=>{n(r,s,!1)},on:(r,s)=>{e.push({event:r,cb:s})},onOnce:(r,s)=>{e.push({event:r,cb:(...o)=>{t(r,s),s(...o)}})},off:t}},mi=(e,t,n)=>{Object.getOwnPropertyNames(e).filter(r=>!n.includes(r)).forEach(r=>Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r)))},Yl=["fire","process","revert","load","on","off","onOnce","retryLoad","extend","archive","archived","release","released","requestProcessing","freeze"],ae=e=>{const t={};return mi(e,t,Yl),t},jl=e=>{e.forEach((t,n)=>{t.released&&Qn(e,n)})},x={INIT:1,IDLE:2,PROCESSING_QUEUED:9,PROCESSING:3,PROCESSING_COMPLETE:5,PROCESSING_ERROR:6,PROCESSING_REVERT_ERROR:10,LOADING:7,LOAD_ERROR:8},Q={INPUT:1,LIMBO:2,LOCAL:3},_i=e=>/[^0-9]+/.exec(e),Ei=()=>_i(1.1.toLocaleString())[0],Xl=()=>{const e=Ei(),t=1e3.toLocaleString(),n=1e3.toString();return t!==n?_i(t)[0]:e==="."?",":"."},S={BOOLEAN:"boolean",INT:"int",NUMBER:"number",STRING:"string",ARRAY:"array",OBJECT:"object",FUNCTION:"function",ACTION:"action",SERVER_API:"serverapi",REGEX:"regex"},Jn=[],me=(e,t,n)=>new Promise((r,s)=>{const o=Jn.filter(a=>a.key===e).map(a=>a.cb);if(o.length===0){r(t);return}const i=o.shift();o.reduce((a,l)=>a.then(c=>l(c,n)),i(t,n)).then(a=>r(a)).catch(a=>s(a))}),Ge=(e,t,n)=>Jn.filter(r=>r.key===e).map(r=>r.cb(t,n)),zl=(e,t)=>Jn.push({key:e,cb:t}),Kl=e=>Object.assign(je,e),Pt=()=>({...je}),Ql=e=>{Y(e,(t,n)=>{je[t]&&(je[t][0]=fi(n,je[t][0],je[t][1]))})},je={id:[null,S.STRING],name:["filepond",S.STRING],disabled:[!1,S.BOOLEAN],className:[null,S.STRING],required:[!1,S.BOOLEAN],captureMethod:[null,S.STRING],allowSyncAcceptAttribute:[!0,S.BOOLEAN],allowDrop:[!0,S.BOOLEAN],allowBrowse:[!0,S.BOOLEAN],allowPaste:[!0,S.BOOLEAN],allowMultiple:[!1,S.BOOLEAN],allowReplace:[!0,S.BOOLEAN],allowRevert:[!0,S.BOOLEAN],allowRemove:[!0,S.BOOLEAN],allowProcess:[!0,S.BOOLEAN],allowReorder:[!1,S.BOOLEAN],allowDirectoriesOnly:[!1,S.BOOLEAN],storeAsFile:[!1,S.BOOLEAN],forceRevert:[!1,S.BOOLEAN],maxFiles:[null,S.INT],checkValidity:[!1,S.BOOLEAN],itemInsertLocationFreedom:[!0,S.BOOLEAN],itemInsertLocation:["before",S.STRING],itemInsertInterval:[75,S.INT],dropOnPage:[!1,S.BOOLEAN],dropOnElement:[!0,S.BOOLEAN],dropValidation:[!1,S.BOOLEAN],ignoredFiles:[[".ds_store","thumbs.db","desktop.ini"],S.ARRAY],instantUpload:[!0,S.BOOLEAN],maxParallelUploads:[2,S.INT],allowMinimumUploadDuration:[!0,S.BOOLEAN],chunkUploads:[!1,S.BOOLEAN],chunkForce:[!1,S.BOOLEAN],chunkSize:[5e6,S.INT],chunkRetryDelays:[[500,1e3,3e3],S.ARRAY],server:[null,S.SERVER_API],fileSizeBase:[1e3,S.INT],labelFileSizeBytes:["bytes",S.STRING],labelFileSizeKilobytes:["KB",S.STRING],labelFileSizeMegabytes:["MB",S.STRING],labelFileSizeGigabytes:["GB",S.STRING],labelDecimalSeparator:[Ei(),S.STRING],labelThousandsSeparator:[Xl(),S.STRING],labelIdle:['Drag & Drop your files or <span class="filepond--label-action">Browse</span>',S.STRING],labelInvalidField:["Field contains invalid files",S.STRING],labelFileWaitingForSize:["Waiting for size",S.STRING],labelFileSizeNotAvailable:["Size not available",S.STRING],labelFileCountSingular:["file in list",S.STRING],labelFileCountPlural:["files in list",S.STRING],labelFileLoading:["Loading",S.STRING],labelFileAdded:["Added",S.STRING],labelFileLoadError:["Error during load",S.STRING],labelFileRemoved:["Removed",S.STRING],labelFileRemoveError:["Error during remove",S.STRING],labelFileProcessing:["Uploading",S.STRING],labelFileProcessingComplete:["Upload complete",S.STRING],labelFileProcessingAborted:["Upload cancelled",S.STRING],labelFileProcessingError:["Error during upload",S.STRING],labelFileProcessingRevertError:["Error during revert",S.STRING],labelTapToCancel:["tap to cancel",S.STRING],labelTapToRetry:["tap to retry",S.STRING],labelTapToUndo:["tap to undo",S.STRING],labelButtonRemoveItem:["Remove",S.STRING],labelButtonAbortItemLoad:["Abort",S.STRING],labelButtonRetryItemLoad:["Retry",S.STRING],labelButtonAbortItemProcessing:["Cancel",S.STRING],labelButtonUndoItemProcessing:["Undo",S.STRING],labelButtonRetryItemProcessing:["Retry",S.STRING],labelButtonProcessItem:["Upload",S.STRING],iconRemove:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M11.586 13l-2.293 2.293a1 1 0 0 0 1.414 1.414L13 14.414l2.293 2.293a1 1 0 0 0 1.414-1.414L14.414 13l2.293-2.293a1 1 0 0 0-1.414-1.414L13 11.586l-2.293-2.293a1 1 0 0 0-1.414 1.414L11.586 13z" fill="currentColor" fill-rule="nonzero"/></svg>',S.STRING],iconProcess:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M14 10.414v3.585a1 1 0 0 1-2 0v-3.585l-1.293 1.293a1 1 0 0 1-1.414-1.415l3-3a1 1 0 0 1 1.414 0l3 3a1 1 0 0 1-1.414 1.415L14 10.414zM9 18a1 1 0 0 1 0-2h8a1 1 0 0 1 0 2H9z" fill="currentColor" fill-rule="evenodd"/></svg>',S.STRING],iconRetry:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M10.81 9.185l-.038.02A4.997 4.997 0 0 0 8 13.683a5 5 0 0 0 5 5 5 5 0 0 0 5-5 1 1 0 0 1 2 0A7 7 0 1 1 9.722 7.496l-.842-.21a.999.999 0 1 1 .484-1.94l3.23.806c.535.133.86.675.73 1.21l-.804 3.233a.997.997 0 0 1-1.21.73.997.997 0 0 1-.73-1.21l.23-.928v-.002z" fill="currentColor" fill-rule="nonzero"/></svg>',S.STRING],iconUndo:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M9.185 10.81l.02-.038A4.997 4.997 0 0 1 13.683 8a5 5 0 0 1 5 5 5 5 0 0 1-5 5 1 1 0 0 0 0 2A7 7 0 1 0 7.496 9.722l-.21-.842a.999.999 0 1 0-1.94.484l.806 3.23c.133.535.675.86 1.21.73l3.233-.803a.997.997 0 0 0 .73-1.21.997.997 0 0 0-1.21-.73l-.928.23-.002-.001z" fill="currentColor" fill-rule="nonzero"/></svg>',S.STRING],iconDone:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M18.293 9.293a1 1 0 0 1 1.414 1.414l-7.002 7a1 1 0 0 1-1.414 0l-3.998-4a1 1 0 1 1 1.414-1.414L12 15.586l6.294-6.293z" fill="currentColor" fill-rule="nonzero"/></svg>',S.STRING],oninit:[null,S.FUNCTION],onwarning:[null,S.FUNCTION],onerror:[null,S.FUNCTION],onactivatefile:[null,S.FUNCTION],oninitfile:[null,S.FUNCTION],onaddfilestart:[null,S.FUNCTION],onaddfileprogress:[null,S.FUNCTION],onaddfile:[null,S.FUNCTION],onprocessfilestart:[null,S.FUNCTION],onprocessfileprogress:[null,S.FUNCTION],onprocessfileabort:[null,S.FUNCTION],onprocessfilerevert:[null,S.FUNCTION],onprocessfile:[null,S.FUNCTION],onprocessfiles:[null,S.FUNCTION],onremovefile:[null,S.FUNCTION],onpreparefile:[null,S.FUNCTION],onupdatefiles:[null,S.FUNCTION],onreorderfiles:[null,S.FUNCTION],beforeDropFile:[null,S.FUNCTION],beforeAddFile:[null,S.FUNCTION],beforeRemoveFile:[null,S.FUNCTION],beforePrepareFile:[null,S.FUNCTION],stylePanelLayout:[null,S.STRING],stylePanelAspectRatio:[null,S.STRING],styleItemPanelAspectRatio:[null,S.STRING],styleButtonRemoveItemPosition:["left",S.STRING],styleButtonProcessItemPosition:["right",S.STRING],styleLoadIndicatorPosition:["right",S.STRING],styleProgressIndicatorPosition:["right",S.STRING],styleButtonRemoveItemAlign:[!1,S.BOOLEAN],files:[[],S.ARRAY],credits:[["https://pqina.nl/","Powered by PQINA"],S.ARRAY]},Me=(e,t)=>ye(t)?e[0]||null:tt(t)?e[t]||null:(typeof t=="object"&&(t=t.id),e.find(n=>n.id===t)||null),hi=e=>{if(ye(e))return e;if(/:/.test(e)){const t=e.split(":");return t[1]/t[0]}return parseFloat(e)},Ee=e=>e.filter(t=>!t.archived),Ti={EMPTY:0,IDLE:1,ERROR:2,BUSY:3,READY:4};let Et=null;const Jl=()=>{if(Et===null)try{const e=new DataTransfer;e.items.add(new File(["hello world"],"This_Works.txt"));const t=document.createElement("input");t.setAttribute("type","file"),t.files=e.files,Et=t.files.length===1}catch{Et=!1}return Et},Zl=[x.LOAD_ERROR,x.PROCESSING_ERROR,x.PROCESSING_REVERT_ERROR],ec=[x.LOADING,x.PROCESSING,x.PROCESSING_QUEUED,x.INIT],tc=[x.PROCESSING_COMPLETE],nc=e=>Zl.includes(e.status),rc=e=>ec.includes(e.status),sc=e=>tc.includes(e.status),ts=e=>J(e.options.server)&&(J(e.options.server.process)||Ne(e.options.server.process)),ic=e=>({GET_STATUS:()=>{const t=Ee(e.items),{EMPTY:n,ERROR:r,BUSY:s,IDLE:o,READY:i}=Ti;return t.length===0?n:t.some(nc)?r:t.some(rc)?s:t.some(sc)?i:o},GET_ITEM:t=>Me(e.items,t),GET_ACTIVE_ITEM:t=>Me(Ee(e.items),t),GET_ACTIVE_ITEMS:()=>Ee(e.items),GET_ITEMS:()=>e.items,GET_ITEM_NAME:t=>{const n=Me(e.items,t);return n?n.filename:null},GET_ITEM_SIZE:t=>{const n=Me(e.items,t);return n?n.fileSize:null},GET_STYLES:()=>Object.keys(e.options).filter(t=>/^style/.test(t)).map(t=>({name:t,value:e.options[t]})),GET_PANEL_ASPECT_RATIO:()=>/circle/.test(e.options.stylePanelLayout)?1:hi(e.options.stylePanelAspectRatio),GET_ITEM_PANEL_ASPECT_RATIO:()=>e.options.styleItemPanelAspectRatio,GET_ITEMS_BY_STATUS:t=>Ee(e.items).filter(n=>n.status===t),GET_TOTAL_ITEMS:()=>Ee(e.items).length,SHOULD_UPDATE_FILE_INPUT:()=>e.options.storeAsFile&&Jl()&&!ts(e),IS_ASYNC:()=>ts(e),GET_FILE_SIZE_LABELS:t=>({labelBytes:t("GET_LABEL_FILE_SIZE_BYTES")||void 0,labelKilobytes:t("GET_LABEL_FILE_SIZE_KILOBYTES")||void 0,labelMegabytes:t("GET_LABEL_FILE_SIZE_MEGABYTES")||void 0,labelGigabytes:t("GET_LABEL_FILE_SIZE_GIGABYTES")||void 0})}),oc=e=>{const t=Ee(e.items).length;if(!e.options.allowMultiple)return t===0;const n=e.options.maxFiles;return n===null||t<n},gi=(e,t,n)=>Math.max(Math.min(n,e),t),ac=(e,t,n)=>e.splice(t,0,n),lc=(e,t,n)=>ye(t)?null:typeof n>"u"?(e.push(t),t):(n=gi(n,0,e.length),ac(e,n,t),t),Dn=e=>/^\s*data:([a-z]+\/[a-z0-9-+.]+(;[a-z-]+=[a-z0-9-]+)?)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s]*)\s*$/i.test(e),pt=e=>`${e}`.split("/").pop().split("?").shift(),kt=e=>e.split(".").pop(),cc=e=>{if(typeof e!="string")return"";const t=e.split("/").pop();return/svg/.test(t)?"svg":/zip|compressed/.test(t)?"zip":/plain/.test(t)?"txt":/msword/.test(t)?"doc":/[a-z]+/.test(t)?t==="jpeg"?"jpg":t:""},rt=(e,t="")=>(t+e).slice(-t.length),Ii=(e=new Date)=>`${e.getFullYear()}-${rt(e.getMonth()+1,"00")}-${rt(e.getDate(),"00")}_${rt(e.getHours(),"00")}-${rt(e.getMinutes(),"00")}-${rt(e.getSeconds(),"00")}`,Qe=(e,t,n=null,r=null)=>{const s=typeof n=="string"?e.slice(0,e.size,n):e.slice(0,e.size,e.type);return s.lastModifiedDate=new Date,e._relativePath&&(s._relativePath=e._relativePath),re(t)||(t=Ii()),t&&r===null&&kt(t)?s.name=t:(r=r||cc(s.type),s.name=t+(r?"."+r:"")),s},uc=()=>window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,vi=(e,t)=>{const n=uc();if(n){const r=new n;return r.append(e),r.getBlob(t)}return new Blob([e],{type:t})},dc=(e,t)=>{const n=new ArrayBuffer(e.length),r=new Uint8Array(n);for(let s=0;s<e.length;s++)r[s]=e.charCodeAt(s);return vi(n,t)},Oi=e=>(/^data:(.+);/.exec(e)||[])[1]||null,pc=e=>e.split(",")[1].replace(/\s/g,""),fc=e=>atob(pc(e)),mc=e=>{const t=Oi(e),n=fc(e);return dc(n,t)},_c=(e,t,n)=>Qe(mc(e),t,null,n),Ec=e=>{if(!/^content-disposition:/i.test(e))return null;const t=e.split(/filename=|filename\*=.+''/).splice(1).map(n=>n.trim().replace(/^["']|[;"']{0,2}$/g,"")).filter(n=>n.length);return t.length?decodeURI(t[t.length-1]):null},hc=e=>{if(/content-length:/i.test(e)){const t=e.match(/[0-9]+/)[0];return t?parseInt(t,10):null}return null},Tc=e=>/x-content-transfer-id:/i.test(e)&&(e.split(":")[1]||"").trim()||null,Zn=e=>{const t={source:null,name:null,size:null},n=e.split(`
`);for(let r of n){const s=Ec(r);if(s){t.name=s;continue}const o=hc(r);if(o){t.size=o;continue}const i=Tc(r);if(i){t.source=i;continue}}return t},gc=e=>{const t={source:null,complete:!1,progress:0,size:null,timestamp:null,duration:0,request:null},n=()=>t.progress,r=()=>{t.request&&t.request.abort&&t.request.abort()},s=()=>{const a=t.source;i.fire("init",a),a instanceof File?i.fire("load",a):a instanceof Blob?i.fire("load",Qe(a,a.name)):Dn(a)?i.fire("load",_c(a)):o(a)},o=a=>{if(!e){i.fire("error",{type:"error",body:"Can't load URL",code:400});return}t.timestamp=Date.now(),t.request=e(a,l=>{t.duration=Date.now()-t.timestamp,t.complete=!0,l instanceof Blob&&(l=Qe(l,l.name||pt(a))),i.fire("load",l instanceof Blob?l:l?l.body:null)},l=>{i.fire("error",typeof l=="string"?{type:"error",code:0,body:l}:l)},(l,c,u)=>{if(u&&(t.size=u),t.duration=Date.now()-t.timestamp,!l){t.progress=null;return}t.progress=c/u,i.fire("progress",t.progress)},()=>{i.fire("abort")},l=>{const c=Zn(typeof l=="string"?l:l.headers);i.fire("meta",{size:t.size||c.size,filename:c.name,source:c.source})})},i={...xt(),setSource:a=>t.source=a,getProgress:n,abort:r,load:s};return i},ns=e=>/GET|HEAD/.test(e),qe=(e,t,n)=>{const r={onheaders:()=>{},onprogress:()=>{},onload:()=>{},ontimeout:()=>{},onerror:()=>{},onabort:()=>{},abort:()=>{s=!0,i.abort()}};let s=!1,o=!1;n={method:"POST",headers:{},withCredentials:!1,...n},t=encodeURI(t),ns(n.method)&&e&&(t=`${t}${encodeURIComponent(typeof e=="string"?e:JSON.stringify(e))}`);const i=new XMLHttpRequest,a=ns(n.method)?i:i.upload;return a.onprogress=l=>{s||r.onprogress(l.lengthComputable,l.loaded,l.total)},i.onreadystatechange=()=>{i.readyState<2||i.readyState===4&&i.status===0||o||(o=!0,r.onheaders(i))},i.onload=()=>{i.status>=200&&i.status<300?r.onload(i):r.onerror(i)},i.onerror=()=>r.onerror(i),i.onabort=()=>{s=!0,r.onabort()},i.ontimeout=()=>r.ontimeout(i),i.open(n.method,t,!0),tt(n.timeout)&&(i.timeout=n.timeout),Object.keys(n.headers).forEach(l=>{const c=unescape(encodeURIComponent(n.headers[l]));i.setRequestHeader(l,c)}),n.responseType&&(i.responseType=n.responseType),n.withCredentials&&(i.withCredentials=!0),i.send(e),r},j=(e,t,n,r)=>({type:e,code:t,body:n,headers:r}),Be=e=>t=>{e(j("error",0,"Timeout",t.getAllResponseHeaders()))},rs=e=>/\?/.test(e),ot=(...e)=>{let t="";return e.forEach(n=>{t+=rs(t)&&rs(n)?n.replace(/\?/,"&"):n}),t},un=(e="",t)=>{if(typeof t=="function")return t;if(!t||!re(t.url))return null;const n=t.onload||(s=>s),r=t.onerror||(s=>null);return(s,o,i,a,l,c)=>{const u=qe(s,ot(e,t.url),{...t,responseType:"blob"});return u.onload=d=>{const f=d.getAllResponseHeaders(),m=Zn(f).name||pt(s);o(j("load",d.status,t.method==="HEAD"?null:Qe(n(d.response),m),f))},u.onerror=d=>{i(j("error",d.status,r(d.response)||d.statusText,d.getAllResponseHeaders()))},u.onheaders=d=>{c(j("headers",d.status,null,d.getAllResponseHeaders()))},u.ontimeout=Be(i),u.onprogress=a,u.onabort=l,u}},de={QUEUED:0,COMPLETE:1,PROCESSING:2,ERROR:3,WAITING:4},Ic=(e,t,n,r,s,o,i,a,l,c,u)=>{const d=[],{chunkTransferId:f,chunkServer:m,chunkSize:p,chunkRetryDelays:_}=u,E={serverId:f,aborted:!1},g=t.ondata||(b=>b),I=t.onload||((b,H)=>H==="HEAD"?b.getResponseHeader("Upload-Offset"):b.response),T=t.onerror||(b=>null),O=b=>{const H=new FormData;J(s)&&H.append(n,JSON.stringify(s));const R=typeof t.headers=="function"?t.headers(r,s):{...t.headers,"Upload-Length":r.size},C={...t,headers:R},V=qe(g(H),ot(e,t.url),C);V.onload=$=>b(I($,C.method)),V.onerror=$=>i(j("error",$.status,T($.response)||$.statusText,$.getAllResponseHeaders())),V.ontimeout=Be(i)},v=b=>{const H=ot(e,m.url,E.serverId),C={headers:typeof t.headers=="function"?t.headers(E.serverId):{...t.headers},method:"HEAD"},V=qe(null,H,C);V.onload=$=>b(I($,C.method)),V.onerror=$=>i(j("error",$.status,T($.response)||$.statusText,$.getAllResponseHeaders())),V.ontimeout=Be(i)},L=Math.floor(r.size/p);for(let b=0;b<=L;b++){const H=b*p,R=r.slice(H,H+p,"application/offset+octet-stream");d[b]={index:b,size:R.size,offset:H,data:R,file:r,progress:0,retries:[..._],status:de.QUEUED,error:null,request:null,timeout:null}}const M=()=>o(E.serverId),y=b=>b.status===de.QUEUED||b.status===de.ERROR,A=b=>{if(E.aborted)return;if(b=b||d.find(y),!b){d.every(k=>k.status===de.COMPLETE)&&M();return}b.status=de.PROCESSING,b.progress=null;const H=m.ondata||(k=>k),R=m.onerror||(k=>null),C=ot(e,m.url,E.serverId),V=typeof m.headers=="function"?m.headers(b):{...m.headers,"Content-Type":"application/offset+octet-stream","Upload-Offset":b.offset,"Upload-Length":r.size,"Upload-Name":r.name},$=b.request=qe(H(b.data),C,{...m,headers:V});$.onload=()=>{b.status=de.COMPLETE,b.request=null,N()},$.onprogress=(k,W,Yt)=>{b.progress=k?W:null,w()},$.onerror=k=>{b.status=de.ERROR,b.request=null,b.error=R(k.response)||k.statusText,U(b)||i(j("error",k.status,R(k.response)||k.statusText,k.getAllResponseHeaders()))},$.ontimeout=k=>{b.status=de.ERROR,b.request=null,U(b)||Be(i)(k)},$.onabort=()=>{b.status=de.QUEUED,b.request=null,l()}},U=b=>b.retries.length===0?!1:(b.status=de.WAITING,clearTimeout(b.timeout),b.timeout=setTimeout(()=>{A(b)},b.retries.shift()),!0),w=()=>{const b=d.reduce((R,C)=>R===null||C.progress===null?null:R+C.progress,0);if(b===null)return a(!1,0,0);const H=d.reduce((R,C)=>R+C.size,0);a(!0,b,H)},N=()=>{d.filter(H=>H.status===de.PROCESSING).length>=1||A()},B=()=>{d.forEach(b=>{clearTimeout(b.timeout),b.request&&b.request.abort()})};return E.serverId?v(b=>{E.aborted||(d.filter(H=>H.offset<b).forEach(H=>{H.status=de.COMPLETE,H.progress=H.size}),N())}):O(b=>{E.aborted||(c(b),E.serverId=b,N())}),{abort:()=>{E.aborted=!0,B()}}},vc=(e,t,n,r)=>(s,o,i,a,l,c,u)=>{if(!s)return;const d=r.chunkUploads,f=d&&s.size>r.chunkSize,m=d&&(f||r.chunkForce);if(s instanceof Blob&&m)return Ic(e,t,n,s,o,i,a,l,c,u,r);const p=t.ondata||(v=>v),_=t.onload||(v=>v),E=t.onerror||(v=>null),g=typeof t.headers=="function"?t.headers(s,o)||{}:{...t.headers},I={...t,headers:g};var T=new FormData;J(o)&&T.append(n,JSON.stringify(o)),(s instanceof Blob?[{name:null,file:s}]:s).forEach(v=>{T.append(n,v.file,v.name===null?v.file.name:`${v.name}${v.file.name}`)});const O=qe(p(T),ot(e,t.url),I);return O.onload=v=>{i(j("load",v.status,_(v.response),v.getAllResponseHeaders()))},O.onerror=v=>{a(j("error",v.status,E(v.response)||v.statusText,v.getAllResponseHeaders()))},O.ontimeout=Be(a),O.onprogress=l,O.onabort=c,O},Oc=(e="",t,n,r)=>typeof t=="function"?(...s)=>t(n,...s,r):!t||!re(t.url)?null:vc(e,t,n,r),st=(e="",t)=>{if(typeof t=="function")return t;if(!t||!re(t.url))return(s,o)=>o();const n=t.onload||(s=>s),r=t.onerror||(s=>null);return(s,o,i)=>{const a=qe(s,e+t.url,t);return a.onload=l=>{o(j("load",l.status,n(l.response),l.getAllResponseHeaders()))},a.onerror=l=>{i(j("error",l.status,r(l.response)||l.statusText,l.getAllResponseHeaders()))},a.ontimeout=Be(i),a}},yi=(e=0,t=1)=>e+Math.random()*(t-e),yc=(e,t=1e3,n=0,r=25,s=250)=>{let o=null;const i=Date.now(),a=()=>{let l=Date.now()-i,c=yi(r,s);l+c>t&&(c=l+c-t);let u=l/t;if(u>=1||document.hidden){e(1);return}e(u),o=setTimeout(a,c)};return t>0&&a(),{clear:()=>{clearTimeout(o)}}},Rc=(e,t)=>{const n={complete:!1,perceivedProgress:0,perceivedPerformanceUpdater:null,progress:null,timestamp:null,perceivedDuration:0,duration:0,request:null,response:null},{allowMinimumUploadDuration:r}=t,s=(u,d)=>{const f=()=>{n.duration===0||n.progress===null||c.fire("progress",c.getProgress())},m=()=>{n.complete=!0,c.fire("load-perceived",n.response.body)};c.fire("start"),n.timestamp=Date.now(),n.perceivedPerformanceUpdater=yc(p=>{n.perceivedProgress=p,n.perceivedDuration=Date.now()-n.timestamp,f(),n.response&&n.perceivedProgress===1&&!n.complete&&m()},r?yi(750,1500):0),n.request=e(u,d,p=>{n.response=J(p)?p:{type:"load",code:200,body:`${p}`,headers:{}},n.duration=Date.now()-n.timestamp,n.progress=1,c.fire("load",n.response.body),(!r||r&&n.perceivedProgress===1)&&m()},p=>{n.perceivedPerformanceUpdater.clear(),c.fire("error",J(p)?p:{type:"error",code:0,body:`${p}`})},(p,_,E)=>{n.duration=Date.now()-n.timestamp,n.progress=p?_/E:null,f()},()=>{n.perceivedPerformanceUpdater.clear(),c.fire("abort",n.response?n.response.body:null)},p=>{c.fire("transfer",p)})},o=()=>{n.request&&(n.perceivedPerformanceUpdater.clear(),n.request.abort&&n.request.abort(),n.complete=!0)},i=()=>{o(),n.complete=!1,n.perceivedProgress=0,n.progress=0,n.timestamp=null,n.perceivedDuration=0,n.duration=0,n.request=null,n.response=null},a=r?()=>n.progress?Math.min(n.progress,n.perceivedProgress):null:()=>n.progress||null,l=r?()=>Math.min(n.duration,n.perceivedDuration):()=>n.duration,c={...xt(),process:s,abort:o,getProgress:a,getDuration:l,reset:i};return c},Ri=e=>e.substring(0,e.lastIndexOf("."))||e,Sc=e=>{let t=[e.name,e.size,e.type];return e instanceof Blob||Dn(e)?t[0]=e.name||Ii():Dn(e)?(t[1]=e.length,t[2]=Oi(e)):re(e)&&(t[0]=pt(e),t[1]=0,t[2]="application/octet-stream"),{name:t[0],size:t[1],type:t[2]}},Je=e=>!!(e instanceof File||e instanceof Blob&&e.name),Si=e=>{if(!J(e))return e;const t=Vt(e)?[]:{};for(const n in e){if(!e.hasOwnProperty(n))continue;const r=e[n];t[n]=r&&J(r)?Si(r):r}return t},Ac=(e=null,t=null,n=null)=>{const r=Kn(),s={archived:!1,frozen:!1,released:!1,source:null,file:n,serverFileReference:t,transferId:null,processingAborted:!1,status:t?x.PROCESSING_COMPLETE:x.INIT,activeLoader:null,activeProcessor:null};let o=null;const i={},a=y=>s.status=y,l=(y,...A)=>{s.released||s.frozen||L.fire(y,...A)},c=()=>kt(s.file.name),u=()=>s.file.type,d=()=>s.file.size,f=()=>s.file,m=(y,A,U)=>{if(s.source=y,L.fireSync("init"),s.file){L.fireSync("load-skip");return}s.file=Sc(y),A.on("init",()=>{l("load-init")}),A.on("meta",w=>{s.file.size=w.size,s.file.filename=w.filename,w.source&&(e=Q.LIMBO,s.serverFileReference=w.source,s.status=x.PROCESSING_COMPLETE),l("load-meta")}),A.on("progress",w=>{a(x.LOADING),l("load-progress",w)}),A.on("error",w=>{a(x.LOAD_ERROR),l("load-request-error",w)}),A.on("abort",()=>{a(x.INIT),l("load-abort")}),A.on("load",w=>{s.activeLoader=null;const N=b=>{s.file=Je(b)?b:s.file,e===Q.LIMBO&&s.serverFileReference?a(x.PROCESSING_COMPLETE):a(x.IDLE),l("load")},B=b=>{s.file=w,l("load-meta"),a(x.LOAD_ERROR),l("load-file-error",b)};if(s.serverFileReference){N(w);return}U(w,N,B)}),A.setSource(y),s.activeLoader=A,A.load()},p=()=>{s.activeLoader&&s.activeLoader.load()},_=()=>{if(s.activeLoader){s.activeLoader.abort();return}a(x.INIT),l("load-abort")},E=(y,A)=>{if(s.processingAborted){s.processingAborted=!1;return}if(a(x.PROCESSING),o=null,!(s.file instanceof Blob)){L.on("load",()=>{E(y,A)});return}y.on("load",N=>{s.transferId=null,s.serverFileReference=N}),y.on("transfer",N=>{s.transferId=N}),y.on("load-perceived",N=>{s.activeProcessor=null,s.transferId=null,s.serverFileReference=N,a(x.PROCESSING_COMPLETE),l("process-complete",N)}),y.on("start",()=>{l("process-start")}),y.on("error",N=>{s.activeProcessor=null,a(x.PROCESSING_ERROR),l("process-error",N)}),y.on("abort",N=>{s.activeProcessor=null,s.serverFileReference=N,a(x.IDLE),l("process-abort"),o&&o()}),y.on("progress",N=>{l("process-progress",N)});const U=N=>{s.archived||y.process(N,{...i})},w=console.error;A(s.file,U,w),s.activeProcessor=y},g=()=>{s.processingAborted=!1,a(x.PROCESSING_QUEUED)},I=()=>new Promise(y=>{if(!s.activeProcessor){s.processingAborted=!0,a(x.IDLE),l("process-abort"),y();return}o=()=>{y()},s.activeProcessor.abort()}),T=(y,A)=>new Promise((U,w)=>{const N=s.serverFileReference!==null?s.serverFileReference:s.transferId;if(N===null){U();return}y(N,()=>{s.serverFileReference=null,s.transferId=null,U()},B=>{if(!A){U();return}a(x.PROCESSING_REVERT_ERROR),l("process-revert-error"),w(B)}),a(x.IDLE),l("process-revert")}),O=(y,A,U)=>{const w=y.split("."),N=w[0],B=w.pop();let b=i;w.forEach(H=>b=b[H]),JSON.stringify(b[B])!==JSON.stringify(A)&&(b[B]=A,l("metadata-update",{key:N,value:i[N],silent:U}))},L={id:{get:()=>r},origin:{get:()=>e,set:y=>e=y},serverId:{get:()=>s.serverFileReference},transferId:{get:()=>s.transferId},status:{get:()=>s.status},filename:{get:()=>s.file.name},filenameWithoutExtension:{get:()=>Ri(s.file.name)},fileExtension:{get:c},fileType:{get:u},fileSize:{get:d},file:{get:f},relativePath:{get:()=>s.file._relativePath},source:{get:()=>s.source},getMetadata:y=>Si(y?i[y]:i),setMetadata:(y,A,U)=>{if(J(y)){const w=y;return Object.keys(w).forEach(N=>{O(N,w[N],A)}),y}return O(y,A,U),A},extend:(y,A)=>M[y]=A,abortLoad:_,retryLoad:p,requestProcessing:g,abortProcessing:I,load:m,process:E,revert:T,...xt(),freeze:()=>s.frozen=!0,release:()=>s.released=!0,released:{get:()=>s.released},archive:()=>s.archived=!0,archived:{get:()=>s.archived}},M=Le(L);return M},Dc=(e,t)=>ye(t)?0:re(t)?e.findIndex(n=>n.id===t):-1,ss=(e,t)=>{const n=Dc(e,t);if(!(n<0))return e[n]||null},is=(e,t,n,r,s,o)=>{const i=qe(null,e,{method:"GET",responseType:"blob"});return i.onload=a=>{const l=a.getAllResponseHeaders(),c=Zn(l).name||pt(e);t(j("load",a.status,Qe(a.response,c),l))},i.onerror=a=>{n(j("error",a.status,a.statusText,a.getAllResponseHeaders()))},i.onheaders=a=>{o(j("headers",a.status,null,a.getAllResponseHeaders()))},i.ontimeout=Be(n),i.onprogress=r,i.onabort=s,i},os=e=>(e.indexOf("//")===0&&(e=location.protocol+e),e.toLowerCase().replace("blob:","").replace(/([a-z])?:\/\//,"$1").split("/")[0]),Lc=e=>(e.indexOf(":")>-1||e.indexOf("//")>-1)&&os(location.href)!==os(e),ht=e=>(...t)=>Ne(e)?e(...t):e,bc=e=>!Je(e.file),dn=(e,t)=>{clearTimeout(t.listUpdateTimeout),t.listUpdateTimeout=setTimeout(()=>{e("DID_UPDATE_ITEMS",{items:Ee(t.items)})},0)},as=(e,...t)=>new Promise(n=>{if(!e)return n(!0);const r=e(...t);if(r==null)return n(!0);if(typeof r=="boolean")return n(r);typeof r.then=="function"&&r.then(n)}),pn=(e,t)=>{e.items.sort((n,r)=>t(ae(n),ae(r)))},pe=(e,t)=>({query:n,success:r=()=>{},failure:s=()=>{},...o}={})=>{const i=Me(e.items,n);if(!i){s({error:j("error",0,"Item not found"),file:null});return}t(i,r,s,o||{})},Cc=(e,t,n)=>({ABORT_ALL:()=>{Ee(n.items).forEach(r=>{r.freeze(),r.abortLoad(),r.abortProcessing()})},DID_SET_FILES:({value:r=[]})=>{const s=r.map(i=>({source:i.source?i.source:i,options:i.options}));let o=Ee(n.items);o.forEach(i=>{s.find(a=>a.source===i.source||a.source===i.file)||e("REMOVE_ITEM",{query:i,remove:!1})}),o=Ee(n.items),s.forEach((i,a)=>{o.find(l=>l.source===i.source||l.file===i.source)||e("ADD_ITEM",{...i,interactionMethod:fe.NONE,index:a})})},DID_UPDATE_ITEM_METADATA:({id:r,action:s,change:o})=>{o.silent||(clearTimeout(n.itemUpdateTimeout),n.itemUpdateTimeout=setTimeout(()=>{const i=ss(n.items,r);if(!t("IS_ASYNC")){me("SHOULD_PREPARE_OUTPUT",!1,{item:i,query:t,action:s,change:o}).then(u=>{const d=t("GET_BEFORE_PREPARE_FILE");d&&(u=d(i,u)),u&&e("REQUEST_PREPARE_OUTPUT",{query:r,item:i,success:f=>{e("DID_PREPARE_OUTPUT",{id:r,file:f})}},!0)});return}i.origin===Q.LOCAL&&e("DID_LOAD_ITEM",{id:i.id,error:null,serverFileReference:i.source});const a=()=>{setTimeout(()=>{e("REQUEST_ITEM_PROCESSING",{query:r})},32)},l=u=>{i.revert(st(n.options.server.url,n.options.server.revert),t("GET_FORCE_REVERT")).then(u?a:()=>{}).catch(()=>{})},c=u=>{i.abortProcessing().then(u?a:()=>{})};if(i.status===x.PROCESSING_COMPLETE)return l(n.options.instantUpload);if(i.status===x.PROCESSING)return c(n.options.instantUpload);n.options.instantUpload&&a()},0))},MOVE_ITEM:({query:r,index:s})=>{const o=Me(n.items,r);if(!o)return;const i=n.items.indexOf(o);s=gi(s,0,n.items.length-1),i!==s&&n.items.splice(s,0,n.items.splice(i,1)[0])},SORT:({compare:r})=>{pn(n,r),e("DID_SORT_ITEMS",{items:t("GET_ACTIVE_ITEMS")})},ADD_ITEMS:({items:r,index:s,interactionMethod:o,success:i=()=>{},failure:a=()=>{}})=>{let l=s;if(s===-1||typeof s>"u"){const m=t("GET_ITEM_INSERT_LOCATION"),p=t("GET_TOTAL_ITEMS");l=m==="before"?0:p}const c=t("GET_IGNORED_FILES"),u=m=>Je(m)?!c.includes(m.name.toLowerCase()):!ye(m),f=r.filter(u).map(m=>new Promise((p,_)=>{e("ADD_ITEM",{interactionMethod:o,source:m.source||m,success:p,failure:_,index:l++,options:m.options||{}})}));Promise.all(f).then(i).catch(a)},ADD_ITEM:({source:r,index:s=-1,interactionMethod:o,success:i=()=>{},failure:a=()=>{},options:l={}})=>{if(ye(r)){a({error:j("error",0,"No source"),file:null});return}if(Je(r)&&n.options.ignoredFiles.includes(r.name.toLowerCase()))return;if(!oc(n)){if(n.options.allowMultiple||!n.options.allowMultiple&&!n.options.allowReplace){const I=j("warning",0,"Max files");e("DID_THROW_MAX_FILES",{source:r,error:I}),a({error:I,file:null});return}const g=Ee(n.items)[0];if(g.status===x.PROCESSING_COMPLETE||g.status===x.PROCESSING_REVERT_ERROR){const I=t("GET_FORCE_REVERT");if(g.revert(st(n.options.server.url,n.options.server.revert),I).then(()=>{I&&e("ADD_ITEM",{source:r,index:s,interactionMethod:o,success:i,failure:a,options:l})}).catch(()=>{}),I)return}e("REMOVE_ITEM",{query:g.id})}const c=l.type==="local"?Q.LOCAL:l.type==="limbo"?Q.LIMBO:Q.INPUT,u=Ac(c,c===Q.INPUT?null:r,l.file);Object.keys(l.metadata||{}).forEach(g=>{u.setMetadata(g,l.metadata[g])}),Ge("DID_CREATE_ITEM",u,{query:t,dispatch:e});const d=t("GET_ITEM_INSERT_LOCATION");n.options.itemInsertLocationFreedom||(s=d==="before"?-1:n.items.length),lc(n.items,u,s),Ne(d)&&r&&pn(n,d);const f=u.id;u.on("init",()=>{e("DID_INIT_ITEM",{id:f})}),u.on("load-init",()=>{e("DID_START_ITEM_LOAD",{id:f})}),u.on("load-meta",()=>{e("DID_UPDATE_ITEM_META",{id:f})}),u.on("load-progress",g=>{e("DID_UPDATE_ITEM_LOAD_PROGRESS",{id:f,progress:g})}),u.on("load-request-error",g=>{const I=ht(n.options.labelFileLoadError)(g);if(g.code>=400&&g.code<500){e("DID_THROW_ITEM_INVALID",{id:f,error:g,status:{main:I,sub:`${g.code} (${g.body})`}}),a({error:g,file:ae(u)});return}e("DID_THROW_ITEM_LOAD_ERROR",{id:f,error:g,status:{main:I,sub:n.options.labelTapToRetry}})}),u.on("load-file-error",g=>{e("DID_THROW_ITEM_INVALID",{id:f,error:g.status,status:g.status}),a({error:g.status,file:ae(u)})}),u.on("load-abort",()=>{e("REMOVE_ITEM",{query:f})}),u.on("load-skip",()=>{e("COMPLETE_LOAD_ITEM",{query:f,item:u,data:{source:r,success:i}})}),u.on("load",()=>{const g=I=>{if(!I){e("REMOVE_ITEM",{query:f});return}u.on("metadata-update",T=>{e("DID_UPDATE_ITEM_METADATA",{id:f,change:T})}),me("SHOULD_PREPARE_OUTPUT",!1,{item:u,query:t}).then(T=>{const O=t("GET_BEFORE_PREPARE_FILE");O&&(T=O(u,T));const v=()=>{e("COMPLETE_LOAD_ITEM",{query:f,item:u,data:{source:r,success:i}}),dn(e,n)};if(T){e("REQUEST_PREPARE_OUTPUT",{query:f,item:u,success:L=>{e("DID_PREPARE_OUTPUT",{id:f,file:L}),v()}},!0);return}v()})};me("DID_LOAD_ITEM",u,{query:t,dispatch:e}).then(()=>{as(t("GET_BEFORE_ADD_FILE"),ae(u)).then(g)}).catch(I=>{if(!I||!I.error||!I.status)return g(!1);e("DID_THROW_ITEM_INVALID",{id:f,error:I.error,status:I.status})})}),u.on("process-start",()=>{e("DID_START_ITEM_PROCESSING",{id:f})}),u.on("process-progress",g=>{e("DID_UPDATE_ITEM_PROCESS_PROGRESS",{id:f,progress:g})}),u.on("process-error",g=>{e("DID_THROW_ITEM_PROCESSING_ERROR",{id:f,error:g,status:{main:ht(n.options.labelFileProcessingError)(g),sub:n.options.labelTapToRetry}})}),u.on("process-revert-error",g=>{e("DID_THROW_ITEM_PROCESSING_REVERT_ERROR",{id:f,error:g,status:{main:ht(n.options.labelFileProcessingRevertError)(g),sub:n.options.labelTapToRetry}})}),u.on("process-complete",g=>{e("DID_COMPLETE_ITEM_PROCESSING",{id:f,error:null,serverFileReference:g}),e("DID_DEFINE_VALUE",{id:f,value:g})}),u.on("process-abort",()=>{e("DID_ABORT_ITEM_PROCESSING",{id:f})}),u.on("process-revert",()=>{e("DID_REVERT_ITEM_PROCESSING",{id:f}),e("DID_DEFINE_VALUE",{id:f,value:null})}),e("DID_ADD_ITEM",{id:f,index:s,interactionMethod:o}),dn(e,n);const{url:m,load:p,restore:_,fetch:E}=n.options.server||{};u.load(r,gc(c===Q.INPUT?re(r)&&Lc(r)&&E?un(m,E):is:c===Q.LIMBO?un(m,_):un(m,p)),(g,I,T)=>{me("LOAD_FILE",g,{query:t}).then(I).catch(T)})},REQUEST_PREPARE_OUTPUT:({item:r,success:s,failure:o=()=>{}})=>{const i={error:j("error",0,"Item not found"),file:null};if(r.archived)return o(i);me("PREPARE_OUTPUT",r.file,{query:t,item:r}).then(a=>{me("COMPLETE_PREPARE_OUTPUT",a,{query:t,item:r}).then(l=>{if(r.archived)return o(i);s(l)})})},COMPLETE_LOAD_ITEM:({item:r,data:s})=>{const{success:o,source:i}=s,a=t("GET_ITEM_INSERT_LOCATION");if(Ne(a)&&i&&pn(n,a),e("DID_LOAD_ITEM",{id:r.id,error:null,serverFileReference:r.origin===Q.INPUT?null:i}),o(ae(r)),r.origin===Q.LOCAL){e("DID_LOAD_LOCAL_ITEM",{id:r.id});return}if(r.origin===Q.LIMBO){e("DID_COMPLETE_ITEM_PROCESSING",{id:r.id,error:null,serverFileReference:i}),e("DID_DEFINE_VALUE",{id:r.id,value:r.serverId||i});return}t("IS_ASYNC")&&n.options.instantUpload&&e("REQUEST_ITEM_PROCESSING",{query:r.id})},RETRY_ITEM_LOAD:pe(n,r=>{r.retryLoad()}),REQUEST_ITEM_PREPARE:pe(n,(r,s,o)=>{e("REQUEST_PREPARE_OUTPUT",{query:r.id,item:r,success:i=>{e("DID_PREPARE_OUTPUT",{id:r.id,file:i}),s({file:r,output:i})},failure:o},!0)}),REQUEST_ITEM_PROCESSING:pe(n,(r,s,o)=>{if(!(r.status===x.IDLE||r.status===x.PROCESSING_ERROR)){const a=()=>e("REQUEST_ITEM_PROCESSING",{query:r,success:s,failure:o}),l=()=>document.hidden?a():setTimeout(a,32);r.status===x.PROCESSING_COMPLETE||r.status===x.PROCESSING_REVERT_ERROR?r.revert(st(n.options.server.url,n.options.server.revert),t("GET_FORCE_REVERT")).then(l).catch(()=>{}):r.status===x.PROCESSING&&r.abortProcessing().then(l);return}r.status!==x.PROCESSING_QUEUED&&(r.requestProcessing(),e("DID_REQUEST_ITEM_PROCESSING",{id:r.id}),e("PROCESS_ITEM",{query:r,success:s,failure:o},!0))}),PROCESS_ITEM:pe(n,(r,s,o)=>{const i=t("GET_MAX_PARALLEL_UPLOADS");if(t("GET_ITEMS_BY_STATUS",x.PROCESSING).length===i){n.processingQueue.push({id:r.id,success:s,failure:o});return}if(r.status===x.PROCESSING)return;const l=()=>{const u=n.processingQueue.shift();if(!u)return;const{id:d,success:f,failure:m}=u,p=Me(n.items,d);if(!p||p.archived){l();return}e("PROCESS_ITEM",{query:d,success:f,failure:m},!0)};r.onOnce("process-complete",()=>{s(ae(r)),l();const u=n.options.server;if(n.options.instantUpload&&r.origin===Q.LOCAL&&Ne(u.remove)){const m=()=>{};r.origin=Q.LIMBO,n.options.server.remove(r.source,m,m)}t("GET_ITEMS_BY_STATUS",x.PROCESSING_COMPLETE).length===n.items.length&&e("DID_COMPLETE_ITEM_PROCESSING_ALL")}),r.onOnce("process-error",u=>{o({error:u,file:ae(r)}),l()});const c=n.options;r.process(Rc(Oc(c.server.url,c.server.process,c.name,{chunkTransferId:r.transferId,chunkServer:c.server.patch,chunkUploads:c.chunkUploads,chunkForce:c.chunkForce,chunkSize:c.chunkSize,chunkRetryDelays:c.chunkRetryDelays}),{allowMinimumUploadDuration:t("GET_ALLOW_MINIMUM_UPLOAD_DURATION")}),(u,d,f)=>{me("PREPARE_OUTPUT",u,{query:t,item:r}).then(m=>{e("DID_PREPARE_OUTPUT",{id:r.id,file:m}),d(m)}).catch(f)})}),RETRY_ITEM_PROCESSING:pe(n,r=>{e("REQUEST_ITEM_PROCESSING",{query:r})}),REQUEST_REMOVE_ITEM:pe(n,r=>{as(t("GET_BEFORE_REMOVE_FILE"),ae(r)).then(s=>{s&&e("REMOVE_ITEM",{query:r})})}),RELEASE_ITEM:pe(n,r=>{r.release()}),REMOVE_ITEM:pe(n,(r,s,o,i)=>{const a=()=>{const c=r.id;ss(n.items,c).archive(),e("DID_REMOVE_ITEM",{error:null,id:c,item:r}),dn(e,n),s(ae(r))},l=n.options.server;r.origin===Q.LOCAL&&l&&Ne(l.remove)&&i.remove!==!1?(e("DID_START_ITEM_REMOVE",{id:r.id}),l.remove(r.source,()=>a(),c=>{e("DID_THROW_ITEM_REMOVE_ERROR",{id:r.id,error:j("error",0,c,null),status:{main:ht(n.options.labelFileRemoveError)(c),sub:n.options.labelTapToRetry}})})):((i.revert&&r.origin!==Q.LOCAL&&r.serverId!==null||n.options.chunkUploads&&r.file.size>n.options.chunkSize||n.options.chunkUploads&&n.options.chunkForce)&&r.revert(st(n.options.server.url,n.options.server.revert),t("GET_FORCE_REVERT")),a())}),ABORT_ITEM_LOAD:pe(n,r=>{r.abortLoad()}),ABORT_ITEM_PROCESSING:pe(n,r=>{if(r.serverId){e("REVERT_ITEM_PROCESSING",{id:r.id});return}r.abortProcessing().then(()=>{n.options.instantUpload&&e("REMOVE_ITEM",{query:r.id})})}),REQUEST_REVERT_ITEM_PROCESSING:pe(n,r=>{if(!n.options.instantUpload){e("REVERT_ITEM_PROCESSING",{query:r});return}const s=a=>{a&&e("REVERT_ITEM_PROCESSING",{query:r})},o=t("GET_BEFORE_REMOVE_FILE");if(!o)return s(!0);const i=o(ae(r));if(i==null)return s(!0);if(typeof i=="boolean")return s(i);typeof i.then=="function"&&i.then(s)}),REVERT_ITEM_PROCESSING:pe(n,r=>{r.revert(st(n.options.server.url,n.options.server.revert),t("GET_FORCE_REVERT")).then(()=>{(n.options.instantUpload||bc(r))&&e("REMOVE_ITEM",{query:r.id})}).catch(()=>{})}),SET_OPTIONS:({options:r})=>{const s=Object.keys(r),o=wc.filter(a=>s.includes(a));[...o,...Object.keys(r).filter(a=>!o.includes(a))].forEach(a=>{e(`SET_${Ht(a,"_").toUpperCase()}`,{value:r[a]})})}}),wc=["server"],er=e=>e,Re=e=>document.createElement(e),X=(e,t)=>{let n=e.childNodes[0];n?t!==n.nodeValue&&(n.nodeValue=t):(n=document.createTextNode(t),e.appendChild(n))},ls=(e,t,n,r)=>{const s=(r%360-90)*Math.PI/180;return{x:e+n*Math.cos(s),y:t+n*Math.sin(s)}},Pc=(e,t,n,r,s,o)=>{const i=ls(e,t,n,s),a=ls(e,t,n,r);return["M",i.x,i.y,"A",n,n,0,o,0,a.x,a.y].join(" ")},Nc=(e,t,n,r,s)=>{let o=1;return s>r&&s-r<=.5&&(o=0),r>s&&r-s>=.5&&(o=0),Pc(e,t,n,Math.min(.9999,r)*360,Math.min(.9999,s)*360,o)},Mc=({root:e,props:t})=>{t.spin=!1,t.progress=0,t.opacity=0;const n=wt("svg");e.ref.path=wt("path",{"stroke-width":2,"stroke-linecap":"round"}),n.appendChild(e.ref.path),e.ref.svg=n,e.appendChild(n)},Uc=({root:e,props:t})=>{if(t.opacity===0)return;t.align&&(e.element.dataset.align=t.align);const n=parseInt(z(e.ref.path,"stroke-width"),10),r=e.rect.element.width*.5;let s=0,o=0;t.spin?(s=0,o=.5):(s=0,o=t.progress);const i=Nc(r,r,r-n,s,o);z(e.ref.path,"d",i),z(e.ref.path,"stroke-opacity",t.spin||t.progress>0?1:0)},cs=K({tag:"div",name:"progress-indicator",ignoreRectUpdate:!0,ignoreRect:!0,create:Mc,write:Uc,mixins:{apis:["progress","spin","align"],styles:["opacity"],animations:{opacity:{type:"tween",duration:500},progress:{type:"spring",stiffness:.95,damping:.65,mass:10}}}}),qc=({root:e,props:t})=>{e.element.innerHTML=(t.icon||"")+`<span>${t.label}</span>`,t.isDisabled=!1},Bc=({root:e,props:t})=>{const{isDisabled:n}=t,r=e.query("GET_DISABLED")||t.opacity===0;r&&!n?(t.isDisabled=!0,z(e.element,"disabled","disabled")):!r&&n&&(t.isDisabled=!1,e.element.removeAttribute("disabled"))},Ai=K({tag:"button",attributes:{type:"button"},ignoreRect:!0,ignoreRectUpdate:!0,name:"file-action-button",mixins:{apis:["label"],styles:["translateX","translateY","scaleX","scaleY","opacity"],animations:{scaleX:"spring",scaleY:"spring",translateX:"spring",translateY:"spring",opacity:{type:"tween",duration:250}},listeners:!0},create:qc,write:Bc}),Di=(e,t=".",n=1e3,r={})=>{const{labelBytes:s="bytes",labelKilobytes:o="KB",labelMegabytes:i="MB",labelGigabytes:a="GB"}=r;e=Math.round(Math.abs(e));const l=n,c=n*n,u=n*n*n;return e<l?`${e} ${s}`:e<c?`${Math.floor(e/l)} ${o}`:e<u?`${us(e/c,1,t)} ${i}`:`${us(e/u,2,t)} ${a}`},us=(e,t,n)=>e.toFixed(t).split(".").filter(r=>r!=="0").join(n),$c=({root:e,props:t})=>{const n=Re("span");n.className="filepond--file-info-main",z(n,"aria-hidden","true"),e.appendChild(n),e.ref.fileName=n;const r=Re("span");r.className="filepond--file-info-sub",e.appendChild(r),e.ref.fileSize=r,X(r,e.query("GET_LABEL_FILE_WAITING_FOR_SIZE")),X(n,er(e.query("GET_ITEM_NAME",t.id)))},Ln=({root:e,props:t})=>{X(e.ref.fileSize,Di(e.query("GET_ITEM_SIZE",t.id),".",e.query("GET_FILE_SIZE_BASE"),e.query("GET_FILE_SIZE_LABELS",e.query))),X(e.ref.fileName,er(e.query("GET_ITEM_NAME",t.id)))},ds=({root:e,props:t})=>{if(tt(e.query("GET_ITEM_SIZE",t.id))){Ln({root:e,props:t});return}X(e.ref.fileSize,e.query("GET_LABEL_FILE_SIZE_NOT_AVAILABLE"))},Vc=K({name:"file-info",ignoreRect:!0,ignoreRectUpdate:!0,write:se({DID_LOAD_ITEM:Ln,DID_UPDATE_ITEM_META:Ln,DID_THROW_ITEM_LOAD_ERROR:ds,DID_THROW_ITEM_INVALID:ds}),didCreateView:e=>{Ge("CREATE_VIEW",{...e,view:e})},create:$c,mixins:{styles:["translateX","translateY"],animations:{translateX:"spring",translateY:"spring"}}}),Li=e=>Math.round(e*100),Gc=({root:e})=>{const t=Re("span");t.className="filepond--file-status-main",e.appendChild(t),e.ref.main=t;const n=Re("span");n.className="filepond--file-status-sub",e.appendChild(n),e.ref.sub=n,bi({root:e,action:{progress:null}})},bi=({root:e,action:t})=>{const n=t.progress===null?e.query("GET_LABEL_FILE_LOADING"):`${e.query("GET_LABEL_FILE_LOADING")} ${Li(t.progress)}%`;X(e.ref.main,n),X(e.ref.sub,e.query("GET_LABEL_TAP_TO_CANCEL"))},Hc=({root:e,action:t})=>{const n=t.progress===null?e.query("GET_LABEL_FILE_PROCESSING"):`${e.query("GET_LABEL_FILE_PROCESSING")} ${Li(t.progress)}%`;X(e.ref.main,n),X(e.ref.sub,e.query("GET_LABEL_TAP_TO_CANCEL"))},xc=({root:e})=>{X(e.ref.main,e.query("GET_LABEL_FILE_PROCESSING")),X(e.ref.sub,e.query("GET_LABEL_TAP_TO_CANCEL"))},kc=({root:e})=>{X(e.ref.main,e.query("GET_LABEL_FILE_PROCESSING_ABORTED")),X(e.ref.sub,e.query("GET_LABEL_TAP_TO_RETRY"))},Fc=({root:e})=>{X(e.ref.main,e.query("GET_LABEL_FILE_PROCESSING_COMPLETE")),X(e.ref.sub,e.query("GET_LABEL_TAP_TO_UNDO"))},ps=({root:e})=>{X(e.ref.main,""),X(e.ref.sub,"")},it=({root:e,action:t})=>{X(e.ref.main,t.status.main),X(e.ref.sub,t.status.sub)},Wc=K({name:"file-status",ignoreRect:!0,ignoreRectUpdate:!0,write:se({DID_LOAD_ITEM:ps,DID_REVERT_ITEM_PROCESSING:ps,DID_REQUEST_ITEM_PROCESSING:xc,DID_ABORT_ITEM_PROCESSING:kc,DID_COMPLETE_ITEM_PROCESSING:Fc,DID_UPDATE_ITEM_PROCESS_PROGRESS:Hc,DID_UPDATE_ITEM_LOAD_PROGRESS:bi,DID_THROW_ITEM_LOAD_ERROR:it,DID_THROW_ITEM_INVALID:it,DID_THROW_ITEM_PROCESSING_ERROR:it,DID_THROW_ITEM_PROCESSING_REVERT_ERROR:it,DID_THROW_ITEM_REMOVE_ERROR:it}),didCreateView:e=>{Ge("CREATE_VIEW",{...e,view:e})},create:Gc,mixins:{styles:["translateX","translateY","opacity"],animations:{opacity:{type:"tween",duration:250},translateX:"spring",translateY:"spring"}}}),bn={AbortItemLoad:{label:"GET_LABEL_BUTTON_ABORT_ITEM_LOAD",action:"ABORT_ITEM_LOAD",className:"filepond--action-abort-item-load",align:"LOAD_INDICATOR_POSITION"},RetryItemLoad:{label:"GET_LABEL_BUTTON_RETRY_ITEM_LOAD",action:"RETRY_ITEM_LOAD",icon:"GET_ICON_RETRY",className:"filepond--action-retry-item-load",align:"BUTTON_PROCESS_ITEM_POSITION"},RemoveItem:{label:"GET_LABEL_BUTTON_REMOVE_ITEM",action:"REQUEST_REMOVE_ITEM",icon:"GET_ICON_REMOVE",className:"filepond--action-remove-item",align:"BUTTON_REMOVE_ITEM_POSITION"},ProcessItem:{label:"GET_LABEL_BUTTON_PROCESS_ITEM",action:"REQUEST_ITEM_PROCESSING",icon:"GET_ICON_PROCESS",className:"filepond--action-process-item",align:"BUTTON_PROCESS_ITEM_POSITION"},AbortItemProcessing:{label:"GET_LABEL_BUTTON_ABORT_ITEM_PROCESSING",action:"ABORT_ITEM_PROCESSING",className:"filepond--action-abort-item-processing",align:"BUTTON_PROCESS_ITEM_POSITION"},RetryItemProcessing:{label:"GET_LABEL_BUTTON_RETRY_ITEM_PROCESSING",action:"RETRY_ITEM_PROCESSING",icon:"GET_ICON_RETRY",className:"filepond--action-retry-item-processing",align:"BUTTON_PROCESS_ITEM_POSITION"},RevertItemProcessing:{label:"GET_LABEL_BUTTON_UNDO_ITEM_PROCESSING",action:"REQUEST_REVERT_ITEM_PROCESSING",icon:"GET_ICON_UNDO",className:"filepond--action-revert-item-processing",align:"BUTTON_PROCESS_ITEM_POSITION"}},Cn=[];Y(bn,e=>{Cn.push(e)});const le=e=>{if(wn(e)==="right")return 0;const t=e.ref.buttonRemoveItem.rect.element;return t.hidden?null:t.width+t.left},Yc=e=>e.ref.buttonAbortItemLoad.rect.element.width,Tt=e=>Math.floor(e.ref.buttonRemoveItem.rect.element.height/4),jc=e=>Math.floor(e.ref.buttonRemoveItem.rect.element.left/2),Xc=e=>e.query("GET_STYLE_LOAD_INDICATOR_POSITION"),zc=e=>e.query("GET_STYLE_PROGRESS_INDICATOR_POSITION"),wn=e=>e.query("GET_STYLE_BUTTON_REMOVE_ITEM_POSITION"),Kc={buttonAbortItemLoad:{opacity:0},buttonRetryItemLoad:{opacity:0},buttonRemoveItem:{opacity:0},buttonProcessItem:{opacity:0},buttonAbortItemProcessing:{opacity:0},buttonRetryItemProcessing:{opacity:0},buttonRevertItemProcessing:{opacity:0},loadProgressIndicator:{opacity:0,align:Xc},processProgressIndicator:{opacity:0,align:zc},processingCompleteIndicator:{opacity:0,scaleX:.75,scaleY:.75},info:{translateX:0,translateY:0,opacity:0},status:{translateX:0,translateY:0,opacity:0}},fs={buttonRemoveItem:{opacity:1},buttonProcessItem:{opacity:1},info:{translateX:le},status:{translateX:le}},fn={buttonAbortItemProcessing:{opacity:1},processProgressIndicator:{opacity:1},status:{opacity:1}},Xe={DID_THROW_ITEM_INVALID:{buttonRemoveItem:{opacity:1},info:{translateX:le},status:{translateX:le,opacity:1}},DID_START_ITEM_LOAD:{buttonAbortItemLoad:{opacity:1},loadProgressIndicator:{opacity:1},status:{opacity:1}},DID_THROW_ITEM_LOAD_ERROR:{buttonRetryItemLoad:{opacity:1},buttonRemoveItem:{opacity:1},info:{translateX:le},status:{opacity:1}},DID_START_ITEM_REMOVE:{processProgressIndicator:{opacity:1,align:wn},info:{translateX:le},status:{opacity:0}},DID_THROW_ITEM_REMOVE_ERROR:{processProgressIndicator:{opacity:0,align:wn},buttonRemoveItem:{opacity:1},info:{translateX:le},status:{opacity:1,translateX:le}},DID_LOAD_ITEM:fs,DID_LOAD_LOCAL_ITEM:{buttonRemoveItem:{opacity:1},info:{translateX:le},status:{translateX:le}},DID_START_ITEM_PROCESSING:fn,DID_REQUEST_ITEM_PROCESSING:fn,DID_UPDATE_ITEM_PROCESS_PROGRESS:fn,DID_COMPLETE_ITEM_PROCESSING:{buttonRevertItemProcessing:{opacity:1},info:{opacity:1},status:{opacity:1}},DID_THROW_ITEM_PROCESSING_ERROR:{buttonRemoveItem:{opacity:1},buttonRetryItemProcessing:{opacity:1},status:{opacity:1},info:{translateX:le}},DID_THROW_ITEM_PROCESSING_REVERT_ERROR:{buttonRevertItemProcessing:{opacity:1},status:{opacity:1},info:{opacity:1}},DID_ABORT_ITEM_PROCESSING:{buttonRemoveItem:{opacity:1},buttonProcessItem:{opacity:1},info:{translateX:le},status:{opacity:1}},DID_REVERT_ITEM_PROCESSING:fs},Qc=K({create:({root:e})=>{e.element.innerHTML=e.query("GET_ICON_DONE")},name:"processing-complete-indicator",ignoreRect:!0,mixins:{styles:["scaleX","scaleY","opacity"],animations:{scaleX:"spring",scaleY:"spring",opacity:{type:"tween",duration:250}}}}),Jc=({root:e,props:t})=>{const n=Object.keys(bn).reduce((p,_)=>(p[_]={...bn[_]},p),{}),{id:r}=t,s=e.query("GET_ALLOW_REVERT"),o=e.query("GET_ALLOW_REMOVE"),i=e.query("GET_ALLOW_PROCESS"),a=e.query("GET_INSTANT_UPLOAD"),l=e.query("IS_ASYNC"),c=e.query("GET_STYLE_BUTTON_REMOVE_ITEM_ALIGN");let u;l?i&&!s?u=p=>!/RevertItemProcessing/.test(p):!i&&s?u=p=>!/ProcessItem|RetryItemProcessing|AbortItemProcessing/.test(p):!i&&!s&&(u=p=>!/Process/.test(p)):u=p=>!/Process/.test(p);const d=u?Cn.filter(u):Cn.concat();if(a&&s&&(n.RevertItemProcessing.label="GET_LABEL_BUTTON_REMOVE_ITEM",n.RevertItemProcessing.icon="GET_ICON_REMOVE"),l&&!s){const p=Xe.DID_COMPLETE_ITEM_PROCESSING;p.info.translateX=jc,p.info.translateY=Tt,p.status.translateY=Tt,p.processingCompleteIndicator={opacity:1,scaleX:1,scaleY:1}}if(l&&!i&&(["DID_START_ITEM_PROCESSING","DID_REQUEST_ITEM_PROCESSING","DID_UPDATE_ITEM_PROCESS_PROGRESS","DID_THROW_ITEM_PROCESSING_ERROR"].forEach(p=>{Xe[p].status.translateY=Tt}),Xe.DID_THROW_ITEM_PROCESSING_ERROR.status.translateX=Yc),c&&s){n.RevertItemProcessing.align="BUTTON_REMOVE_ITEM_POSITION";const p=Xe.DID_COMPLETE_ITEM_PROCESSING;p.info.translateX=le,p.status.translateY=Tt,p.processingCompleteIndicator={opacity:1,scaleX:1,scaleY:1}}o||(n.RemoveItem.disabled=!0),Y(n,(p,_)=>{const E=e.createChildView(Ai,{label:e.query(_.label),icon:e.query(_.icon),opacity:0});d.includes(p)&&e.appendChildView(E),_.disabled&&(E.element.setAttribute("disabled","disabled"),E.element.setAttribute("hidden","hidden")),E.element.dataset.align=e.query(`GET_STYLE_${_.align}`),E.element.classList.add(_.className),E.on("click",g=>{g.stopPropagation(),!_.disabled&&e.dispatch(_.action,{query:r})}),e.ref[`button${p}`]=E}),e.ref.processingCompleteIndicator=e.appendChildView(e.createChildView(Qc)),e.ref.processingCompleteIndicator.element.dataset.align=e.query("GET_STYLE_BUTTON_PROCESS_ITEM_POSITION"),e.ref.info=e.appendChildView(e.createChildView(Vc,{id:r})),e.ref.status=e.appendChildView(e.createChildView(Wc,{id:r}));const f=e.appendChildView(e.createChildView(cs,{opacity:0,align:e.query("GET_STYLE_LOAD_INDICATOR_POSITION")}));f.element.classList.add("filepond--load-indicator"),e.ref.loadProgressIndicator=f;const m=e.appendChildView(e.createChildView(cs,{opacity:0,align:e.query("GET_STYLE_PROGRESS_INDICATOR_POSITION")}));m.element.classList.add("filepond--process-indicator"),e.ref.processProgressIndicator=m,e.ref.activeStyles=[]},Zc=({root:e,actions:t,props:n})=>{eu({root:e,actions:t,props:n});let r=t.concat().filter(s=>/^DID_/.test(s.type)).reverse().find(s=>Xe[s.type]);if(r){e.ref.activeStyles=[];const s=Xe[r.type];Y(Kc,(o,i)=>{const a=e.ref[o];Y(i,(l,c)=>{const u=s[o]&&typeof s[o][l]<"u"?s[o][l]:c;e.ref.activeStyles.push({control:a,key:l,value:u})})})}e.ref.activeStyles.forEach(({control:s,key:o,value:i})=>{s[o]=typeof i=="function"?i(e):i})},eu=se({DID_SET_LABEL_BUTTON_ABORT_ITEM_PROCESSING:({root:e,action:t})=>{e.ref.buttonAbortItemProcessing.label=t.value},DID_SET_LABEL_BUTTON_ABORT_ITEM_LOAD:({root:e,action:t})=>{e.ref.buttonAbortItemLoad.label=t.value},DID_SET_LABEL_BUTTON_ABORT_ITEM_REMOVAL:({root:e,action:t})=>{e.ref.buttonAbortItemRemoval.label=t.value},DID_REQUEST_ITEM_PROCESSING:({root:e})=>{e.ref.processProgressIndicator.spin=!0,e.ref.processProgressIndicator.progress=0},DID_START_ITEM_LOAD:({root:e})=>{e.ref.loadProgressIndicator.spin=!0,e.ref.loadProgressIndicator.progress=0},DID_START_ITEM_REMOVE:({root:e})=>{e.ref.processProgressIndicator.spin=!0,e.ref.processProgressIndicator.progress=0},DID_UPDATE_ITEM_LOAD_PROGRESS:({root:e,action:t})=>{e.ref.loadProgressIndicator.spin=!1,e.ref.loadProgressIndicator.progress=t.progress},DID_UPDATE_ITEM_PROCESS_PROGRESS:({root:e,action:t})=>{e.ref.processProgressIndicator.spin=!1,e.ref.processProgressIndicator.progress=t.progress}}),tu=K({create:Jc,write:Zc,didCreateView:e=>{Ge("CREATE_VIEW",{...e,view:e})},name:"file"}),nu=({root:e,props:t})=>{e.ref.fileName=Re("legend"),e.appendChild(e.ref.fileName),e.ref.file=e.appendChildView(e.createChildView(tu,{id:t.id})),e.ref.data=!1},ru=({root:e,props:t})=>{X(e.ref.fileName,er(e.query("GET_ITEM_NAME",t.id)))},su=K({create:nu,ignoreRect:!0,write:se({DID_LOAD_ITEM:ru}),didCreateView:e=>{Ge("CREATE_VIEW",{...e,view:e})},tag:"fieldset",name:"file-wrapper"}),ms={type:"spring",damping:.6,mass:7},iu=({root:e,props:t})=>{[{name:"top"},{name:"center",props:{translateY:null,scaleY:null},mixins:{animations:{scaleY:ms},styles:["translateY","scaleY"]}},{name:"bottom",props:{translateY:null},mixins:{animations:{translateY:ms},styles:["translateY"]}}].forEach(n=>{ou(e,n,t.name)}),e.element.classList.add(`filepond--${t.name}`),e.ref.scalable=null},ou=(e,t,n)=>{const r=K({name:`panel-${t.name} filepond--${n}`,mixins:t.mixins,ignoreRectUpdate:!0}),s=e.createChildView(r,t.props);e.ref[t.name]=e.appendChildView(s)},au=({root:e,props:t})=>{if((e.ref.scalable===null||t.scalable!==e.ref.scalable)&&(e.ref.scalable=ui(t.scalable)?t.scalable:!0,e.element.dataset.scalable=e.ref.scalable),!t.height)return;const n=e.ref.top.rect.element,r=e.ref.bottom.rect.element,s=Math.max(n.height+r.height,t.height);e.ref.center.translateY=n.height,e.ref.center.scaleY=(s-n.height-r.height)/100,e.ref.bottom.translateY=s-r.height},Ci=K({name:"panel",read:({root:e,props:t})=>t.heightCurrent=e.ref.bottom.translateY,write:au,create:iu,ignoreRect:!0,mixins:{apis:["height","heightCurrent","scalable"]}}),lu=e=>{const t=e.map(r=>r.id);let n;return{setIndex:r=>{n=r},getIndex:()=>n,getItemIndex:r=>t.indexOf(r.id)}},_s={type:"spring",stiffness:.75,damping:.45,mass:10},Es="spring",hs={DID_START_ITEM_LOAD:"busy",DID_UPDATE_ITEM_LOAD_PROGRESS:"loading",DID_THROW_ITEM_INVALID:"load-invalid",DID_THROW_ITEM_LOAD_ERROR:"load-error",DID_LOAD_ITEM:"idle",DID_THROW_ITEM_REMOVE_ERROR:"remove-error",DID_START_ITEM_REMOVE:"busy",DID_START_ITEM_PROCESSING:"busy processing",DID_REQUEST_ITEM_PROCESSING:"busy processing",DID_UPDATE_ITEM_PROCESS_PROGRESS:"processing",DID_COMPLETE_ITEM_PROCESSING:"processing-complete",DID_THROW_ITEM_PROCESSING_ERROR:"processing-error",DID_THROW_ITEM_PROCESSING_REVERT_ERROR:"processing-revert-error",DID_ABORT_ITEM_PROCESSING:"cancelled",DID_REVERT_ITEM_PROCESSING:"idle"},cu=({root:e,props:t})=>{if(e.ref.handleClick=r=>e.dispatch("DID_ACTIVATE_ITEM",{id:t.id}),e.element.id=`filepond--item-${t.id}`,e.element.addEventListener("click",e.ref.handleClick),e.ref.container=e.appendChildView(e.createChildView(su,{id:t.id})),e.ref.panel=e.appendChildView(e.createChildView(Ci,{name:"item-panel"})),e.ref.panel.height=null,t.markedForRemoval=!1,!e.query("GET_ALLOW_REORDER"))return;e.element.dataset.dragState="idle";const n=r=>{if(!r.isPrimary)return;let s=!1;const o={x:r.pageX,y:r.pageY};t.dragOrigin={x:e.translateX,y:e.translateY},t.dragCenter={x:r.offsetX,y:r.offsetY};const i=lu(e.query("GET_ACTIVE_ITEMS"));e.dispatch("DID_GRAB_ITEM",{id:t.id,dragState:i});const a=c=>{if(!c.isPrimary)return;c.stopPropagation(),c.preventDefault(),t.dragOffset={x:c.pageX-o.x,y:c.pageY-o.y},t.dragOffset.x*t.dragOffset.x+t.dragOffset.y*t.dragOffset.y>16&&!s&&(s=!0,e.element.removeEventListener("click",e.ref.handleClick)),e.dispatch("DID_DRAG_ITEM",{id:t.id,dragState:i})},l=c=>{c.isPrimary&&(document.removeEventListener("pointermove",a),document.removeEventListener("pointerup",l),t.dragOffset={x:c.pageX-o.x,y:c.pageY-o.y},e.dispatch("DID_DROP_ITEM",{id:t.id,dragState:i}),s&&setTimeout(()=>e.element.addEventListener("click",e.ref.handleClick),0))};document.addEventListener("pointermove",a),document.addEventListener("pointerup",l)};e.element.addEventListener("pointerdown",n)},uu=se({DID_UPDATE_PANEL_HEIGHT:({root:e,action:t})=>{e.height=t.height}}),du=se({DID_GRAB_ITEM:({root:e,props:t})=>{t.dragOrigin={x:e.translateX,y:e.translateY}},DID_DRAG_ITEM:({root:e})=>{e.element.dataset.dragState="drag"},DID_DROP_ITEM:({root:e,props:t})=>{t.dragOffset=null,t.dragOrigin=null,e.element.dataset.dragState="drop"}},({root:e,actions:t,props:n,shouldOptimize:r})=>{e.element.dataset.dragState==="drop"&&e.scaleX<=1&&(e.element.dataset.dragState="idle");let s=t.concat().filter(i=>/^DID_/.test(i.type)).reverse().find(i=>hs[i.type]);s&&s.type!==n.currentState&&(n.currentState=s.type,e.element.dataset.filepondItemState=hs[n.currentState]||"");const o=e.query("GET_ITEM_PANEL_ASPECT_RATIO")||e.query("GET_PANEL_ASPECT_RATIO");o?r||(e.height=e.rect.element.width*o):(uu({root:e,actions:t,props:n}),!e.height&&e.ref.container.rect.element.height>0&&(e.height=e.ref.container.rect.element.height)),r&&(e.ref.panel.height=null),e.ref.panel.height=e.height}),pu=K({create:cu,write:du,destroy:({root:e,props:t})=>{e.element.removeEventListener("click",e.ref.handleClick),e.dispatch("RELEASE_ITEM",{query:t.id})},tag:"li",name:"item",mixins:{apis:["id","interactionMethod","markedForRemoval","spawnDate","dragCenter","dragOrigin","dragOffset"],styles:["translateX","translateY","scaleX","scaleY","opacity","height"],animations:{scaleX:Es,scaleY:Es,translateX:_s,translateY:_s,opacity:{type:"tween",duration:150}}}});var tr=(e,t)=>Math.max(1,Math.floor((e+1)/t));const nr=(e,t,n)=>{if(!n)return;const r=e.rect.element.width,s=t.length;let o=null;if(s===0||n.top<t[0].rect.element.top)return-1;const a=t[0].rect.element,l=a.marginLeft+a.marginRight,c=a.width+l,u=tr(r,c);if(u===1){for(let m=0;m<s;m++){const p=t[m],_=p.rect.outer.top+p.rect.element.height*.5;if(n.top<_)return m}return s}const d=a.marginTop+a.marginBottom,f=a.height+d;for(let m=0;m<s;m++){const p=m%u,_=Math.floor(m/u),E=p*c,g=_*f,I=g-a.marginTop,T=E+c,O=g+f+a.marginBottom;if(n.top<O&&n.top>I){if(n.left<T)return m;m!==s-1?o=m:o=null}}return o!==null?o:s},gt={height:0,width:0,get getHeight(){return this.height},set setHeight(e){(this.height===0||e===0)&&(this.height=e)},get getWidth(){return this.width},set setWidth(e){(this.width===0||e===0)&&(this.width=e)},setDimensions:function(e,t){(this.height===0||e===0)&&(this.height=e),(this.width===0||t===0)&&(this.width=t)}},fu=({root:e})=>{z(e.element,"role","list"),e.ref.lastItemSpanwDate=Date.now()},mu=({root:e,action:t})=>{const{id:n,index:r,interactionMethod:s}=t;e.ref.addIndex=r;const o=Date.now();let i=o,a=1;if(s!==fe.NONE){a=0;const l=e.query("GET_ITEM_INSERT_INTERVAL"),c=o-e.ref.lastItemSpanwDate;i=c<l?o+(l-c):o}e.ref.lastItemSpanwDate=i,e.appendChildView(e.createChildView(pu,{spawnDate:i,id:n,opacity:a,interactionMethod:s}),r)},Ts=(e,t,n,r=0,s=1)=>{e.dragOffset?(e.translateX=null,e.translateY=null,e.translateX=e.dragOrigin.x+e.dragOffset.x,e.translateY=e.dragOrigin.y+e.dragOffset.y,e.scaleX=1.025,e.scaleY=1.025):(e.translateX=t,e.translateY=n,Date.now()>e.spawnDate&&(e.opacity===0&&_u(e,t,n,r,s),e.scaleX=1,e.scaleY=1,e.opacity=1))},_u=(e,t,n,r,s)=>{e.interactionMethod===fe.NONE?(e.translateX=null,e.translateX=t,e.translateY=null,e.translateY=n):e.interactionMethod===fe.DROP?(e.translateX=null,e.translateX=t-r*20,e.translateY=null,e.translateY=n-s*10,e.scaleX=.8,e.scaleY=.8):e.interactionMethod===fe.BROWSE?(e.translateY=null,e.translateY=n-30):e.interactionMethod===fe.API&&(e.translateX=null,e.translateX=t-30,e.translateY=null)},Eu=({root:e,action:t})=>{const{id:n}=t,r=e.childViews.find(s=>s.id===n);r&&(r.scaleX=.9,r.scaleY=.9,r.opacity=0,r.markedForRemoval=!0)},mn=e=>e.rect.element.height+e.rect.element.marginBottom*.5+e.rect.element.marginTop*.5,hu=e=>e.rect.element.width+e.rect.element.marginLeft*.5+e.rect.element.marginRight*.5,Tu=({root:e,action:t})=>{const{id:n,dragState:r}=t,s=e.query("GET_ITEM",{id:n}),o=e.childViews.find(E=>E.id===n),i=e.childViews.length,a=r.getItemIndex(s);if(!o)return;const l={x:o.dragOrigin.x+o.dragOffset.x+o.dragCenter.x,y:o.dragOrigin.y+o.dragOffset.y+o.dragCenter.y},c=mn(o),u=hu(o);let d=Math.floor(e.rect.outer.width/u);d>i&&(d=i);const f=Math.floor(i/d+1);gt.setHeight=c*f,gt.setWidth=u*d;var m={y:Math.floor(l.y/c),x:Math.floor(l.x/u),getGridIndex:function(){return l.y>gt.getHeight||l.y<0||l.x>gt.getWidth||l.x<0?a:this.y*d+this.x},getColIndex:function(){const g=e.query("GET_ACTIVE_ITEMS"),I=e.childViews.filter(w=>w.rect.element.height),T=g.map(w=>I.find(N=>N.id===w.id)),O=T.findIndex(w=>w===o),v=mn(o),L=T.length;let M=L,y=0,A=0,U=0;for(let w=0;w<L;w++)if(y=mn(T[w]),U=A,A=U+y,l.y<A){if(O>w){if(l.y<U+v){M=w;break}continue}M=w;break}return M}};const p=d>1?m.getGridIndex():m.getColIndex();e.dispatch("MOVE_ITEM",{query:o,index:p});const _=r.getIndex();if(_===void 0||_!==p){if(r.setIndex(p),_===void 0)return;e.dispatch("DID_REORDER_ITEMS",{items:e.query("GET_ACTIVE_ITEMS"),origin:a,target:p})}},gu=se({DID_ADD_ITEM:mu,DID_REMOVE_ITEM:Eu,DID_DRAG_ITEM:Tu}),Iu=({root:e,props:t,actions:n,shouldOptimize:r})=>{gu({root:e,props:t,actions:n});const{dragCoordinates:s}=t,o=e.rect.element.width,i=e.childViews.filter(T=>T.rect.element.height),a=e.query("GET_ACTIVE_ITEMS").map(T=>i.find(O=>O.id===T.id)).filter(T=>T),l=s?nr(e,a,s):null,c=e.ref.addIndex||null;e.ref.addIndex=null;let u=0,d=0,f=0;if(a.length===0)return;const m=a[0].rect.element,p=m.marginTop+m.marginBottom,_=m.marginLeft+m.marginRight,E=m.width+_,g=m.height+p,I=tr(o,E);if(I===1){let T=0,O=0;a.forEach((v,L)=>{if(l){let A=L-l;A===-2?O=-p*.25:A===-1?O=-p*.75:A===0?O=p*.75:A===1?O=p*.25:O=0}r&&(v.translateX=null,v.translateY=null),v.markedForRemoval||Ts(v,0,T+O);let y=(v.rect.element.height+p)*(v.markedForRemoval?v.opacity:1);T+=y})}else{let T=0,O=0;a.forEach((v,L)=>{L===l&&(u=1),L===c&&(f+=1),v.markedForRemoval&&v.opacity<.5&&(d-=1);const M=L+f+u+d,y=M%I,A=Math.floor(M/I),U=y*E,w=A*g,N=Math.sign(U-T),B=Math.sign(w-O);T=U,O=w,!v.markedForRemoval&&(r&&(v.translateX=null,v.translateY=null),Ts(v,U,w,N,B))})}},vu=(e,t)=>t.filter(n=>n.data&&n.data.id?e.id===n.data.id:!0),Ou=K({create:fu,write:Iu,tag:"ul",name:"list",didWriteView:({root:e})=>{e.childViews.filter(t=>t.markedForRemoval&&t.opacity===0&&t.resting).forEach(t=>{t._destroy(),e.removeChildView(t)})},filterFrameActionsForChild:vu,mixins:{apis:["dragCoordinates"]}}),yu=({root:e,props:t})=>{e.ref.list=e.appendChildView(e.createChildView(Ou)),t.dragCoordinates=null,t.overflowing=!1},Ru=({root:e,props:t,action:n})=>{e.query("GET_ITEM_INSERT_LOCATION_FREEDOM")&&(t.dragCoordinates={left:n.position.scopeLeft-e.ref.list.rect.element.left,top:n.position.scopeTop-(e.rect.outer.top+e.rect.element.marginTop+e.rect.element.scrollTop)})},Su=({props:e})=>{e.dragCoordinates=null},Au=se({DID_DRAG:Ru,DID_END_DRAG:Su}),Du=({root:e,props:t,actions:n})=>{if(Au({root:e,props:t,actions:n}),e.ref.list.dragCoordinates=t.dragCoordinates,t.overflowing&&!t.overflow&&(t.overflowing=!1,e.element.dataset.state="",e.height=null),t.overflow){const r=Math.round(t.overflow);r!==e.height&&(t.overflowing=!0,e.element.dataset.state="overflow",e.height=r)}},Lu=K({create:yu,write:Du,name:"list-scroller",mixins:{apis:["overflow","dragCoordinates"],styles:["height","translateY"],animations:{translateY:"spring"}}}),he=(e,t,n,r="")=>{n?z(e,t,r):e.removeAttribute(t)},bu=e=>{if(!(!e||e.value==="")){try{e.value=""}catch{}if(e.value){const t=Re("form"),n=e.parentNode,r=e.nextSibling;t.appendChild(e),t.reset(),r?n.insertBefore(e,r):n.appendChild(e)}}},Cu=({root:e,props:t})=>{e.element.id=`filepond--browser-${t.id}`,z(e.element,"name",e.query("GET_NAME")),z(e.element,"aria-controls",`filepond--assistant-${t.id}`),z(e.element,"aria-labelledby",`filepond--drop-label-${t.id}`),wi({root:e,action:{value:e.query("GET_ACCEPTED_FILE_TYPES")}}),Pi({root:e,action:{value:e.query("GET_ALLOW_MULTIPLE")}}),Ni({root:e,action:{value:e.query("GET_ALLOW_DIRECTORIES_ONLY")}}),Pn({root:e}),Mi({root:e,action:{value:e.query("GET_REQUIRED")}}),Ui({root:e,action:{value:e.query("GET_CAPTURE_METHOD")}}),e.ref.handleChange=n=>{if(!e.element.value)return;const r=Array.from(e.element.files).map(s=>(s._relativePath=s.webkitRelativePath,s));setTimeout(()=>{t.onload(r),bu(e.element)},250)},e.element.addEventListener("change",e.ref.handleChange)},wi=({root:e,action:t})=>{e.query("GET_ALLOW_SYNC_ACCEPT_ATTRIBUTE")&&he(e.element,"accept",!!t.value,t.value?t.value.join(","):"")},Pi=({root:e,action:t})=>{he(e.element,"multiple",t.value)},Ni=({root:e,action:t})=>{he(e.element,"webkitdirectory",t.value)},Pn=({root:e})=>{const t=e.query("GET_DISABLED"),n=e.query("GET_ALLOW_BROWSE"),r=t||!n;he(e.element,"disabled",r)},Mi=({root:e,action:t})=>{t.value?e.query("GET_TOTAL_ITEMS")===0&&he(e.element,"required",!0):he(e.element,"required",!1)},Ui=({root:e,action:t})=>{he(e.element,"capture",!!t.value,t.value===!0?"":t.value)},gs=({root:e})=>{const{element:t}=e;e.query("GET_TOTAL_ITEMS")>0?(he(t,"required",!1),he(t,"name",!1)):(he(t,"name",!0,e.query("GET_NAME")),e.query("GET_CHECK_VALIDITY")&&t.setCustomValidity(""),e.query("GET_REQUIRED")&&he(t,"required",!0))},wu=({root:e})=>{e.query("GET_CHECK_VALIDITY")&&e.element.setCustomValidity(e.query("GET_LABEL_INVALID_FIELD"))},Pu=K({tag:"input",name:"browser",ignoreRect:!0,ignoreRectUpdate:!0,attributes:{type:"file"},create:Cu,destroy:({root:e})=>{e.element.removeEventListener("change",e.ref.handleChange)},write:se({DID_LOAD_ITEM:gs,DID_REMOVE_ITEM:gs,DID_THROW_ITEM_INVALID:wu,DID_SET_DISABLED:Pn,DID_SET_ALLOW_BROWSE:Pn,DID_SET_ALLOW_DIRECTORIES_ONLY:Ni,DID_SET_ALLOW_MULTIPLE:Pi,DID_SET_ACCEPTED_FILE_TYPES:wi,DID_SET_CAPTURE_METHOD:Ui,DID_SET_REQUIRED:Mi})}),Is={ENTER:13,SPACE:32},Nu=({root:e,props:t})=>{const n=Re("label");z(n,"for",`filepond--browser-${t.id}`),z(n,"id",`filepond--drop-label-${t.id}`),z(n,"aria-hidden","true"),e.ref.handleKeyDown=r=>{(r.keyCode===Is.ENTER||r.keyCode===Is.SPACE)&&(r.preventDefault(),e.ref.label.click())},e.ref.handleClick=r=>{r.target===n||n.contains(r.target)||e.ref.label.click()},n.addEventListener("keydown",e.ref.handleKeyDown),e.element.addEventListener("click",e.ref.handleClick),qi(n,t.caption),e.appendChild(n),e.ref.label=n},qi=(e,t)=>{e.innerHTML=t;const n=e.querySelector(".filepond--label-action");return n&&z(n,"tabindex","0"),t},Mu=K({name:"drop-label",ignoreRect:!0,create:Nu,destroy:({root:e})=>{e.ref.label.addEventListener("keydown",e.ref.handleKeyDown),e.element.removeEventListener("click",e.ref.handleClick)},write:se({DID_SET_LABEL_IDLE:({root:e,action:t})=>{qi(e.ref.label,t.value)}}),mixins:{styles:["opacity","translateX","translateY"],animations:{opacity:{type:"tween",duration:150},translateX:"spring",translateY:"spring"}}}),Uu=K({name:"drip-blob",ignoreRect:!0,mixins:{styles:["translateX","translateY","scaleX","scaleY","opacity"],animations:{scaleX:"spring",scaleY:"spring",translateX:"spring",translateY:"spring",opacity:{type:"tween",duration:250}}}}),qu=({root:e})=>{const t=e.rect.element.width*.5,n=e.rect.element.height*.5;e.ref.blob=e.appendChildView(e.createChildView(Uu,{opacity:0,scaleX:2.5,scaleY:2.5,translateX:t,translateY:n}))},Bu=({root:e,action:t})=>{if(!e.ref.blob){qu({root:e});return}e.ref.blob.translateX=t.position.scopeLeft,e.ref.blob.translateY=t.position.scopeTop,e.ref.blob.scaleX=1,e.ref.blob.scaleY=1,e.ref.blob.opacity=1},$u=({root:e})=>{e.ref.blob&&(e.ref.blob.opacity=0)},Vu=({root:e})=>{e.ref.blob&&(e.ref.blob.scaleX=2.5,e.ref.blob.scaleY=2.5,e.ref.blob.opacity=0)},Gu=({root:e,props:t,actions:n})=>{Hu({root:e,props:t,actions:n});const{blob:r}=e.ref;n.length===0&&r&&r.opacity===0&&(e.removeChildView(r),e.ref.blob=null)},Hu=se({DID_DRAG:Bu,DID_DROP:Vu,DID_END_DRAG:$u}),xu=K({ignoreRect:!0,ignoreRectUpdate:!0,name:"drip",write:Gu}),Bi=(e,t)=>{try{const n=new DataTransfer;t.forEach(r=>{r instanceof File?n.items.add(r):n.items.add(new File([r],r.name,{type:r.type}))}),e.files=n.files}catch{return!1}return!0},ku=({root:e})=>e.ref.fields={},Ft=(e,t)=>e.ref.fields[t],rr=e=>{e.query("GET_ACTIVE_ITEMS").forEach(t=>{e.ref.fields[t.id]&&e.element.appendChild(e.ref.fields[t.id])})},vs=({root:e})=>rr(e),Fu=({root:e,action:t})=>{const s=!(e.query("GET_ITEM",t.id).origin===Q.LOCAL)&&e.query("SHOULD_UPDATE_FILE_INPUT"),o=Re("input");o.type=s?"file":"hidden",o.name=e.query("GET_NAME"),o.disabled=e.query("GET_DISABLED"),e.ref.fields[t.id]=o,rr(e)},Wu=({root:e,action:t})=>{const n=Ft(e,t.id);if(!n||(t.serverFileReference!==null&&(n.value=t.serverFileReference),!e.query("SHOULD_UPDATE_FILE_INPUT")))return;const r=e.query("GET_ITEM",t.id);Bi(n,[r.file])},Yu=({root:e,action:t})=>{e.query("SHOULD_UPDATE_FILE_INPUT")&&setTimeout(()=>{const n=Ft(e,t.id);n&&Bi(n,[t.file])},0)},ju=({root:e})=>{e.element.disabled=e.query("GET_DISABLED")},Xu=({root:e,action:t})=>{const n=Ft(e,t.id);n&&(n.parentNode&&n.parentNode.removeChild(n),delete e.ref.fields[t.id])},zu=({root:e,action:t})=>{const n=Ft(e,t.id);n&&(t.value===null?n.removeAttribute("value"):n.type!="file"&&(n.value=t.value),rr(e))},Ku=se({DID_SET_DISABLED:ju,DID_ADD_ITEM:Fu,DID_LOAD_ITEM:Wu,DID_REMOVE_ITEM:Xu,DID_DEFINE_VALUE:zu,DID_PREPARE_OUTPUT:Yu,DID_REORDER_ITEMS:vs,DID_SORT_ITEMS:vs}),Qu=K({tag:"fieldset",name:"data",create:ku,write:Ku,ignoreRect:!0}),Ju=e=>"getRootNode"in e?e.getRootNode():document,Zu=["jpg","jpeg","png","gif","bmp","webp","svg","tiff"],ed=["css","csv","html","txt"],td={zip:"zip|compressed",epub:"application/epub+zip"},$i=(e="")=>(e=e.toLowerCase(),Zu.includes(e)?"image/"+(e==="jpg"?"jpeg":e==="svg"?"svg+xml":e):ed.includes(e)?"text/"+e:td[e]||""),sr=e=>new Promise((t,n)=>{const r=cd(e);if(r.length&&!nd(e))return t(r);rd(e).then(t)}),nd=e=>e.files?e.files.length>0:!1,rd=e=>new Promise((t,n)=>{const r=(e.items?Array.from(e.items):[]).filter(s=>sd(s)).map(s=>id(s));if(!r.length){t(e.files?Array.from(e.files):[]);return}Promise.all(r).then(s=>{const o=[];s.forEach(i=>{o.push.apply(o,i)}),t(o.filter(i=>i).map(i=>(i._relativePath||(i._relativePath=i.webkitRelativePath),i)))}).catch(console.error)}),sd=e=>{if(Vi(e)){const t=ir(e);if(t)return t.isFile||t.isDirectory}return e.kind==="file"},id=e=>new Promise((t,n)=>{if(ld(e)){od(ir(e)).then(t).catch(n);return}t([e.getAsFile()])}),od=e=>new Promise((t,n)=>{const r=[];let s=0,o=0;const i=()=>{o===0&&s===0&&t(r)},a=l=>{s++;const c=l.createReader(),u=()=>{c.readEntries(d=>{if(d.length===0){s--,i();return}d.forEach(f=>{f.isDirectory?a(f):(o++,f.file(m=>{const p=ad(m);f.fullPath&&(p._relativePath=f.fullPath),r.push(p),o--,i()}))}),u()},n)};u()};a(e)}),ad=e=>{if(e.type.length)return e;const t=e.lastModifiedDate,n=e.name,r=$i(kt(e.name));return r.length&&(e=e.slice(0,e.size,r),e.name=n,e.lastModifiedDate=t),e},ld=e=>Vi(e)&&(ir(e)||{}).isDirectory,Vi=e=>"webkitGetAsEntry"in e,ir=e=>e.webkitGetAsEntry(),cd=e=>{let t=[];try{if(t=dd(e),t.length)return t;t=ud(e)}catch{}return t},ud=e=>{let t=e.getData("url");return typeof t=="string"&&t.length?[t]:[]},dd=e=>{let t=e.getData("text/html");if(typeof t=="string"&&t.length){const n=t.match(/src\s*=\s*"(.+?)"/);if(n)return[n[1]]}return[]},Nt=[],$e=e=>({pageLeft:e.pageX,pageTop:e.pageY,scopeLeft:e.offsetX||e.layerX,scopeTop:e.offsetY||e.layerY}),pd=(e,t,n)=>{const r=fd(t),s={element:e,filterElement:n,state:null,ondrop:()=>{},onenter:()=>{},ondrag:()=>{},onexit:()=>{},onload:()=>{},allowdrop:()=>{}};return s.destroy=r.addListener(s),s},fd=e=>{const t=Nt.find(r=>r.element===e);if(t)return t;const n=md(e);return Nt.push(n),n},md=e=>{const t=[],n={dragenter:Ed,dragover:hd,dragleave:gd,drop:Td},r={};Y(n,(o,i)=>{r[o]=i(e,t),e.addEventListener(o,r[o],!1)});const s={element:e,addListener:o=>(t.push(o),()=>{t.splice(t.indexOf(o),1),t.length===0&&(Nt.splice(Nt.indexOf(s),1),Y(n,i=>{e.removeEventListener(i,r[i],!1)}))})};return s},_d=(e,t)=>("elementFromPoint"in e||(e=document),e.elementFromPoint(t.x,t.y)),or=(e,t)=>{const n=Ju(t),r=_d(n,{x:e.pageX-window.pageXOffset,y:e.pageY-window.pageYOffset});return r===t||t.contains(r)};let Gi=null;const It=(e,t)=>{try{e.dropEffect=t}catch{}},Ed=(e,t)=>n=>{n.preventDefault(),Gi=n.target,t.forEach(r=>{const{element:s,onenter:o}=r;or(n,s)&&(r.state="enter",o($e(n)))})},hd=(e,t)=>n=>{n.preventDefault();const r=n.dataTransfer;sr(r).then(s=>{let o=!1;t.some(i=>{const{filterElement:a,element:l,onenter:c,onexit:u,ondrag:d,allowdrop:f}=i;It(r,"copy");const m=f(s);if(!m){It(r,"none");return}if(or(n,l)){if(o=!0,i.state===null){i.state="enter",c($e(n));return}if(i.state="over",a&&!m){It(r,"none");return}d($e(n))}else a&&!o&&It(r,"none"),i.state&&(i.state=null,u($e(n)))})})},Td=(e,t)=>n=>{n.preventDefault();const r=n.dataTransfer;sr(r).then(s=>{t.forEach(o=>{const{filterElement:i,element:a,ondrop:l,onexit:c,allowdrop:u}=o;if(o.state=null,!(i&&!or(n,a))){if(!u(s))return c($e(n));l($e(n),s)}})})},gd=(e,t)=>n=>{Gi===n.target&&t.forEach(r=>{const{onexit:s}=r;r.state=null,s($e(n))})},Id=(e,t,n)=>{e.classList.add("filepond--hopper");const{catchesDropsOnPage:r,requiresDropOnElement:s,filterItems:o=u=>u}=n,i=pd(e,r?document.documentElement:e,s);let a="",l="";i.allowdrop=u=>t(o(u)),i.ondrop=(u,d)=>{const f=o(d);if(!t(f)){c.ondragend(u);return}l="drag-drop",c.onload(f,u)},i.ondrag=u=>{c.ondrag(u)},i.onenter=u=>{l="drag-over",c.ondragstart(u)},i.onexit=u=>{l="drag-exit",c.ondragend(u)};const c={updateHopperState:()=>{a!==l&&(e.dataset.hopperState=l,a=l)},onload:()=>{},ondragstart:()=>{},ondrag:()=>{},ondragend:()=>{},destroy:()=>{i.destroy()}};return c};let Nn=!1;const Ke=[],Hi=e=>{const t=document.activeElement;if(t&&/textarea|input/i.test(t.nodeName)){let n=!1,r=t;for(;r!==document.body;){if(r.classList.contains("filepond--root")){n=!0;break}r=r.parentNode}if(!n)return}sr(e.clipboardData).then(n=>{n.length&&Ke.forEach(r=>r(n))})},vd=e=>{Ke.includes(e)||(Ke.push(e),!Nn&&(Nn=!0,document.addEventListener("paste",Hi)))},Od=e=>{Qn(Ke,Ke.indexOf(e)),Ke.length===0&&(document.removeEventListener("paste",Hi),Nn=!1)},yd=()=>{const e=n=>{t.onload(n)},t={destroy:()=>{Od(e)},onload:()=>{}};return vd(e),t},Rd=({root:e,props:t})=>{e.element.id=`filepond--assistant-${t.id}`,z(e.element,"role","status"),z(e.element,"aria-live","polite"),z(e.element,"aria-relevant","additions")};let Os=null,ys=null;const _n=[],Wt=(e,t)=>{e.element.textContent=t},Sd=e=>{e.element.textContent=""},xi=(e,t,n)=>{const r=e.query("GET_TOTAL_ITEMS");Wt(e,`${n} ${t}, ${r} ${r===1?e.query("GET_LABEL_FILE_COUNT_SINGULAR"):e.query("GET_LABEL_FILE_COUNT_PLURAL")}`),clearTimeout(ys),ys=setTimeout(()=>{Sd(e)},1500)},ki=e=>e.element.parentNode.contains(document.activeElement),Ad=({root:e,action:t})=>{if(!ki(e))return;e.element.textContent="";const n=e.query("GET_ITEM",t.id);_n.push(n.filename),clearTimeout(Os),Os=setTimeout(()=>{xi(e,_n.join(", "),e.query("GET_LABEL_FILE_ADDED")),_n.length=0},750)},Dd=({root:e,action:t})=>{if(!ki(e))return;const n=t.item;xi(e,n.filename,e.query("GET_LABEL_FILE_REMOVED"))},Ld=({root:e,action:t})=>{const r=e.query("GET_ITEM",t.id).filename,s=e.query("GET_LABEL_FILE_PROCESSING_COMPLETE");Wt(e,`${r} ${s}`)},Rs=({root:e,action:t})=>{const r=e.query("GET_ITEM",t.id).filename,s=e.query("GET_LABEL_FILE_PROCESSING_ABORTED");Wt(e,`${r} ${s}`)},vt=({root:e,action:t})=>{const r=e.query("GET_ITEM",t.id).filename;Wt(e,`${t.status.main} ${r} ${t.status.sub}`)},bd=K({create:Rd,ignoreRect:!0,ignoreRectUpdate:!0,write:se({DID_LOAD_ITEM:Ad,DID_REMOVE_ITEM:Dd,DID_COMPLETE_ITEM_PROCESSING:Ld,DID_ABORT_ITEM_PROCESSING:Rs,DID_REVERT_ITEM_PROCESSING:Rs,DID_THROW_ITEM_REMOVE_ERROR:vt,DID_THROW_ITEM_LOAD_ERROR:vt,DID_THROW_ITEM_INVALID:vt,DID_THROW_ITEM_PROCESSING_ERROR:vt}),tag:"span",name:"assistant"}),Fi=(e,t="-")=>e.replace(new RegExp(`${t}.`,"g"),n=>n.charAt(1).toUpperCase()),Wi=(e,t=16,n=!0)=>{let r=Date.now(),s=null;return(...o)=>{clearTimeout(s);const i=Date.now()-r,a=()=>{r=Date.now(),e(...o)};i<t?n||(s=setTimeout(a,t-i)):a()}},Cd=1e6,Mt=e=>e.preventDefault(),wd=({root:e,props:t})=>{const n=e.query("GET_ID");n&&(e.element.id=n);const r=e.query("GET_CLASS_NAME");r&&r.split(" ").filter(l=>l.length).forEach(l=>{e.element.classList.add(l)}),e.ref.label=e.appendChildView(e.createChildView(Mu,{...t,translateY:null,caption:e.query("GET_LABEL_IDLE")})),e.ref.list=e.appendChildView(e.createChildView(Lu,{translateY:null})),e.ref.panel=e.appendChildView(e.createChildView(Ci,{name:"panel-root"})),e.ref.assistant=e.appendChildView(e.createChildView(bd,{...t})),e.ref.data=e.appendChildView(e.createChildView(Qu,{...t})),e.ref.measure=Re("div"),e.ref.measure.style.height="100%",e.element.appendChild(e.ref.measure),e.ref.bounds=null,e.query("GET_STYLES").filter(l=>!ye(l.value)).map(({name:l,value:c})=>{e.element.dataset[l]=c}),e.ref.widthPrevious=null,e.ref.widthUpdated=Wi(()=>{e.ref.updateHistory=[],e.dispatch("DID_RESIZE_ROOT")},250),e.ref.previousAspectRatio=null,e.ref.updateHistory=[];const s=window.matchMedia("(pointer: fine) and (hover: hover)").matches,o="PointerEvent"in window;e.query("GET_ALLOW_REORDER")&&o&&!s&&(e.element.addEventListener("touchmove",Mt,{passive:!1}),e.element.addEventListener("gesturestart",Mt));const i=e.query("GET_CREDITS");if(i.length===2){const l=document.createElement("a");l.className="filepond--credits",l.setAttribute("aria-hidden","true"),l.href=i[0],l.tabindex=-1,l.target="_blank",l.rel="noopener noreferrer",l.textContent=i[1],e.element.appendChild(l),e.ref.credits=l}},Pd=({root:e,props:t,actions:n})=>{if(Bd({root:e,props:t,actions:n}),n.filter(L=>/^DID_SET_STYLE_/.test(L.type)).filter(L=>!ye(L.data.value)).map(({type:L,data:M})=>{const y=Fi(L.substring(8).toLowerCase(),"_");e.element.dataset[y]=M.value,e.invalidateLayout()}),e.rect.element.hidden)return;e.rect.element.width!==e.ref.widthPrevious&&(e.ref.widthPrevious=e.rect.element.width,e.ref.widthUpdated());let r=e.ref.bounds;r||(r=e.ref.bounds=Ud(e),e.element.removeChild(e.ref.measure),e.ref.measure=null);const{hopper:s,label:o,list:i,panel:a}=e.ref;s&&s.updateHopperState();const l=e.query("GET_PANEL_ASPECT_RATIO"),c=e.query("GET_ALLOW_MULTIPLE"),u=e.query("GET_TOTAL_ITEMS"),d=c?e.query("GET_MAX_FILES")||Cd:1,f=u===d,m=n.find(L=>L.type==="DID_ADD_ITEM");if(f&&m){const L=m.data.interactionMethod;o.opacity=0,c?o.translateY=-40:L===fe.API?o.translateX=40:L===fe.BROWSE?o.translateY=40:o.translateY=30}else f||(o.opacity=1,o.translateX=0,o.translateY=0);const p=Nd(e),_=Md(e),E=o.rect.element.height,g=!c||f?0:E,I=f?i.rect.element.marginTop:0,T=u===0?0:i.rect.element.marginBottom,O=g+I+_.visual+T,v=g+I+_.bounds+T;if(i.translateY=Math.max(0,g-i.rect.element.marginTop)-p.top,l){const L=e.rect.element.width,M=L*l;l!==e.ref.previousAspectRatio&&(e.ref.previousAspectRatio=l,e.ref.updateHistory=[]);const y=e.ref.updateHistory;y.push(L);const A=2;if(y.length>A*2){const w=y.length,N=w-10;let B=0;for(let b=w;b>=N;b--)if(y[b]===y[b-2]&&B++,B>=A)return}a.scalable=!1,a.height=M;const U=M-g-(T-p.bottom)-(f?I:0);_.visual>U?i.overflow=U:i.overflow=null,e.height=M}else if(r.fixedHeight){a.scalable=!1;const L=r.fixedHeight-g-(T-p.bottom)-(f?I:0);_.visual>L?i.overflow=L:i.overflow=null}else if(r.cappedHeight){const L=O>=r.cappedHeight,M=Math.min(r.cappedHeight,O);a.scalable=!0,a.height=L?M:M-p.top-p.bottom;const y=M-g-(T-p.bottom)-(f?I:0);O>r.cappedHeight&&_.visual>y?i.overflow=y:i.overflow=null,e.height=Math.min(r.cappedHeight,v-p.top-p.bottom)}else{const L=u>0?p.top+p.bottom:0;a.scalable=!0,a.height=Math.max(E,O-L),e.height=Math.max(E,v-L)}e.ref.credits&&a.heightCurrent&&(e.ref.credits.style.transform=`translateY(${a.heightCurrent}px)`)},Nd=e=>{const t=e.ref.list.childViews[0].childViews[0];return t?{top:t.rect.element.marginTop,bottom:t.rect.element.marginBottom}:{top:0,bottom:0}},Md=e=>{let t=0,n=0;const r=e.ref.list,s=r.childViews[0],o=s.childViews.filter(I=>I.rect.element.height),i=e.query("GET_ACTIVE_ITEMS").map(I=>o.find(T=>T.id===I.id)).filter(I=>I);if(i.length===0)return{visual:t,bounds:n};const a=s.rect.element.width,l=nr(s,i,r.dragCoordinates),c=i[0].rect.element,u=c.marginTop+c.marginBottom,d=c.marginLeft+c.marginRight,f=c.width+d,m=c.height+u,p=typeof l<"u"&&l>=0?1:0,_=i.find(I=>I.markedForRemoval&&I.opacity<.45)?-1:0,E=i.length+p+_,g=tr(a,f);return g===1?i.forEach(I=>{const T=I.rect.element.height+u;n+=T,t+=T*I.opacity}):(n=Math.ceil(E/g)*m,t=n),{visual:t,bounds:n}},Ud=e=>{const t=e.ref.measureHeight||null;return{cappedHeight:parseInt(e.style.maxHeight,10)||null,fixedHeight:t===0?null:t}},ar=(e,t)=>{const n=e.query("GET_ALLOW_REPLACE"),r=e.query("GET_ALLOW_MULTIPLE"),s=e.query("GET_TOTAL_ITEMS");let o=e.query("GET_MAX_FILES");const i=t.length;return!r&&i>1?(e.dispatch("DID_THROW_MAX_FILES",{source:t,error:j("warning",0,"Max files")}),!0):(o=r?o:1,!r&&n?!1:tt(o)&&s+i>o?(e.dispatch("DID_THROW_MAX_FILES",{source:t,error:j("warning",0,"Max files")}),!0):!1)},qd=(e,t,n)=>{const r=e.childViews[0];return nr(r,t,{left:n.scopeLeft-r.rect.element.left,top:n.scopeTop-(e.rect.outer.top+e.rect.element.marginTop+e.rect.element.scrollTop)})},Ss=e=>{const t=e.query("GET_ALLOW_DROP"),n=e.query("GET_DISABLED"),r=t&&!n;if(r&&!e.ref.hopper){const s=Id(e.element,o=>{const i=e.query("GET_BEFORE_DROP_FILE")||(()=>!0);return e.query("GET_DROP_VALIDATION")?o.every(l=>Ge("ALLOW_HOPPER_ITEM",l,{query:e.query}).every(c=>c===!0)&&i(l)):!0},{filterItems:o=>{const i=e.query("GET_IGNORED_FILES");return o.filter(a=>Je(a)?!i.includes(a.name.toLowerCase()):!0)},catchesDropsOnPage:e.query("GET_DROP_ON_PAGE"),requiresDropOnElement:e.query("GET_DROP_ON_ELEMENT")});s.onload=(o,i)=>{const l=e.ref.list.childViews[0].childViews.filter(u=>u.rect.element.height),c=e.query("GET_ACTIVE_ITEMS").map(u=>l.find(d=>d.id===u.id)).filter(u=>u);me("ADD_ITEMS",o,{dispatch:e.dispatch}).then(u=>{if(ar(e,u))return!1;e.dispatch("ADD_ITEMS",{items:u,index:qd(e.ref.list,c,i),interactionMethod:fe.DROP})}),e.dispatch("DID_DROP",{position:i}),e.dispatch("DID_END_DRAG",{position:i})},s.ondragstart=o=>{e.dispatch("DID_START_DRAG",{position:o})},s.ondrag=Wi(o=>{e.dispatch("DID_DRAG",{position:o})}),s.ondragend=o=>{e.dispatch("DID_END_DRAG",{position:o})},e.ref.hopper=s,e.ref.drip=e.appendChildView(e.createChildView(xu))}else!r&&e.ref.hopper&&(e.ref.hopper.destroy(),e.ref.hopper=null,e.removeChildView(e.ref.drip))},As=(e,t)=>{const n=e.query("GET_ALLOW_BROWSE"),r=e.query("GET_DISABLED"),s=n&&!r;s&&!e.ref.browser?e.ref.browser=e.appendChildView(e.createChildView(Pu,{...t,onload:o=>{me("ADD_ITEMS",o,{dispatch:e.dispatch}).then(i=>{if(ar(e,i))return!1;e.dispatch("ADD_ITEMS",{items:i,index:-1,interactionMethod:fe.BROWSE})})}}),0):!s&&e.ref.browser&&(e.removeChildView(e.ref.browser),e.ref.browser=null)},Ds=e=>{const t=e.query("GET_ALLOW_PASTE"),n=e.query("GET_DISABLED"),r=t&&!n;r&&!e.ref.paster?(e.ref.paster=yd(),e.ref.paster.onload=s=>{me("ADD_ITEMS",s,{dispatch:e.dispatch}).then(o=>{if(ar(e,o))return!1;e.dispatch("ADD_ITEMS",{items:o,index:-1,interactionMethod:fe.PASTE})})}):!r&&e.ref.paster&&(e.ref.paster.destroy(),e.ref.paster=null)},Bd=se({DID_SET_ALLOW_BROWSE:({root:e,props:t})=>{As(e,t)},DID_SET_ALLOW_DROP:({root:e})=>{Ss(e)},DID_SET_ALLOW_PASTE:({root:e})=>{Ds(e)},DID_SET_DISABLED:({root:e,props:t})=>{Ss(e),Ds(e),As(e,t),e.query("GET_DISABLED")?e.element.dataset.disabled="disabled":e.element.removeAttribute("data-disabled")}}),$d=K({name:"root",read:({root:e})=>{e.ref.measure&&(e.ref.measureHeight=e.ref.measure.offsetHeight)},create:wd,write:Pd,destroy:({root:e})=>{e.ref.paster&&e.ref.paster.destroy(),e.ref.hopper&&e.ref.hopper.destroy(),e.element.removeEventListener("touchmove",Mt),e.element.removeEventListener("gesturestart",Mt)},mixins:{styles:["height"]}}),Vd=(e={})=>{let t=null;const n=Pt(),r=nl(Hl(n),[ic,Fl(n)],[Cc,kl(n)]);r.dispatch("SET_OPTIONS",{options:e});const s=()=>{document.hidden||r.dispatch("KICK")};document.addEventListener("visibilitychange",s);let o=null,i=!1,a=!1,l=null,c=null;const u=()=>{i||(i=!0),clearTimeout(o),o=setTimeout(()=>{i=!1,l=null,c=null,a&&(a=!1,r.dispatch("DID_STOP_RESIZE"))},500)};window.addEventListener("resize",u);const d=$d(r,{id:Kn()});let f=!1,m=!1;const p={_read:()=>{i&&(c=window.innerWidth,l||(l=c),!a&&c!==l&&(r.dispatch("DID_START_RESIZE"),a=!0)),m&&f&&(f=d.element.offsetParent===null),!f&&(d._read(),m=d.rect.element.hidden)},_write:R=>{const C=r.processActionQueue().filter(V=>!/^SET_/.test(V.type));f&&!C.length||(I(C),f=d._write(R,C,a),jl(r.query("GET_ITEMS")),f&&r.processDispatchQueue())}},_=R=>C=>{const V={type:R};if(!C)return V;if(C.hasOwnProperty("error")&&(V.error=C.error?{...C.error}:null),C.status&&(V.status={...C.status}),C.file&&(V.output=C.file),C.source)V.file=C.source;else if(C.item||C.id){const $=C.item?C.item:r.query("GET_ITEM",C.id);V.file=$?ae($):null}return C.items&&(V.items=C.items.map(ae)),/progress/.test(R)&&(V.progress=C.progress),C.hasOwnProperty("origin")&&C.hasOwnProperty("target")&&(V.origin=C.origin,V.target=C.target),V},E={DID_DESTROY:_("destroy"),DID_INIT:_("init"),DID_THROW_MAX_FILES:_("warning"),DID_INIT_ITEM:_("initfile"),DID_START_ITEM_LOAD:_("addfilestart"),DID_UPDATE_ITEM_LOAD_PROGRESS:_("addfileprogress"),DID_LOAD_ITEM:_("addfile"),DID_THROW_ITEM_INVALID:[_("error"),_("addfile")],DID_THROW_ITEM_LOAD_ERROR:[_("error"),_("addfile")],DID_THROW_ITEM_REMOVE_ERROR:[_("error"),_("removefile")],DID_PREPARE_OUTPUT:_("preparefile"),DID_START_ITEM_PROCESSING:_("processfilestart"),DID_UPDATE_ITEM_PROCESS_PROGRESS:_("processfileprogress"),DID_ABORT_ITEM_PROCESSING:_("processfileabort"),DID_COMPLETE_ITEM_PROCESSING:_("processfile"),DID_COMPLETE_ITEM_PROCESSING_ALL:_("processfiles"),DID_REVERT_ITEM_PROCESSING:_("processfilerevert"),DID_THROW_ITEM_PROCESSING_ERROR:[_("error"),_("processfile")],DID_REMOVE_ITEM:_("removefile"),DID_UPDATE_ITEMS:_("updatefiles"),DID_ACTIVATE_ITEM:_("activatefile"),DID_REORDER_ITEMS:_("reorderfiles")},g=R=>{const C={pond:H,...R};delete C.type,d.element.dispatchEvent(new CustomEvent(`FilePond:${R.type}`,{detail:C,bubbles:!0,cancelable:!0,composed:!0}));const V=[];R.hasOwnProperty("error")&&V.push(R.error),R.hasOwnProperty("file")&&V.push(R.file);const $=["type","error","file"];Object.keys(R).filter(W=>!$.includes(W)).forEach(W=>V.push(R[W])),H.fire(R.type,...V);const k=r.query(`GET_ON${R.type.toUpperCase()}`);k&&k(...V)},I=R=>{R.length&&R.filter(C=>E[C.type]).forEach(C=>{const V=E[C.type];(Array.isArray(V)?V:[V]).forEach($=>{C.type==="DID_INIT_ITEM"?g($(C.data)):setTimeout(()=>{g($(C.data))},0)})})},T=R=>r.dispatch("SET_OPTIONS",{options:R}),O=R=>r.query("GET_ACTIVE_ITEM",R),v=R=>new Promise((C,V)=>{r.dispatch("REQUEST_ITEM_PREPARE",{query:R,success:$=>{C($)},failure:$=>{V($)}})}),L=(R,C={})=>new Promise((V,$)=>{A([{source:R,options:C}],{index:C.index}).then(k=>V(k&&k[0])).catch($)}),M=R=>R.file&&R.id,y=(R,C)=>(typeof R=="object"&&!M(R)&&!C&&(C=R,R=void 0),r.dispatch("REMOVE_ITEM",{...C,query:R}),r.query("GET_ACTIVE_ITEM",R)===null),A=(...R)=>new Promise((C,V)=>{const $=[],k={};if(Vt(R[0]))$.push.apply($,R[0]),Object.assign(k,R[1]||{});else{const W=R[R.length-1];typeof W=="object"&&!(W instanceof Blob)&&Object.assign(k,R.pop()),$.push(...R)}r.dispatch("ADD_ITEMS",{items:$,index:k.index,interactionMethod:fe.API,success:C,failure:V})}),U=()=>r.query("GET_ACTIVE_ITEMS"),w=R=>new Promise((C,V)=>{r.dispatch("REQUEST_ITEM_PROCESSING",{query:R,success:$=>{C($)},failure:$=>{V($)}})}),N=(...R)=>{const C=Array.isArray(R[0])?R[0]:R,V=C.length?C:U();return Promise.all(V.map(v))},B=(...R)=>{const C=Array.isArray(R[0])?R[0]:R;if(!C.length){const V=U().filter($=>!($.status===x.IDLE&&$.origin===Q.LOCAL)&&$.status!==x.PROCESSING&&$.status!==x.PROCESSING_COMPLETE&&$.status!==x.PROCESSING_REVERT_ERROR);return Promise.all(V.map(w))}return Promise.all(C.map(w))},b=(...R)=>{const C=Array.isArray(R[0])?R[0]:R;let V;typeof C[C.length-1]=="object"?V=C.pop():Array.isArray(R[0])&&(V=R[1]);const $=U();return C.length?C.map(W=>Pe(W)?$[W]?$[W].id:null:W).filter(W=>W).map(W=>y(W,V)):Promise.all($.map(W=>y(W,V)))},H={...xt(),...p,...xl(r,n),setOptions:T,addFile:L,addFiles:A,getFile:O,processFile:w,prepareFile:v,removeFile:y,moveFile:(R,C)=>r.dispatch("MOVE_ITEM",{query:R,index:C}),getFiles:U,processFiles:B,removeFiles:b,prepareFiles:N,sort:R=>r.dispatch("SORT",{compare:R}),browse:()=>{var R=d.element.querySelector("input[type=file]");R&&R.click()},destroy:()=>{H.fire("destroy",d.element),r.dispatch("ABORT_ALL"),d._destroy(),window.removeEventListener("resize",u),document.removeEventListener("visibilitychange",s),r.dispatch("DID_DESTROY")},insertBefore:R=>Kr(d.element,R),insertAfter:R=>Qr(d.element,R),appendTo:R=>R.appendChild(d.element),replaceElement:R=>{Kr(d.element,R),R.parentNode.removeChild(R),t=R},restoreElement:()=>{t&&(Qr(t,d.element),d.element.parentNode.removeChild(d.element),t=null)},isAttachedTo:R=>d.element===R||t===R,element:{get:()=>d.element},status:{get:()=>r.query("GET_STATUS")}};return r.dispatch("DID_INIT"),Le(H)},Yi=(e={})=>{const t={};return Y(Pt(),(r,s)=>{t[r]=s[0]}),Vd({...t,...e})},Gd=e=>e.charAt(0).toLowerCase()+e.slice(1),Hd=e=>Fi(e.replace(/^data-/,"")),ji=(e,t)=>{Y(t,(n,r)=>{Y(e,(s,o)=>{const i=new RegExp(n);if(!i.test(s)||(delete e[s],r===!1))return;if(re(r)){e[r]=o;return}const l=r.group;J(r)&&!e[l]&&(e[l]={}),e[l][Gd(s.replace(i,""))]=o}),r.mapping&&ji(e[r.group],r.mapping)})},xd=(e,t={})=>{const n=[];Y(e.attributes,s=>{n.push(e.attributes[s])});const r=n.filter(s=>s.name).reduce((s,o)=>{const i=z(e,o.name);return s[Hd(o.name)]=i===o.name?!0:i,s},{});return ji(r,t),r},kd=(e,t={})=>{const n={"^class$":"className","^multiple$":"allowMultiple","^capture$":"captureMethod","^webkitdirectory$":"allowDirectoriesOnly","^server":{group:"server",mapping:{"^process":{group:"process"},"^revert":{group:"revert"},"^fetch":{group:"fetch"},"^restore":{group:"restore"},"^load":{group:"load"}}},"^type$":!1,"^files$":!1};Ge("SET_ATTRIBUTE_TO_OPTION_MAP",n);const r={...t},s=xd(e.nodeName==="FIELDSET"?e.querySelector("input[type=file]"):e,n);Object.keys(s).forEach(i=>{J(s[i])?(J(r[i])||(r[i]={}),Object.assign(r[i],s[i])):r[i]=s[i]}),r.files=(t.files||[]).concat(Array.from(e.querySelectorAll("input:not([type=file])")).map(i=>({source:i.value,options:{type:i.dataset.type}})));const o=Yi(r);return e.files&&Array.from(e.files).forEach(i=>{o.addFile(i)}),o.replaceElement(e),o},Fd=(...e)=>tl(e[0])?kd(...e):Yi(...e),Wd=["fire","_read","_write"],Ls=e=>{const t={};return mi(e,t,Wd),t},Yd=(e,t)=>e.replace(/(?:{([a-zA-Z]+)})/g,(n,r)=>t[r]),jd=e=>{const t=new Blob(["(",e.toString(),")()"],{type:"application/javascript"}),n=URL.createObjectURL(t),r=new Worker(n);return{transfer:(s,o)=>{},post:(s,o,i)=>{const a=Kn();r.onmessage=l=>{l.data.id===a&&o(l.data.message)},r.postMessage({id:a,message:s},i)},terminate:()=>{r.terminate(),URL.revokeObjectURL(n)}}},Xd=e=>new Promise((t,n)=>{const r=new Image;r.onload=()=>{t(r)},r.onerror=s=>{n(s)},r.src=e}),Xi=(e,t)=>{const n=e.slice(0,e.size,e.type);return n.lastModifiedDate=e.lastModifiedDate,n.name=t,n},zd=e=>Xi(e,e.name),bs=[],Kd=e=>{if(bs.includes(e))return;bs.push(e);const t=e({addFilter:zl,utils:{Type:S,forin:Y,isString:re,isFile:Je,toNaturalFileSize:Di,replaceInString:Yd,getExtensionFromFilename:kt,getFilenameWithoutExtension:Ri,guesstimateMimeType:$i,getFileFromBlob:Qe,getFilenameFromURL:pt,createRoute:se,createWorker:jd,createView:K,createItemAPI:ae,loadImage:Xd,copyFile:zd,renameFile:Xi,createBlob:vi,applyFilterChain:me,text:X,getNumericAspectRatioFromString:hi},views:{fileActionButton:Ai}});Kl(t.options)},Qd=()=>Object.prototype.toString.call(window.operamini)==="[object OperaMini]",Jd=()=>"Promise"in window,Zd=()=>"slice"in Blob.prototype,ep=()=>"URL"in window&&"createObjectURL"in window.URL,tp=()=>"visibilityState"in document,np=()=>"performance"in window,rp=()=>"supports"in(window.CSS||{}),sp=()=>/MSIE|Trident/.test(window.navigator.userAgent),Mn=(()=>{const e=li()&&!Qd()&&tp()&&Jd()&&Zd()&&ep()&&np()&&(rp()||sp());return()=>e})(),Ae={apps:[]},ip="filepond",He=()=>{};let zi={},Ki={},Qi={},Un={},Dt=He,Lt=He,qn=He,ut=He,Bn=He,$n=He,Vn=He;if(Mn()){Dl(()=>{Ae.apps.forEach(n=>n._read())},n=>{Ae.apps.forEach(r=>r._write(n))});const e=()=>{document.dispatchEvent(new CustomEvent("FilePond:loaded",{detail:{supported:Mn,create:Dt,destroy:Lt,parse:qn,find:ut,registerPlugin:Bn,setOptions:Vn}})),document.removeEventListener("DOMContentLoaded",e)};document.readyState!=="loading"?setTimeout(()=>e(),0):document.addEventListener("DOMContentLoaded",e);const t=()=>Y(Pt(),(n,r)=>{Un[n]=r[1]});zi={...Ti},Qi={...Q},Ki={...x},Un={},t(),Dt=(...n)=>{const r=Fd(...n);return r.on("destroy",Lt),Ae.apps.push(r),Ls(r)},Lt=n=>{const r=Ae.apps.findIndex(s=>s.isAttachedTo(n));return r>=0?(Ae.apps.splice(r,1)[0].restoreElement(),!0):!1},qn=n=>Array.from(n.querySelectorAll(`.${ip}`)).filter(o=>!Ae.apps.find(i=>i.isAttachedTo(o))).map(o=>Dt(o)),ut=n=>{const r=Ae.apps.find(s=>s.isAttachedTo(n));return r?Ls(r):null},Bn=(...n)=>{n.forEach(Kd),t()},$n=()=>{const n={};return Y(Pt(),(r,s)=>{n[r]=s[0]}),n},Vn=n=>(J(n)&&(Ae.apps.forEach(r=>{r.setOptions(n)}),Ql(n)),$n())}const Rp=Object.freeze(Object.defineProperty({__proto__:null,get FileOrigin(){return Qi},get FileStatus(){return Ki},get OptionTypes(){return Un},get Status(){return zi},get create(){return Dt},get destroy(){return Lt},get find(){return ut},get getOptions(){return $n},get parse(){return qn},get registerPlugin(){return Bn},get setOptions(){return Vn},supported:Mn},Symbol.toStringTag,{value:"Module"}));function Ji(e,t,n){for(let r in n)e.values[r]&&(e.values[r].enabled=n[r],op(e,t,r),Rt(e,[r]))}function Cs(e,t,n){const r=e.rules[n].rule,s=(u,d)=>{const f=new Event("change"),m=e.values[u].value.input_type;if([h.SELECT,h.MULTISELECT,h.SWATCHINDROPDOWN].includes(m)){const p=e.html.querySelector(`#select_${e.values[u].option_id}`);if(!p)return;(m===h.SELECT||m===h.SWATCHINDROPDOWN)&&p.querySelector('option[selected="selected"]')?.removeAttribute("selected"),d?p.querySelectorAll("option").forEach((_,E)=>{_.getAttribute("value")===u&&(p.selectedIndex=E)}):p.selectedIndex=0,p?.dispatchEvent(f)}else{const p=e.html.querySelector(`#${u}`);p.checked=d;const _=e.html.querySelector(`[data-value-id="${u}"]`);[h.SWATCH,h.SWATCHCARD,h.SWATCHINPILL].includes(m)&&_&&d&&_.classList.add(D.OPTION_VALUE_SELECTED),p.dispatchEvent(f)}},o=(u,d,f)=>{const m=document.querySelector(`.mw-swiper[id="${u}"]`);if(!m)return;const p=m.querySelector(`.swiper-wrapper [value-id="${d}"]`);p&&(f?(p.setAttribute("class",""),p.classList.add("slide-hidden")):(p.classList.remove("slide-hidden"),p.classList.add("swiper-slide")))},i=(u,d,f)=>{const m=e.html.querySelector(`#${u}`),p=document.querySelector(`.mw-swiper[id="${u}"]`);if(m===null){G(`Not found option container: ${u}`);return}const _=e.options[u],E=d.length?d:_.values;if(f&&_.hidden&&(m.classList.add(D.HIDDEN),_.input_type===h.FILE)){const I=m.querySelector(`.${D.OPTION_CONTAINER} .${D.OPTION_VALUE_BLOCK} .filepond--root`);I&&ut(I).setOptions({disabled:!0})}if(!f&&!_.hidden&&(m.classList.remove(D.HIDDEN),_.input_type===h.FILE)){const I=m.querySelector(`.${D.OPTION_CONTAINER} .${D.OPTION_VALUE_BLOCK} .filepond--root`);I&&ut(I).setOptions({disabled:!1})}const g=Oe.includes(_.input_type);for(let I of E){const T=g?m.querySelector(`[value="${I}"]`):m.querySelector(`#${I}`),O=m.querySelector(`.selectCustom-options [data-value="${I}"]`);f&&e.values[I].hidden.length&&(T?.setAttribute("disabled","disabled"),[h.SELECT,h.MULTISELECT,h.SWATCHINDROPDOWN].includes(_.input_type)?(T?.classList.add(D.HIDDEN),T?.setAttribute("hidden","hidden"),O?.classList.add(D.HIDDEN),O?.setAttribute("hidden","hidden")):(T?.closest(`.${D.OPTION_VALUE_BLOCK}`)?.classList.add(D.HIDDEN),p&&o(u,I,!0)),[h.MULTISWATCH].includes(_.input_type)&&T?.closest(`.${D.OPTION_VALUE_BLOCK}`)?.classList.contains(D.OPTION_VALUE_SELECTED)&&T?.closest(`.${D.OPTION_VALUE_BLOCK}`)?.classList.remove(D.OPTION_VALUE_SELECTED)),!f&&e.values[I].hidden.length===0&&(T?.classList.contains(D.NOT_AVAILABLE)||T?.removeAttribute("disabled"),[h.SELECT,h.MULTISELECT,h.SWATCHINDROPDOWN].includes(_.input_type)?(T?.classList.remove(D.HIDDEN),T?.removeAttribute("hidden"),O?.classList.remove(D.HIDDEN),O?.removeAttribute("hidden")):(T?.closest(`.${D.OPTION_VALUE_BLOCK}`)?.classList.remove(D.HIDDEN),p&&o(u,I,!1)))}if(p){const I=p.querySelector(".swiper")?.swiper;I&&I.update()}},a=(u,d)=>{},l=(u,d,f)=>{if(d===null)return;const m=e.attributes[f],p=e.rules[u].enabled;if(d.mode===ze.INCREASE&&(p&&m.add_rules.includes(u)===!1&&m.add_rules.push(u),p||(m.add_rules=m.add_rules.filter(_=>_!==u))),d.mode===ze.DECREASE&&(p&&m.add_rules.includes(u)===!1&&m.add_rules.push(u),p||(m.add_rules=m.add_rules.filter(_=>_!==u))),d.mode===ze.SET&&(p&&m.override_rules.includes(u)===!1&&m.override_rules.push(u),p||(m.override_rules=m.override_rules.filter(_=>_!==u),m.override_rules.length||(m.override=null)),m.override_rules.sort((_,E)=>e.rules[_].priority-e.rules[E].priority),m.override_rules.length)){const _=m.override_rules[m.override_rules.length-1];m.override=e.rules[_].rule[f].value}},c=(u,d,f)=>{let m=d.values,p={};m.length||(m=e.options[d.option_id].values);for(let E of m)e.values[E].option_id===d.option_id&&(f&&e.values[E].hidden.includes(u)===!1&&(e.values[E].hidden.length===0&&(e.values[E].before_hide=e.values[E].enabled),e.values[E].hidden.push(u),e.values[E].enabled=!1),f||(e.values[E].hidden=e.values[E].hidden.filter(g=>g!==u),e.values[E].hidden.length===0&&(e.values[E].enabled=e.values[E].before_hide)),p[E]=e.values[E].enabled,e.values[E].before_hide&&e.values[E].hidden.length===0&&s(E,!f));const _=e.options[d.option_id].values.filter(E=>e.values[E].hidden.length);e.options[d.option_id].hidden=_.length===e.options[d.option_id].values.length,i(d.option_id,d.values,f),Ji(e,t,p)};for(let u of r.hide_actions)c(n,u,e.rules[n].enabled),t.push(u.option_id);for(let u of r.show_actions)c(n,u,!e.rules[n].enabled),t.push(u.option_id);l(n,r.price,"price"),l(n,r.compare_at_price,"compare_at_price"),a(n,r.main_image)}function op(e,t,n){const r=(s,o)=>s.operator===vn.EQ?ti.includes(o)?s.values.some(i=>e.values[i].enabled):s.values.every(i=>e.values[i].enabled):s.operator===vn.NEQ?s.values.every(i=>!e.values[i].enabled):(G(`triggerRules::checkRuleCondition bad rule condition operator: ${s.operator}`),!1);e.runtime_rules||=new Set;for(let s of e.values[n].rules){let o=e.rules[s].rule,i=e.options[e.values[n].option_id],a=o.condition_type===Qs.ANY?o.conditions.some(l=>r(l,i.input_type)):o.conditions.every(l=>r(l,i.input_type));a&&!e.rules[o.id].enabled&&(!e.runtime_rules.has(s)&&e.runtime_rules.add(s),e.rules[o.id].enabled=!0,Cs(e,t,o.id)),!a&&e.rules[o.id].enabled&&(!e.runtime_rules.has(s)&&e.runtime_rules.add(s),e.rules[o.id].enabled=!1,Cs(e,t,o.id))}}function En(e,t=[]){t=t.length?[...new Set(t)]:Object.keys(e.options);let n=!0;for(let r of t){const s=e.options[r];(s.input_type===h.SELECT||s.input_type===h.SWATCHINDROPDOWN)&&dp(s,e),!s.hidden&&s.is_required&&!up(s,e)&&(n=!1),!s.hidden&&!lp(s,e)&&(n=!1),!s.hidden&&!cp(s,e)&&(n=!1),!s.hidden&&!ap(s,e)&&(n=!1)}return n}function ap(e,t){const n=(l,c)=>{let u="";for(let d of l)[h.MULTISELECT,h.SELECT,h.SWATCHINDROPDOWN].includes(c.values[d].value.input_type)===!1?u+=` #${d},`:u+=` #select_${c.values[d].option_id} [value="${d}"],`;return u.trim().length>0&&(u=u.substring(1,u.length-1)),u};if(![h.CHECKBOX,h.MULTIBUTTON,h.MULTISELECT,h.MULTISWATCH,h.MULTISWATCHINPILL,h.MULTISWATCHCARD].includes(e.input_type)||(e=e,!e.selection_limit.enabled))return!0;let s=!1;const o=t.html.querySelector(`#${e.id}`),i=o?.querySelector('[data-helptext-type="selection_limit"]'),a=e.values.filter(l=>t.values[l].enabled&&t.values[l].hidden.length===0);if(e.qty_input){let l=0;return a.map(c=>l+=parseInt(t.values[c].qty_input)),l>=e.selection_limit.min&&(l<=e.selection_limit.max||e.selection_limit.max===0)}if(a.length===0){const l=o.querySelectorAll(`[${P.H_VALIDATION_DISABLED}]`);for(let c of l)c.removeAttribute("disabled"),c.removeAttribute(P.H_VALIDATION_DISABLED);return i?.classList.add(D.HIDDEN),!0}if((a.length<=e.selection_limit.min||a.length>=e.selection_limit.max)&&i?.classList.remove(D.HIDDEN),e.selection_limit.max>0&&a.length>=e.selection_limit.max){const l=e.values.filter(u=>!t.values[u].enabled&&t.values[u].hidden.length===0),c=n(l,t);if(c.length>0){const u=o.querySelectorAll(c);for(let d of u)d.setAttribute("disabled","disabled"),d.setAttribute(P.H_VALIDATION_DISABLED,"1")}}if(a.length<e.selection_limit.max||e.selection_limit.max===0){const l=o.querySelectorAll(`[${P.H_VALIDATION_DISABLED}]`);for(let c of l)c.removeAttribute("disabled"),c.removeAttribute(P.H_VALIDATION_DISABLED)}return a.length>=e.selection_limit.min&&(a.length<=e.selection_limit.max||e.selection_limit.max===0)&&(s=!0),s}function lp(e,t){if(![h.TEXT,h.TEXTAREA].includes(e.input_type))return!0;const r=t.values[e.values[0]],s=r.value;if(!s.length_range.enabled)return!0;let o=!1;const i=t.html.querySelector(`#${e.id}`);i?.querySelector(`#${r.value.id}`);const a=i?.querySelector('[data-helptext-type="length_range"]'),l=i?.querySelector(`.mw-option__helptext [${P.TEXT_LENGTH}]`),c=s.length_range.max-nt(r.user_input);if(l&&s.length_range.max>0&&c>=0&&(l.innerHTML=c.toString()),!e.is_required&&r.user_input.trim()==="")return a?.classList.add(D.HIDDEN),!0;const u=s.length_range.min||-1,d=s.length_range.max||Number.MAX_SAFE_INTEGER;return nt(r.user_input)<u||nt(r.user_input)>d?(a?.classList.remove(D.HIDDEN),!1):nt(r.user_input)>=u&&nt(r.user_input)<=d?(a?.classList.add(D.HIDDEN),!0):o}function cp(e,t){if(![h.NUMBER,h.RANGESLIDER,h.STEPCOUNTER].includes(e.input_type))return!0;const r=t.values[e.values[0]],s=r.value;if(!s.number_range.enabled)return!0;let o=!1;const i=t.html.querySelector(`#${s.id}`),a=t.html.querySelector(`#${e.id} [data-helptext-type="number_range"]`);if(!e.is_required&&r.user_input.trim()==="")return a?.classList.add(D.HIDDEN),!0;const l=s.number_range.lowest||0,c=s.number_range.highest||Number.MAX_SAFE_INTEGER,u=parseInt(i.value);return u<l&&(i.value=s.number_range.lowest.toString(),a?.classList.remove(D.HIDDEN)),u>c&&(i.value=s.number_range.highest.toString(),a?.classList.remove(D.HIDDEN)),u>=l&&u<=c&&(a?.classList.add(D.HIDDEN),o=!0),o}function up(e,t){let n=!0;if(!e.is_required)return n;const r=i=>{let a=!0;i=i;const l=i.values.filter(u=>t.values[u].enabled&&t.values[u].hidden.length===0),c=t.html.querySelector(`#${i.id} [data-helptext-type="required"]`);return l.length||(c?.classList.remove(D.HIDDEN),a=!1),l.length&&c?.classList.add(D.HIDDEN),a},s=(i,a=!1)=>{let l=!0;i=i;const c=t.values[i.values[0]],u=t.values[i.values[0]].value.id;let d=t.html.querySelector(`#${u}`);const f=t.html.querySelector(`#${i.id} [data-helptext-type="required"]`);return(a?c?.user_input.trim():d.value.trim())===""?(f?.classList.remove(D.HIDDEN),l=!1):f?.classList.add(D.HIDDEN),l},o=[h.TEXT,h.TEXTAREA,h.DATE,h.NUMBER,h.FILE];return Oe.includes(e.input_type)&&(n=r(e)),o.includes(e.input_type)&&(n=s(e,[h.FILE].includes(e.input_type))),n}function dp(e,t){const n=t.options[e.id].values.filter(a=>t.values[a].enabled&&!t.values[a].hidden.length),r=t.html.querySelector(`#select_${e.id}`),s=t.html.querySelector(`[custom-id="select_${e.id}"]`),o=s?.querySelector(`[custom-id="select_${e.id}"] .selectCustom-option:first-child`),i=s?.querySelector(`[custom-id="select_${e.id}"] .selectCustom-trigger`);r?.querySelector('option[disabled="disabled"]')?.removeAttribute("selected"),(n.length===0||n.length>1)&&(r.selectedIndex=0,n.length>1&&n.map(a=>{t.values[a].enabled=!1}),s?.querySelector(".mw-selected.mw-hidden")&&(i.innerHTML=o.querySelector("div").outerHTML)),n.length===1&&r?.querySelectorAll("option").forEach((a,l)=>{a.getAttribute("value")===n[0]&&(r.selectedIndex=l)}),(h.SELECT||h.MULTISELECT||h.SWATCHINDROPDOWN)&&n.length===1&&s?.querySelectorAll(".selectCustom-option").forEach(a=>{a.classList.remove("mw-selected"),a.getAttribute("data-value")===n[0]&&(i.innerHTML=a.querySelector("div").outerHTML,a.classList.add("mw-selected"))})}const pp="shopify-payment-button__button",fp="shopify-payment-button__button--unbranded",mp=1e3;function _p(e){const t=e.commonData.htmlElements.buy_it_now;e.commonData.htmlElements.add_to_cart&&e.commonData.htmlElements.add_to_cart[0];const n=e.commonData.initConfig.settings.translations.i18n_buy_now_button;if(!t)return;let r=null;const s=Tp();t.style.display="none",t.insertAdjacentElement("beforebegin",s);const o=async(l,c)=>{l.preventDefault(),l.stopPropagation(),!e.inProgress&&(c.style.opacity="0.5",e.changeInProgressStatus(!0),e.onEvent("attachEvents::initBuyItNow::clickStart",e.commonData),await e.onClickBuyItNow(),e.changeInProgressStatus(!1),c.classList.remove(D.IN_PROGRESS),c.style.opacity="1",c.removeAttribute("disabled"))},i=()=>{Ep({acceleratedCheckoutButtonsContainer:t,buyItNowLabel:n,onClick:o}),s.remove()},a=new MutationObserver(()=>{t.style.display="none",r&&clearTimeout(r),r=setTimeout(()=>{a.disconnect(),i()},mp)});a.observe(t,{attributes:!0,characterData:!0,childList:!0,subtree:!0,attributeOldValue:!0,characterDataOldValue:!0}),i()}function Ep({acceleratedCheckoutButtonsContainer:e,buyItNowLabel:t,onClick:n}){const r=document.querySelector(`.${D.CLONED_BUY_IT_NOW}`),s=document.querySelector(`.${D.CLONED_ADD_TO_CART}`);if(!e||r)return;hp(e);const o=document.createElement("button");o.setAttribute("type","button"),o.classList.value=`${pp} ${fp} ${D.CLONED_BUY_IT_NOW}`,o.addEventListener("click",i=>n(i,o)),o.textContent=t,s&&s.hasAttribute("disabled")&&o.setAttribute("disabled","disabled"),e.insertAdjacentElement("beforebegin",o)}function hp(e){e.style.display="none",new MutationObserver(()=>{e.style.display="none"}).observe(e,{attributes:!0,characterData:!0,childList:!0,subtree:!0,attributeOldValue:!0,characterDataOldValue:!0})}function Tp(){const e=document.createElement("div");return e.innerHTML=`
    <div
      class="shopify-payment-button__button"
      aria-hidden="true"
      style="background-color: transparent; border: none"
    >
      <div class="shopify-payment-button__skeleton">&nbsp;</div>
    </div>
    <div
      class="shopify-payment-button__more-options shopify-payment-button__skeleton"
      role="button"
      disabled=""
      aria-hidden="true"
    >
      &nbsp;
    </div>
  `,e}class Zi{commonData;inProgress=!1;appState={replacedImage:{}};onCallback;onEvent;ownVariantIds=new Set;lightbox;flatpickr;tippy;tingle;swiper;constructor(t,n,r){this.commonData=t,this.onCallback=n,this.onEvent=r,this.lightbox=new Ja,this.flatpickr=new Qa,this.tippy=new ei,this.tingle=new Za,this.swiper=new el,this.init()}setVariantAttr(t,n,r){this.commonData.loadedState.variant_id=t,this.commonData.loadedState.attributes.price.base=n<0?0:n/100,this.commonData.loadedState.attributes.compare_at_price.base=r<0?0:r/100,De(oe.APPLY_ATTRIBUTE_STATE_HTML)}isVariantRulesExist(){return!!Object.values(this.commonData.loadedState.rules).filter(n=>n.rule.rule_type===Ks.VARIANT).length}changeInProgressStatus(t){this.inProgress=t}insertInline=()=>{const t=(a=0)=>{if(!this.commonData.initConfig.settings.selectors.place_options?.trim()){if(a>=10){G("Terminated due to iteration count limit exceeded");return}this.commonData.htmlElements.options?.offsetParent===null&&(this.commonData.htmlElements.options=this.commonData.htmlElements.options.parentElement,t(a+1))}};if(!this.commonData.htmlElements.options)return;const n=new Date().getTime().toString(),r=this.commonData.htmlElements.options.getAttribute("id")||`mw_apo_${n}`,s=document.querySelector(`#${r}`);s&&(this.commonData.htmlElements.options=s),t(),this.commonData.loadedState.html=this.commonData.loadedState.html.firstChild,this.commonData.loadedState.html.setAttribute("id",r),this.commonData.htmlElements.add_to_cart?.length&&this.commonData.htmlElements.add_to_cart[0].classList.contains(D.CUSTOM_ADD_TO_CART)&&this.commonData.loadedState.html.append(this.commonData.htmlElements.add_to_cart[0]);let o=yn("price",this.commonData.initConfig.settings.selectors.price);const i=Zs(this.commonData.loadedState);if(!o.length&&this.commonData.htmlElements.add_to_cart?.length&&i){const{priceContainer:a,priceElement:l}=zs();o=[l],this.commonData.htmlElements.add_to_cart[0].insertAdjacentElement("beforebegin",a)}this.commonData.htmlElements.price=o,this.commonData.htmlElements.options.replaceWith(this.commonData.loadedState.html),this.commonData.htmlElements.options=document.querySelector(`#${r}`),this.onEvent("init::insertIntoInline::afterHtmlInserted",this.commonData)};async insertOptionsBlock(){this.commonData.type===lt.INLINE&&this.insertInline(),this.commonData.type===lt.MODAL&&await this.tingle.init(this.commonData,{loading:this.inProgress,onEvent:this.onEvent,cancelAction:{label:this.commonData.initConfig.settings.translations.i18n_modal_cancel_btn},submitAction:{label:this.commonData.initConfig.settings.translations.i18n_modal_submit_btn,onAction:this.onClickAddToCart.bind(this)}})}async init(){await Va(this.commonData);const t=Array.from(this.commonData.loadedState.html.querySelectorAll(`[${P.LIGHTBOX}]`)),n=Object.values(this.commonData.loadedState.options).filter(s=>s.input_type===h.DATE),r=Array.from(this.commonData.loadedState.html.querySelectorAll(`[${P.TOOLTIP}]`));await this.insertOptionsBlock(),this.lightbox.init(t),this.tippy.init(r,this.commonData.loadedState,{onLoad:s=>this.onEvent("attachEvents::initTooltip",s)}),this.flatpickr.init(n,this.commonData.loadedState,{dateFormat:this.commonData.initConfig.settings.calendar_format||"m/d/Y",disableMobile:this.commonData.initConfig.settings.calendar_disable_mobile==="yes",onCallback:this.onCallback,onLoad:s=>this.onEvent("attachEvents::initCalendar::flatpickrInstance",s)}),this.attachEvents(),De(oe.APPLY_ATTRIBUTE_STATE_HTML),wa(this.commonData,this.appState),this.onEvent("init::finish",this.commonData),Ha(this.commonData,this.onEvent)}async onClickAddToCart(){const t=async()=>{const l=await et();l&&(this.commonData.initConfig.cart=l)},n=async()=>{await t();let l=`${ve.apiUrl}/product/${this.commonData.initConfig.shop_domain}/cart`;this.commonData.cartId&&(l=`${l}/${this.commonData.cartId}`);const c={},u=Ce(q.CART_TOKEN_COOKIE_NAME);u!==void 0&&(c["cart-token"]=u);const d=new URLSearchParams;if(!this.commonData.initConfig.locale_primary&&this.commonData.initConfig.locale&&d.append("locale",this.commonData.initConfig.locale),[...new Set(d.keys())].length&&(l+=`?${d.toString()}`),this.commonData.htmlElements.form instanceof HTMLFormElement&&document.body.contains(this.commonData.htmlElements.form)){const E=parseInt(new FormData(this.commonData.htmlElements.form).get("id"));Number.isInteger(E)&&E>1&&!this.ownVariantIds.has(E)&&E!==this.commonData.loadedState.variant_id&&(this.commonData.loadedState.variant_id=E)}const f=this.commonData.initConfig.product?.variants?.find(E=>E.id===this.commonData.loadedState.variant_id),m=window.mwApoInit.mws_inventory[f?.id],p=m&&this.commonData.initConfig.settings.beta_features.sync_inventory==="yes"&&f?.inventory_management==="shopify"&&m.inventory_policy==="deny",_={...this.commonData.loadedState,html:""};return(p||this.commonData.cartId&&this.commonData.loadedState.inventory_quantity)&&(_.inventory_quantity=this.commonData.cartId?this.commonData.loadedState.inventory_quantity:m.inventory_quantity),Te({method:this.commonData.cartId?"put":"post",url:l,data:{state:_,shop_cart:kr(this.commonData.initConfig.cart)},headers:c}).then(E=>(u!==E.data.token&&qr(q.CART_TOKEN_COOKIE_NAME,E.data.token,14,!0),E.data.variant_id&&this.ownVariantIds.add(parseInt(E.data.variant_id)||0),{...E.data,status:E.status})).catch(E=>(G("onClick::getMwVariant",E),{...E.response.data,status:E.response.status}))},r=async l=>{const c=this.commonData.initConfig.settings.dev_settings.update_cart_ignore_form;if(this.commonData.htmlElements.form&&!(c&&c==="yes"))return;await t(),await Sn(l.id,this.commonData.initConfig.cart.items);const u=l.children;if(l.children=[],u.push({...l}),(await Rn(u)).status!==200)return{status:400,message:"updateCartNoForm addOwnCart not 200 response"}},s=async l=>{const c=this.commonData.initConfig.settings.dev_settings.update_cart_ignore_form;if(!this.commonData.htmlElements.form||c&&c==="yes")return;const u=this.commonData.htmlElements.form.querySelectorAll(`[${P.PROP_HIDDEN}]`);for(const m of u)m.remove();for(const m in l.properties){if(jn.includes(m)&&typeof l.properties[m]=="string"){const p=_t(`properties[${m}]`,l.properties[m].toString());this.commonData.htmlElements.form.insertBefore(p,this.commonData.htmlElements.form.firstChild)}if(Array.isArray(l.properties[m])){const p=_t(`properties[${m}]`,l.properties[m].join(", "));this.commonData.htmlElements.form.appendChild(p)}}if(this.commonData.htmlElements.variants&&this.commonData.htmlElements.variants.length){!document.body.contains(this.commonData.htmlElements.variants[0])&&this.commonData.initConfig.settings.selectors.variants.trim()&&(this.commonData.htmlElements.variants=[...document.querySelectorAll(this.commonData.initConfig.settings.selectors.variants)]);for(const m of this.commonData.htmlElements.variants)Ga(m,l.variant_id.toString())}else{const m=_t("id",l.variant_id.toString());this.commonData.htmlElements.form.appendChild(m)}const d=this.commonData.htmlElements.form.querySelector('[name="quantity"]');if(d)d.setAttribute("value",l.qty.toString());else{const m=_t("quantity",l.qty.toString());this.commonData.htmlElements.form.appendChild(m)}if(await t(),await Sn(l.id,this.commonData.initConfig.cart.items),(await Rn(l.children)).status!==200)return{status:400,message:"onClickAddToCart: updateCartInForm addOwnCart not 200 response"}};if(!En(this.commonData.loadedState))return this.onEvent("onClick::validate-failed"),Ur(Mr()),{status:400,message:"onClickAddToCart: Validate is failed"};this.commonData.htmlElements.form&&!document.body.contains(this.commonData.htmlElements.form)&&this.commonData.initConfig.settings.selectors.form.trim()&&(this.commonData.htmlElements.form=document.querySelector(this.commonData.initConfig.settings.selectors.form.trim()));let o=await n();if(o.status!==200)return{status:400,message:"onClickAddToCart: ownCart is broken"};if(Ce(q.CART_TOKEN_COOKIE_NAME)===void 0)return{status:400,message:"onClickAddToCart: Cart token is not valid."};o=o,o.product_handle&&await xa(o.product_handle),this.commonData.initConfig.lock_cart_ids[o.id.toString()]="",await s(o),await r(o),delete this.commonData.initConfig.lock_cart_ids[o.id.toString()],this.onEvent("onClickFinish",o);const a=this.commonData.initConfig.settings.dev_settings.update_cart_ignore_form;if(a&&a==="yes"){window.location.href="/cart";return}return{status:200,message:""}}async onClickBuyItNow(){const t=async()=>{const s=`${ve.apiUrl}/product/${this.commonData.initConfig.shop_domain}/cart`,o=Ce(q.CART_TOKEN_COOKIE_NAME);return Te({method:"post",url:s,data:{state:{...this.commonData.loadedState,html:""},shop_cart:kr(this.commonData.initConfig.cart),locale:this.commonData.initConfig.locale_primary?null:this.commonData.initConfig.locale}}).then(i=>(o!==i.data.token&&qr(q.CART_TOKEN_COOKIE_NAME,i.data.token,14,!0),{...i.data,status:i.status})).catch(i=>(G("onClickBuyItNow::getOwnCart",i),this.inProgress=!1,{...i.response.data,status:i.response.status}))},n=async s=>{let o=[];const i=[];o=s.children,s.children=[],o.push({...s});for(const c of o){const u={};for(const d in c.properties)typeof c.properties[d]=="string"?u[d]=c.properties[d].toString():u[d]=c.properties[d].join(", ");i.push({id:c.variant_id,quantity:c.qty,properties:u})}if(!i.length)return{status:200};const a={},l=Ce(q.CART_TOKEN_COOKIE_NAME);return l!==void 0&&(a["cart-token"]=l),await si({items:i},{headers:a})};if(!En(this.commonData.loadedState))return this.onEvent("onClickBuyItNow::validate-failed"),Ur(Mr()),{status:400,message:"onClickBuyItNow: Validate is failed"};let r=await t();if(r.status!==200)return{status:400,message:"onClickBuyItNow: ownCart is broken"};r=r,await n(r),this.onEvent("onClickBuyItNow::finish",r),window.location.href="/checkout"}onHoverReplace(t,n){const r=t.getAttribute("data-mw-replace-on-hover");r&&On(this.commonData,this.appState,{[r]:!0},!0,n)}onChange(t,n){if(this.inProgress)return;const r=[],s=t.closest("[data-option-id]"),o=s&&s.querySelector(`.${D.SWIPER}`),i=s?.getAttribute("data-option-id")||"";let a=this.commonData.loadedState.options[i];if(i===""||!this.commonData.loadedState.options[i]){G(`Parent attribute "data-option-id" not found or ID not present in loaded state. ID: ${i}`);return}if(t.hasAttribute(P.QTY_VALUE_ID)&&Yn.includes(a.input_type)&&a.qty_input){const f=t.getAttribute(P.QTY_VALUE_ID);if(f&&this.commonData.loadedState.values[f]){let m=parseInt(t.value);n==="blur"&&(isNaN(m)||m==0)&&(m=1),t.value=m.toString(),this.commonData.loadedState.values[f].qty_input=t.value,De(oe.APPLY_ATTRIBUTE_STATE_HTML)}return}const l=Oe.includes(a.input_type),c=l?t.value:t.id,u={},d=[];if(l){switch(a.input_type){case h.MULTISWATCH:case h.CHECKBOX:case h.MULTIBUTTON:case h.MULTISWATCHINPILL:case h.MULTISWATCHCARD:if(n==="change"){t.closest(`.${D.OPTION_VALUE_BLOCK}`)?.classList.toggle(D.OPTION_VALUE_SELECTED),u[c]=t.checked;break}break;case h.MULTISELECT:for(const f of t.options)u[f.value]=f.selected;break;case h.SWATCH:case h.BUTTON:case h.RADIO:case h.SELECT:case h.SWATCHINPILL:case h.SWATCHCARD:case h.SWATCHINDROPDOWN:{if([h.SWATCH,h.BUTTON,h.RADIO,h.SWATCHINPILL,h.SWATCHCARD].includes(a.input_type)){if(n!=="click")break;if(t.closest(`.${D.OPTION_VALUE_BLOCK}`)?.classList.contains(D.OPTION_VALUE_SELECTED)&&![h.RADIO].includes(a.input_type)){t.checked=!1,t.closest(`.${D.OPTION_VALUE_BLOCK}`)?.classList.remove(D.OPTION_VALUE_SELECTED);const p=a.values.filter(_=>this.commonData.loadedState.values[_].enabled);for(const _ of p)_===c&&(u[_]=!1);break}else s&&[...s.querySelectorAll(o?`.${D.OPTION_CONTAINER} .${D.OPTION_VALUE_SELECTED}`:`.${D.OPTION_CONTAINER} > .${D.OPTION_VALUE_SELECTED}`)].map(p=>p.classList.remove(D.OPTION_VALUE_SELECTED)),t.closest(`.${D.OPTION_VALUE_BLOCK}`)?.classList.add(D.OPTION_VALUE_SELECTED)}a=a;const f=a.values.filter(p=>this.commonData.loadedState.values[p].enabled),m=a.values.filter(p=>this.commonData.loadedState.values[p].before_hide);for(const p of m)d.push(p);for(const p of f)p!==c&&(u[p]=!1);c!==""&&(u[c]=!0);break}}if(a.qty_input){const f=t.closest(`.${D.OPTION_VALUE_BLOCK}`)?.querySelector(`input[${P.QTY_VALUE_ID}]`);t.closest(`.${D.OPTION_VALUE_BLOCK}`)?.querySelectorAll(`button[${P.QTY_VALUE_ID}]`)?.forEach(p=>{p.setAttribute(P.QTY_VALUE_ID,c)}),f?.setAttribute(P.QTY_VALUE_ID,c),f?.setAttribute("value","1")}Na(this.commonData.loadedState,d),Object.keys(u).length>0&&(Ji(this.commonData.loadedState,r,u),Ba(this.commonData.loadedState,u),this.triggerNumericOptions())}else u[c]=!0,this.commonData.loadedState.values[c].user_input=t.value.trim(),this.commonData.loadedState.values[c].enabled=t.value.trim().length>0,[h.RANGESLIDER,h.STEPCOUNTER].includes(a.input_type)&&t.value==="0"&&(this.commonData.loadedState.values[c].enabled=!1),Rt(this.commonData.loadedState,Object.keys(u));r.push(a.id),On(this.commonData,this.appState,u,l,"click"),qa(this.commonData.loadedState,r),Ma(this.commonData.loadedState,r),Ua(this.commonData.loadedState,r),ni(this.commonData,this.commonData.loadedState,r),En(this.commonData.loadedState,r),St(this.commonData),this.onEvent(oe.ON_CHANGE_OPTION,[this.commonData.loadedState,u]),De(oe.APPLY_ATTRIBUTE_STATE_HTML)}triggerNumericOptions(){const t=this.commonData.loadedState.html,n=".mw-option--type-rangeslider, .mw-option--type-stepcounter";t.querySelectorAll(n).forEach(s=>{const o=s.querySelector(".mw-option__control");o&&(s.classList.contains(D.HIDDEN)||o.dispatchEvent(new Event("change")))})}attachEvents(){const t=this.commonData.loadedState.html,n=_=>{if(_&&this.commonData.initConfig.settings.selectors.add_to_cart&&(this.commonData.htmlElements.add_to_cart=document.querySelectorAll(this.commonData.initConfig.settings.selectors.add_to_cart)),!this.commonData.htmlElements.add_to_cart?.length)return;const E=this.commonData.htmlElements.add_to_cart[0];this.commonData.htmlElements.add_to_cart.forEach((g,I)=>{let T=g.cloneNode(!0);const O=()=>{setTimeout(()=>{this.inProgress=!1,T.classList.remove(D.IN_PROGRESS)},100)};if(I){T.removeAttribute("id"),T.setAttribute("type","button"),T.classList.add(D.CLONED_STICKY_ADD_TO_CART),T.hasAttribute("disabled")&&T.removeAttribute("disabled");const v=document.createElement("div");Ye(v,T),g.classList.add("mw-apo-sticky-add-to-cart-hide"),g.style.display="none",g.insertAdjacentElement("beforebegin",v)}else{if(E.parentElement&&[...E.parentElement.querySelectorAll(`.${D.CLONED_ADD_TO_CART}`)].map(v=>v.remove()),E.hasAttribute("aria-disabled")){E.classList.remove(D.ORIGIN_ADD_TO_CART);return}E.classList.remove("btn-cart"),E.classList.add(D.ORIGIN_ADD_TO_CART),E.classList.contains(D.CUSTOM_ADD_TO_CART)?(T=this.commonData.htmlElements.add_to_cart[0],this.commonData.htmlElements.options?.insertAdjacentElement("afterend",T)):(T.removeAttribute("id"),T.setAttribute("type","button"),T.classList.add(D.CLONED_ADD_TO_CART),E.insertAdjacentElement("beforebegin",T)),T.classList.remove(D.ORIGIN_ADD_TO_CART)}T.addEventListener("click",v=>{v.stopPropagation(),!this.inProgress&&(this.commonData.initConfig.settings.beta_features.sync_inventory==="yes"&&!r()||(this.inProgress=!0,T.classList.add(D.IN_PROGRESS),T.setAttribute("disabled","disabled"),T.setAttribute("aria-busy","true"),this.onEvent("attachEvents::initAddToCart::clickStart",this.commonData),this.onClickAddToCart().then(L=>{L?.status===200&&(T.classList.contains(D.CUSTOM_ADD_TO_CART)?this.commonData.htmlElements.form?.submit():E.click()),O(),L?.status!==200&&G(L),this.onEvent("attachEvents::initAddToCart::clickEnd")}).catch(L=>{O(),this.onEvent("attachEvents::initAddToCart::clickError",L),G("attachEvents::initAddToCart::clickError",L)}).finally(()=>{O(),T.removeAttribute("disabled"),T.setAttribute("aria-busy","false"),this.onEvent("attachEvents::initAddToCart::clickFinally")})))},!0)})},r=()=>{const _=this.commonData.loadedState.variant_id,E=this.commonData.loadedState.qty,g=this.commonData.initConfig.product.variants?.find(T=>T.id===_),I=window.mwApoInit.mws_inventory[g?.id];return I?.inventory_policy==="continue"||!g?.inventory_management||E&&g?.inventory_management==="shopify"&&E<=I?.inventory_quantity?!0:(St(this.commonData,I?.inventory_quantity),!1)},s=()=>{!this.commonData.htmlElements.buy_it_now||!this.commonData.initConfig.settings.beta_features||this.commonData.initConfig.settings.beta_features.use_buy_now==="no"||_p(this)},o=()=>{const _=T=>{const O=T.target.closest(".selectCustom-trigger"),v=T.target.closest(".selectCustom-option"),L=T.target.closest(".mw-custom-select");if(v){const M=L.querySelector("select"),y=v.closest(".selectCustom"),A=y.querySelector(".selectCustom-trigger"),U=y.querySelectorAll(".selectCustom-option"),w=y.querySelector(".selectCustom-option:first-child"),N=v.getAttribute("data-value"),B=y?.closest(".mw-option__value");for(const H of U)H.classList.contains("mw-selected")&&H.classList.remove("mw-selected");if(v.classList.add("mw-selected"),A.innerHTML=v.querySelector("div").outerHTML,N?B?.classList.add("valueSelected"):B?.classList.remove("valueSelected"),A.textContent!==w.textContent?w.classList.add("notDefault"):w.classList.remove("notDefault"),M.value=N,y.classList.remove("isActive"),M.dispatchEvent(new Event("change")),A){const H=Array.from(A.querySelectorAll(`[${P.TOOLTIP}]`));this.tippy.init(H,this.commonData.loadedState,{onLoad:R=>this.onEvent("attachEvents::initTooltip",R)})}const b=A.querySelector(".mw-stack--badge");if(A&&b){const H=b.cloneNode(!0),R=A.querySelector(".mw-option__value-text");b.remove(),R?.after(H)}this.onEvent("attachEvents::initAddToCart::clickEnd")}else if(O){let M=function(){U.classList.add("isActive"),document.addEventListener("click",A)},y=function(){U.classList.remove("isActive"),document.removeEventListener("click",A)},A=function(N){!U.contains(N.target)&&y()};const U=O.closest(".selectCustom");!U.classList.contains("isActive")?M():y()}},E=".mw-custom-select",g=t.querySelectorAll(E),I=t.querySelector("select");for(const T of g){const O=T?.closest(".mw-option__value");T.addEventListener("click",_),T.querySelector(".mw-selected")&&(T.querySelector(".selectCustom-trigger").innerHTML=T.querySelector(".mw-selected div").outerHTML,T.querySelector(".selectCustom-option:first-child")?.classList.remove("selectCustom-option--default"),O&&(O?.classList.add("valueSelected"),setTimeout(()=>{I.dispatchEvent(new Event("change"))},100)))}},i=()=>{const _=O=>{const v=O.target||O.srcElement;if(v.type==="number"&&!v.validity.valid&&v.value===""){v.value=v.value.replace(/[^0-9.]/g,"");return}O.type==="mouseenter"||O.type==="mouseleave"?this.onHoverReplace(v,O.type):this.onChange(v,O.type)},E="input, textarea, select",g=t.querySelectorAll("[data-mw-replace-on-hover]"),I=t.querySelectorAll(E),T=["change"];for(const O of g)O.addEventListener("mouseleave",_),O.addEventListener("mouseenter",_);for(const O of I)if(!(O.hasAttribute(P.EVENT_SKIP)||O.type==="file")){["text","textarea","number"].includes(O.type)&&(T.push("input"),T.push("blur")),["radio"].includes(O.type)&&!T.includes("click")&&T.push("click");for(const v of T)["radio"].includes(O.type)&&v==="change"||["text","textarea","number","select-one"].includes(O.type)&&v==="click"||O.addEventListener(v,_)}},a=()=>{this.commonData.htmlElements.quantity?.addEventListener("change",_=>{const E=parseInt((_.target||_.srcElement).value);this.commonData.loadedState.qty=E>0?E:1,De(oe.APPLY_ATTRIBUTE_STATE_HTML),St(this.commonData)}),this.commonData.htmlElements.quantity?.dispatchEvent(new Event("change"))},l=()=>{document.querySelectorAll(".mw-option__value-qty-button").forEach(E=>{const g=E.classList.contains("mw-option__value-qty-button--plus");E.addEventListener("click",I=>{const T=I.currentTarget.getAttribute("data-qty-for-value");let O=document.createEvent("HTMLEvents");O.initEvent("change",!1,!0);const v=document.querySelector(`.mw-option__value-qty-control[data-qty-for-value="${T}"]`),L=document.querySelector(`.mw-option__value--version-2[data-value-id="${T}"] .mw-option__swatch-media, .mw-option__value--version-1[data-value-id="${T}"] .mw-option__swatch-media, .mw-option--type-swatchinpill .mw-option__value[data-value-id="${T}"] .mw-stack--pill__media, .mw-option--type-multiswatchinpill .mw-option__value[data-value-id="${T}"] .mw-stack--pill__media, .mw-option--type-swatchcard .mw-option__value[data-value-id="${T}"] .mw-stack--card, .mw-option--type-multiswatchcard .mw-option__value[data-value-id="${T}"] .mw-stack--card`);if(v){const M=Number(v.getAttribute("min")),y=Number(v.value),A=g?y+1:y-1;v.value=A<M?M:A,v.dispatchEvent(O),A===0&&L&&L.click()}})})},c=async()=>{const _=async v=>{const L={};for(const M in this.commonData.loadedState.options){const y=this.commonData.loadedState.options[M];if(y.input_type!==h.FILE)continue;L[y.id]=[];const A=this.commonData.loadedState.values[y.values[0]];if(!A.user_input.trim())continue;let U;try{U=await Te.get(`${v}/${A.user_input.replace(/.*\//,"")}`)}catch{continue}Object.keys(U.data).every(w=>["content-disposition","content-length","content-type"].includes(w))&&L[y.id].push({source:A.user_input,options:{type:"local",file:{name:U.data["content-disposition"].replace(/.+filename="(.+)"/,"$1"),size:U.data["content-length"],type:U.data["content-type"]}}})}return L},E=`${ve.apiUrl}/files/${this.commonData.initConfig.shop_domain}`,g=await _(`${E}/head`),I={server:{url:`${E}/upload`,revert:(v,L)=>{L()},remove:(v,L)=>{L()}},allowRevert:!0,allowRemove:!0,allowMultiple:!1,allowPaste:!1,allowProcess:!1,labelFileProcessing:"",credits:""},T=Object.values(this.commonData.loadedState.options).filter(({input_type:v})=>v===h.FILE);if(!T.length)return;const O=(await Ze(()=>import("./filepond-480295ce.js"),["./filepond-480295ce.js","./filepond-3e04b2a7.css"],import.meta.url)).default;O.setOptions(I);for(const v of T){if(v.input_type!==h.FILE)continue;const L=t.querySelector(`#${v.id} input[type="file"]:first-child`);if(!L){G(`Not found file input for option id: ${v.id}`);continue}const M=document.createElement("div");M.classList.add("mw-filepond"),Ye(M,L);const y=this.commonData.loadedState.values[v.values[0]],A=y.value,U={allowFileSizeValidation:!0,maxFileSize:"20MB",maxTotalFileSize:"20MB"};let w={};if(A.file_ext.enabled){let N=[];for(const B of A.file_ext.mime_type)B!==gn.OTHER&&(N=[...N,...Sa(B)]);w={allowFileTypeValidation:!0,fileValidateTypeLabelExpectedTypes:""},A.file_ext.mime_type.includes(gn.OTHER)?w={acceptedFileTypes:["custom"],fileValidateTypeDetectType:(B,b)=>new Promise(H=>{const R=B.name.replace(/.*\.(.+)$/,"$1");(A.file_ext.allowed_ext.includes(R)||b.trim()&&N.includes(b.replace(/\/.*/,"/*")))&&(b="custom"),H(b)}),...w}:w={acceptedFileTypes:N,...w}}O.create(L,{...U,...w,name:"file",stylePanelLayout:"compact",onactivatefile:()=>{y.user_input.trim()&&window.open(y.user_input,"_blank")},onprocessfile:(N,B)=>{try{y.user_input=JSON.parse(B.serverId).file,y.enabled=!!y.user_input.trim(),Rt(this.commonData.loadedState,[y.value.id]),De(oe.APPLY_ATTRIBUTE_STATE_HTML)}catch(b){G("FilePond::onprocessfile::catch",b)}this.onEvent("FilePond::onprocessfile",[N,B])},onremovefile:(N,B)=>{y.user_input="",y.enabled=!1,Rt(this.commonData.loadedState,[y.value.id]),De(oe.APPLY_ATTRIBUTE_STATE_HTML),this.onEvent("FilePond::onremovefile",[N,B])},files:g.hasOwnProperty(v.id)?g[v.id]:[]})}},u=async()=>{const _=this.commonData.loadedState.options,E=[];for(const g in _)if(_[g].value_visibility&&_[g].value_visibility==="carousel"){const I=this.commonData.loadedState.html.querySelector(`[data-option-id="${g}"]`);I&&E.push(I)}await this.swiper.init(E,this.commonData.loadedState.options)},d=()=>{const _=this.commonData.loadedState.options;for(const E in _){const g=_[E].collapse_option,I=["select","swatchindropdown"].includes(_[E].input_type);if(!g||I)continue;const T=document.querySelector(`.mw-option[data-option-id="${E}"] .mw-stack`);if(!T)continue;const O=document.createElement("div");O.classList.add("mw-collapsible"),O.setAttribute("collapse-option-id",E),_[E].collapse_is_open==="yes"&&O.classList.add("active");const v=document.createElement("div");v.classList.add("mw-collapsible--header");const L=document.createElement("div");L.classList.add("mw-collapsible--header_text");const M=document.createElement("div");M.classList.add("mw-icon"),M.textContent=" ";const y=T.querySelector(".mw-stack--spacing-extra-tight");if(y){const N=y.parentElement;L.append(y),N?.remove()}v.append(L),v.append(M);const A=document.createElement("div");A.classList.add("mw-collapsible--content"),O.append(v),Ye(A,T),Ye(O,A);const U=T.querySelectorAll(".mw-option__helptext"),w=document.createElement("div");w.classList.add("mw-collapsible--helptexts"),U.forEach(N=>{const B=N.parentElement;w.append(N),[h.DATE,h.FILE,h.NUMBER,h.TEXT,h.TEXTAREA,h.RANGESLIDER,h.STEPCOUNTER].includes(_[E].input_type)||B?.remove()}),U.length&&A.after(w),v.addEventListener("click",N=>{v.parentElement?.classList.toggle("active")})}},f=()=>{const _=this.commonData.loadedState.options;let E={};for(const g in _){let I=0;const T=_[g].value_visibility,O=_[g].input_type,v=_[g].number_of_hidden_values,L=[h.BUTTON,h.MULTIBUTTON,h.CHECKBOX,h.RADIO].includes(O);if(T!=="showfirst"||!v)continue;const M=document.querySelector(`.mw-option[data-option-id="${g}"] .mw-option__container`);if(!M)continue;const y=M.querySelectorAll(`.${D.OPTION_VALUE_BLOCK}`);if(y.length<=v)continue;y.forEach((U,w)=>{if(w+1>v){U.classList.add(D.HIDDEN_MAX_VALUE),I+=1;const N=U.querySelector([h.SWATCHCARD,h.MULTISWATCHCARD].includes(O)?".mw-stack--card":".mw-option__swatch-media");N&&(E=window.getComputedStyle(N,null))}});const A=document.createElement("div");A.classList.add(D.EXPAND_BUTTON),A.textContent=`+${I}`,[h.SWATCH,h.MULTISWATCH].includes(O)&&A.setAttribute("style",`width: ${L?"42px":E.width}; height: ${L?"32px":E.height==="auto"?E.width:E.height};border-radius: ${E.borderRadius};`),M.append(A),A.addEventListener("click",()=>{document.querySelectorAll(`.mw-option[data-option-id="${g}"] .${D.HIDDEN_MAX_VALUE}`).forEach(w=>{w.classList.remove(D.HIDDEN_MAX_VALUE)}),A.remove()})}},m=()=>{const _=".mw-option--type-rangeslider";t.querySelectorAll(_).forEach(T=>{const O=T.querySelector(".mw-accumulated-title"),v=T.querySelector(".mw-option__control"),L=v.getAttribute("id");if(!L||!v||!O)return;const M=this.commonData.loadedState.values[L];M.qty_input=v.value,v.value==="0"&&(M.enabled=!1),v.addEventListener("input",y=>{const A=y?.target?.value;L&&(this.commonData.loadedState.values[L].qty_input=A);const U=v.min,w=v.max;O.textContent=A;const N=(A-U)/(w-U)*100,B=T.querySelector(".mw-option__control-output"),b=T.querySelector(".mw-option__control-output-bubble span");if(B&&b){const H=Number((A-U)*100/(w-U)),R=7-H*.15;B.setAttribute("style",`left: calc(${H}% + (${R}px))`),b.textContent=A}v.style.background=`linear-gradient(to right, #303030 ${N}%, transparent ${N}%), 
          repeating-linear-gradient(to right, #8A8A8A, #8A8A8A 5px, transparent 0px, transparent 10px)`,v.dispatchEvent(new Event("change"))})});const g=".mw-option--type-stepcounter";t.querySelectorAll(g).forEach(T=>{const O=T.querySelector(".mw-option__control");if(!O)return;const v=O.getAttribute("id");if(!v)return;this.commonData.loadedState.values[v].qty_input=O.value,T.querySelectorAll(".mw-option__value-step-button").forEach(M=>{M.addEventListener("click",()=>{const y=M.classList.contains("mw-option__value-step-button--plus"),A=O.min,U=O.max,w=Number(O.getAttribute("step")),N=Number(O.value);let B=y?N+w:N-w;A&&B<Number(A)&&(B=A),U&&B>Number(U)&&(B=U),!A&&B<1&&(B=1),O.value=B.toString(),this.commonData.loadedState.values[v].qty_input=B.toString(),O.dispatchEvent(new Event("change"))})})}),this.triggerNumericOptions()},p=()=>{[...t.querySelectorAll("input, select")].map(_=>Wn(_))};document.addEventListener(oe.INIT_ADD_TO_CART,()=>{n(!0)}),document.addEventListener(oe.INIT_BUY_IT_NOW,()=>{s()}),document.addEventListener(oe.APPLY_ATTRIBUTE_STATE_HTML,()=>{Pa(this.commonData,this.onCallback)}),n(!1),s(),o(),i(),a(),l(),c(),f(),d(),u(),m(),p()}}function gp(e){let t=window.location.href;const n=()=>{const a=window.location.href;a!==t&&(t=a,e())},r=a=>{const l=history[a];history[a]=function(...c){const u=l.apply(this,c);return n(),u}};r("pushState"),r("replaceState"),window.addEventListener("popstate",n);const s=()=>{history.pushState=o,history.replaceState=i,window.removeEventListener("popstate",n)},o=history.pushState,i=history.replaceState;return{disconnect:s}}const Ip=(e,t,n,r,s,o)=>{let i=[];if(e.variants&&e.variants.length&&e.variants[0]?.offsetParent!==null?i=[e.variants[0]]:(t.settings.selectors.visible_variants.trim()&&(i=[...document.querySelectorAll(t.settings.selectors.visible_variants)]),i.length||(i=[...ct("visible_variants")])),!i.length)return;for(const f of i)Wn(f);const a=()=>{if(e.variants&&!document.body.contains(e.variants[0])&&t.settings.selectors.variants.trim()&&(e.variants=[...document.querySelectorAll(t.settings.selectors.variants)]),!e.variants||!t.product.variants||!n)return;const f=e.variants[0],m=f.type=="select-one"?f.options[f.selectedIndex].value:f.value,p=t.product.variants.filter(E=>E.id.toString()===m);if(!p){G("New variant not found, changed variant:",m);return}const _=p[0];if(_.title.indexOf(q.OWN_VARIANT_TITLE)>-1){const E=`${window.location.protocol}//${window.location.host}/products/${t.product.handle}`;window.location.href=E;return}G("Load new options by variant_id:",_.id.toString()),n.isVariantRulesExist()||r.enabled?o(s,_.id.toString()):n.setVariantAttr(_.id,_.price,_.compare_at_price)},l=()=>{setTimeout(()=>{!document.querySelector(`.${D.CLONED_ADD_TO_CART}`)&&window.mwApoInit.fireEvent&&window.mwApoInit.fireEvent(oe.INIT_ADD_TO_CART)},200)},c=()=>{St(),a(),l()},u=(f,m)=>{for(const _ of m)_?.addEventListener(f,()=>setTimeout(c,200),!1);document.querySelector("variant-picker")?.addEventListener("variant:update",()=>{setTimeout(c,0)})};i[0].nodeName=="SELECT"?u("change",i):u("click",i);const d=e.variants;d?.length&&d[0].addEventListener("change",()=>{setTimeout(c,500)}),document.addEventListener(oe.INLINE_ON_CHANGE_VARIANT,()=>{a()})};let at=(e,t)=>{},lr=(e,t)=>t;const Ut=(e,t)=>{const n=Js(t);if(!e.options){G("initInline is failed. add_to_cart, options elements is required.");return}if(e.options.getAttribute(P.INIT)===null){G(`initInline is failed. ${P.INIT} attribute is missing or incorrect.`,e.options);return}e.add_to_cart?.length||(e.add_to_cart=[Aa()]);let r;const s=(c,u)=>{if(t.settings.dev_settings&&t.settings.dev_settings.show_options_for_out_of_stock==="no"&&u&&t.product.variants?.filter(m=>m.id.toString()===u&&!m.available).length){G(`Variant ${u} is not available.`);return}let d=ve.variantOptionsUri.replace(":shopDomain",t.shop_domain).replace(":cacheHash",t.cache_hash.toString()).replace(":productId",c).replace(":variantId",u);const f=new URLSearchParams;n.enabled&&(f.append("curr",n.currency),f.append("curr_rate",n.rate),f.append("fmt_money",t.shop_money_format),f.append("fmt_money_curr",t.shop_money_with_currency_format)),!t.locale_primary&&t.locale&&(f.append("locale",t.locale),cr(t.locale,t)),[...new Set(f.keys())].length&&(d+=`?${f.toString()}`),Te.get(d).then(m=>{if(m.status!==204&&m.data.html)return m.data.html=Ws(m.data.html),m.data}).then(m=>{if(!m?.options||!Object.keys(m.options).length){G(`No options for the product ${c}.`);return}t.response=t.response||{},t.response[m.variant_id]=Xs("html",m),r=new Zi({htmlElements:e,initConfig:t,multiCurrency:n,loadedState:m,type:lt.INLINE},lr,at)})},o=e.options.getAttribute(P.INIT);let i=e.options.getAttribute(P.VARIANT_ID)||"0";if(!o||isNaN(parseInt(o))){G(`Bad productId in attribute: ${P.INIT}`);return}if(i=isNaN(parseInt(i))?"0":i,t.product.variants?.filter(c=>c.id.toString()===i&&c.title.includes("#MWS Options"))?.length&&e.add_to_cart.length){e.add_to_cart.forEach(c=>{c.setAttribute("disabled","disabled")});return}if(s(o,i),t.template_name!=="product"&&o!==t.product.id.toString())return;const l=setInterval(()=>{typeof r<"u"&&(Ip(e,t,r,n,o,s),clearInterval(l))},500)},cr=(e,t)=>{if(typeof t.settings.i18n>"u"||!t.settings.i18n)return t;const n=t.settings.i18n[e];if(typeof n<"u"){const r=n.localizations;for(const s of Object.keys(t.settings.translations))r[s]&&(t.settings.translations[s]=r[s])}return t},eo=(e,t)=>{const n=async(i,a,l)=>{l.length&&!Number.isInteger(parseInt(l))&&(l="");const c=Js(t);let u=(l.length?ve.cartOptionsUri:ve.variantOptionsUri).replace(":shopDomain",t.shop_domain).replace(":cacheHash",t.cache_hash.toString()).replace(":productId",i).replace(":variantId",a).replace(":cartId",l);const d=new URLSearchParams;c.enabled&&(d.append("curr",c.currency),d.append("curr_rate",c.rate),d.append("fmt_money",t.shop_money_format),d.append("fmt_money_curr",t.shop_money_with_currency_format)),!t.locale_primary&&t.locale&&(d.append("locale",t.locale),t=cr(t.locale,t)),[...new Set(d.keys())].length&&(u+=`?${d.toString()}`);const f=Ce(q.CART_TOKEN_COOKIE_NAME),m={};f!==void 0&&(m["cart-token"]=f),Te.get(u,{headers:m}).then(p=>{if(p.status===204||!p.data.html)return{};if(p.data.product_title){const _=Ra(p.data.product_title,p.data.product_img,_e(Math.abs(p.data.attributes.price.base)*100,t.shop_money_format,c),_e(Math.abs(p.data.attributes.compare_at_price.base)*100,t.shop_money_format,c),p.data.qty);p.data.html=_.replace(q.PRODUCT_META_PLACEHOLDER,p.data.html)}return p.data.html=Ws(p.data.html),p.data}).then(p=>{if(!p?.options||!Object.keys(p.options).length){G(`No options for the productId ${i}; variantId: ${a}; cartId: ${l};`);return}t.response=t.response?t.response:{},t.response[p.variant_id]=Xs("html",p);const _={};if(p.html.querySelector(".mw-product-info")){let E=p.html.querySelector(".mw-product-info__quantity input");E&&(_.quantity=E),_.options=p.html,E=p.html.querySelector(".mw-product-info__price span"),p.attributes.price.base.toString()&&E&&(_.price=[E]),E=p.html.querySelector(".mw-product-info__compare-price"),p.attributes.compare_at_price.base.toString()&&E&&(_.compare_price=[E]),t.settings.selectors.gallery_container=".mw-product-info .mw-product-info__image"}new Zi({htmlElements:_,initConfig:t,multiCurrency:c,loadedState:p,type:lt.MODAL,cartId:parseInt(l)||null},lr,at)})},r=e.getAttribute(P.CONFIGURE_LINK),s=e.getAttribute(P.VARIANT_ID)||"0",o=e.getAttribute(P.CART_ID)||"";if(!r){G(`Missing productId in attribute: ${P.CONFIGURE_LINK}`);return}n(r,s,o)},to=e=>{const t=document.querySelectorAll(`[${P.INIT}]:not([${P.PROCESS}])`);for(const n of t){const r={};if(!n.getAttribute(P.S_CONTAINER)){G(`${P.S_CONTAINER} is reuqired attribute for inline options.`,n);continue}if(r.container=n.closest(n.getAttribute(P.S_CONTAINER)),n.getAttribute(P.S_ADD_TO_CART)&&(r.add_to_cart=[r.container.querySelector(n.getAttribute(P.S_ADD_TO_CART))]),n.getAttribute(P.S_PRICE)&&(r.price=[...r.container.querySelectorAll(n.getAttribute(P.S_PRICE))]),n.getAttribute(P.S_COMPARE_PRICE)&&(r.compare_price=[...r.container.querySelectorAll(n.getAttribute(P.S_COMPARE_PRICE))]),n.getAttribute(P.S_QUANTITY)&&(r.quantity=r.container.querySelector(n.getAttribute(P.S_QUANTITY))),n.getAttribute(P.S_GALLERY_CONTAINER)&&(r.gallery_container=r.container.querySelector(n.getAttribute(P.S_GALLERY_CONTAINER))),n.getAttribute(P.S_GALLERY_IMAGE)&&(r.gallery_image=r.container.querySelector(n.getAttribute(P.S_GALLERY_IMAGE))),n.getAttribute(P.S_FORM)&&(r.form=r.container.querySelector(n.getAttribute(P.S_FORM))),n.getAttribute(P.S_VARIANTS)&&(r.variants=[...r.container.querySelectorAll(n.getAttribute(P.S_VARIANTS))]),n.getAttribute(P.PRODUCT_INFO))try{const i=JSON.parse(n.getAttribute(P.PRODUCT_INFO));e.product=i}catch{G("initInlineHelpers:: the value of the data-mw-product attribute is not {{product | json}}")}r.options=n;const s=new Date().getTime().toString(),o=`options_${s}`;r.options.setAttribute(P.PROCESS,s),r.options.setAttribute("id",o),Ut(r,e)}},no=e=>{document.addEventListener("click",t=>{const n=t.target||t.srcElement;n.hasAttribute(P.CONFIGURE_LINK)&&eo(n,e)})},vp=async e=>{const t=()=>{(()=>{const a=["amount","amount_no_decimals","amount_with_comma_separator","amount_no_decimals_with_comma_separator","amount_with_apostrophe_separator"];let l="";for(const c in a)if(e.shop_money_format.indexOf(c)){l=c;break}a.includes(l)&&(e.settings.currency_format=l)})(),e.lock_cart_ids||(e.lock_cart_ids={})},n=()=>{const i={};if(e.settings.selectors.buy_it_now.trim()?i.buy_it_now=document.querySelector(e.settings.selectors.buy_it_now):i.buy_it_now=ce("buy_it_now"),i.buy_it_now||G("HtmlElement 'buy_it_now' not found."),e.settings.selectors.add_to_cart.trim())i.add_to_cart=document.querySelectorAll(e.settings.selectors.add_to_cart);else{const u=ce("add_to_cart"),d=ce("sticky_add_to_cart");i.add_to_cart=[],u&&i.add_to_cart?.push(u),d&&i.add_to_cart?.push(d)}if(e.settings.selectors.quantity.trim()?i.quantity=document.querySelector(e.settings.selectors.quantity):i.quantity=ce("product_qty"),i.quantity||G("HtmlElement 'quantity' not found."),e.settings.selectors.gallery_container.trim()?i.gallery_container=document.querySelector(e.settings.selectors.gallery_container):i.gallery_container=ce("gallery_container"),i.gallery_container||G("HtmlElement 'gallery_container' not found."),e.settings.selectors.gallery_image.trim()?i.gallery_image=document.querySelector(e.settings.selectors.gallery_image):i.gallery_image=ce("gallery_image"),i.gallery_image||G("HtmlElement 'gallery_image' not found."),e.settings.selectors.form.trim()&&(i.form=document.querySelector(e.settings.selectors.form)),i.form||(i.add_to_cart.length&&(i.form=i.add_to_cart[0].closest("form")),i.form||(i.form=document.querySelector(`#product_form_${e.product.id}`)),i.form||(i.form=ce("product_form"))),i.form||G("HtmlElement 'form' not found."),e.settings.selectors.variants.trim()&&(i.variants=[...document.querySelectorAll(e.settings.selectors.variants)]),i.form&&!i.variants&&(i.variants=[...i.form.querySelectorAll('[name="id"]')]),i.variants||(i.variants=ct("shopify_variants")),!i.variants.length)G("HtmlElement 'variants' not found.");else for(const u of i.variants)Wn(u);const a=new Date().getTime().toString(),l=`options_${a}`;let c=document.getElementById("mw-apo-app-block");if(c===null&&(e.settings.selectors.place_options.trim()?c=document.querySelector(e.settings.selectors.place_options):c=ce("place_options"),c===null&&(i.form||i.variants))){const u=document.createElement("span");u.setAttribute(P.PROCESS,a),u.setAttribute("id",l),i.variants&&i.variants.length?i.variants[0].insertAdjacentElement("afterend",u):i.form&&i.form.insertBefore(u,i.form.firstChild),c=document.querySelector(`[${P.PROCESS}="${a}"]`)}return c!==null&&(c.hasAttribute(P.INIT)||c.setAttribute(P.INIT,e.product.id.toString()),c.hasAttribute(P.PROCESS)||c.setAttribute(P.PROCESS,a),c.hasAttribute("id")||c.setAttribute("id",l),!c.hasAttribute(P.VARIANT_ID)&&i.variants&&i.variants.length&&c.setAttribute(P.VARIANT_ID,i.variants[0].value)),i.options=c,i.options||G("HtmlElement 'options' not found."),i},r=i=>{if(!e.cart.items.filter(c=>c.properties&&c.properties[q.OWN_PROP_CART]).length)return;const l={};if(e.settings.selectors.lines.trim()?l.lines=[...document.querySelectorAll(e.settings.selectors.lines)]:l.lines=ct("cart_row"),!l.lines.length){G("Cart lines not found.");return}!i.locale_primary&&i.locale&&cr(i.locale,i);for(const c in e.cart.items){const u=e.cart.items[c];u.properties=u.properties||{};const d=u.properties[q.OWN_PROP_CART];if(!d)continue;if(u.product_id===null)return;const f=l.lines[c];if(!f){G(`Not found line for ${q.OWN_PROP_CART}: ${d}`);continue}const m=`[${P.CONFIGURE_LINK}="${u.product_id}"]`,p=f.querySelector(m);if(p&&p.getAttribute(P.VARIANT_ID)===u.id.toString()&&p.getAttribute(P.CART_ID)===d)continue;const _=document.createElement("a");_.setAttribute("href","javascript:void(0);"),_.setAttribute(P.CONFIGURE_LINK,u.product_id.toString()),_.setAttribute(P.VARIANT_ID,u.id.toString()),_.setAttribute(P.CART_ID,d),_.classList.add(D.CONFIGURE_LINK),_.innerText=e.settings.translations.i18n_configure_link;const E=[...f.querySelectorAll(`a[href*="${u.url}"]`)],g=E.filter(I=>!I.parentElement?.querySelector("img"))[0];E.map(I=>{I.setAttribute("href",(I.getAttribute("href")||"").replace(/\?variant=.*/,""))}),u.properties[q.OWN_PROP_OPTION]&&g&&g.classList.add(D.PREVENT_DEFAULT),p?(p.insertAdjacentElement("afterend",_),p.parentNode?.removeChild(p)):g?g.parentElement&&g.parentElement.tagName!=="TD"?g.parentElement.insertAdjacentElement("afterend",_):g.insertAdjacentElement("afterend",_):G(`Not found automated link for line: ${u.url}`)}},s=()=>{!e.apo.initialized||!e.is_used||gp(async()=>{const i=window.location.href,a=new DOMParser,c=await(await fetch(i)).text(),u=a.parseFromString(c,"text/html"),d=u.getElementById("mwsApoProduct"),f=u.getElementById("mwsApoInventoryVariants");if(document.querySelector(".mw-apo-container")||!d||!f)return;const p=JSON.parse(d.innerHTML),_=JSON.parse(f.innerHTML);e.product=p,e.mws_inventory=_,delete e.response,Ut(n(),e)})},o=()=>{document.addEventListener("click",i=>{if((i.target||i.srcElement).classList.contains(D.PREVENT_DEFAULT)){i.preventDefault();return}})};if(e===void 0){G("window.mwApoInit is not defined.");return}if(e.apo.initialized){G("APO is already initialized.");return}if(e.is_used){G("window.mwApoInit is already used.");return}window.mwApoInit.settings.selectors.product={},window.mwApoInit.settings.selectors.cart={},window.mwApoInit.settings.selectors.common={},window.mwApoCustom&&window.mwApoCustom(),e.onEvent!==void 0&&(at=e.onEvent),e.onCallback!==void 0&&(lr=e.onCallback),at("initialize::start"),e.is_used=!0,e.apo.initialized=!0,t(),e.settings.dev_settings&&e.settings.dev_settings.cart_request==="yes"&&(e.cart=await et()),e.template_name==="product"&&Ut(n(),e),e.template_name==="cart"&&e.cart.items.length&&r(e),no(e),to(e),ri(e),oi(e),Ka(e),o(),s(),at("initialize::end")},Op={initialized:!1,initInline:Ut,initConfigureLinks:eo,hideCartElements:ii,removeOwnVariants:ri,validateCart:oi,initInlineHelpers:to,initConfigureHelpers:no,initialize:vp};window.mwApoInit.apo=Op;window.mwApoInit.fireEvent=De;window.mwApoInit.apo.initialize(window.mwApoInit);export{Rp as F,yp as c,io as g,Bn as r};
